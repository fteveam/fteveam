var z=Object.defineProperty,H=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,Q=Object.prototype.propertyIsEnumerable;var A=(r,e,o)=>e in r?z(r,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[e]=o,P=(r,e)=>{for(var o in e||(e={}))Z.call(e,o)&&A(r,o,e[o]);if(k)for(var o of k(e))Q.call(e,o)&&A(r,o,e[o]);return r},x=(r,e)=>H(r,J(e));import{SystemProgram as Se,SYSVAR_RENT_PUBKEY as he,TransactionInstruction as q}from"@solana/web3.js";import _e from"bn.js";import{get as M,set as $}from"lodash";import U from"dayjs";import ee from"dayjs/plugin/utc";U.extend(ee);var _=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:3,this.name=e.name}set level(e){this.logLevel=e}get time(){return U().utc().format("YYYY/MM/DD HH:mm:ss UTC")}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let o=e.map(a=>typeof a=="object"?JSON.stringify(a):a).join(", ");throw new Error(o)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},I={},te={};function S(r){let e=M(I,r);if(!e){let o=M(te,r);e=new _({name:r,logLevel:o}),$(I,r,e)}return e}import{TOKEN_PROGRAM_ID as re}from"@solana/spl-token";import{PublicKey as c,SystemProgram as oe,SYSVAR_RENT_PUBKEY as ne}from"@solana/web3.js";function u({pubkey:r,isSigner:e=!1,isWritable:o=!0}){return{pubkey:r,isWritable:o,isSigner:e}}var v=[u({pubkey:re,isWritable:!1}),u({pubkey:oe.programId,isWritable:!1}),u({pubkey:ne,isWritable:!1})];var Ue=new c("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),ve=new c("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),Ke=new c("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),Ne=new c("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),Ee=new c("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),De=new c("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),Ce=new c("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),Ge=new c("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),We=new c("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),Oe=new c("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),Ye=new c("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),je=new c("So11111111111111111111111111111111111111112"),K=c.default;import{PublicKey as de}from"@solana/web3.js";import C,{isBN as G}from"bn.js";import{bits as ze,BitStructure as He,blob as ae,Blob as Je,cstr as Ze,f32 as Qe,f32be as $e,f64 as et,f64be as tt,greedy as rt,Layout as se,ns64 as ot,ns64be as nt,nu64 as at,nu64be as st,offset as ut,s16 as it,s16be as ct,s24 as dt,s24be as yt,s32 as pt,s32be as mt,s40 as lt,s40be as ft,s48 as Pt,s48be as gt,s8 as Lt,seq as ue,struct as xt,Structure as ie,u16 as bt,u16be as wt,u24 as St,u24be as ht,u32 as _t,u32be as Tt,u40 as Vt,u40be as Rt,u48 as Bt,u48be as Ft,u8 as kt,UInt as ce,union as At,Union as Mt,unionLayoutDiscriminator as It,utf8 as Ut}from"@solana/buffer-layout";var T=se,N=ie;var E=ce;var D=ue;var b=ae;var h=class extends T{constructor(o,a,n){super(o,n);this.blob=b(o),this.signed=a}decode(o,a=0){let n=new C(this.blob.decode(o,a),10,"le");return this.signed?n.fromTwos(this.span*8).clone():n}encode(o,a,n=0){return typeof o=="number"&&(o=new C(o)),this.signed&&(o=o.toTwos(this.span*8)),this.blob.encode(o.toArrayLike(Buffer,"le",this.span),a,n)}};function f(r){return new E(1,r)}function t(r){return new h(8,!1,r)}function l(r){return new h(16,!1,r)}var V=class extends T{constructor(o,a,n,y){super(o.span,y);this.layout=o,this.decoder=a,this.encoder=n}decode(o,a){return this.decoder(this.layout.decode(o,a))}encode(o,a,n){return this.layout.encode(this.encoder(o),a,n)}getSpan(o,a){return this.layout.getSpan(o,a)}};function s(r){return new V(b(32),e=>new de(e),e=>e.toBuffer(),r)}var R=class extends N{decode(e,o){return super.decode(e,o)}};function i(r,e,o){return new R(r,e,o)}function d(r,e,o){let a,n=typeof e=="number"?e:G(e)?e.toNumber():new Proxy(e,{get(y,m){if(!a){let p=Reflect.get(y,"count");a=G(p)?p.toNumber():p,Reflect.set(y,"count",a)}return Reflect.get(y,m)},set(y,m,p){return m==="count"&&(a=p),Reflect.set(y,m,p)}});return D(r,n,o)}import{PublicKey as w}from"@solana/web3.js";var $t=S("Raydium_farm_config"),W="EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q",er=new w(W),O="9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z",tr=new w(O),Y="FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG",rr=new w(Y),or={[W]:3,[O]:5,[Y]:6};var nr=new w("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),ar=new w("FrspKwj8i3pNmKwXreTveC4fu7KL5ZbGeXdZBe2XViu1");var j={"Standard SPL":0,"Option tokens":1};var B=i([f("instruction")]),pr=i([f("instruction")]),ge=i([t("rewardState"),t("rewardOpenTime"),t("rewardEndTime"),t("rewardLastUpdateTime"),t("totalReward"),t("totalRewardEmissioned"),t("rewardClaimed"),t("rewardPerSecond"),l("accRewardPerShare"),s("rewardVault"),s("rewardMint"),s("rewardSender"),t("rewardType"),d(t(),15,"padding")]),Le=i([t("state"),t("nonce"),s("lpVault"),s("rewardVault"),s(),s(),t(),t(),t("totalReward"),l("perShareReward"),t("lastSlot"),t("perSlotReward")]),xe=i([t("state"),t("nonce"),s("lpVault"),s("rewardVaultA"),t("totalRewardA"),l("perShareRewardA"),t("perSlotRewardA"),f("option"),s("rewardVaultB"),b(7),t("totalRewardB"),l("perShareRewardB"),t("perSlotRewardB"),t("lastSlot"),s()]),be=i([t(),t("state"),t("nonce"),t("validRewardTokenNum"),l("rewardMultiplier"),t("rewardPeriodMax"),t("rewardPeriodMin"),t("rewardPeriodExtend"),s("lpMint"),s("lpVault"),d(ge,5,"rewardInfos"),s("creator"),s(),d(t(),32,"padding")]),ye=new Proxy(Le,{get(r,e,o){return e==="decode"?(...a)=>{let n=r.decode(...a);return x(P({},n),{version:3,rewardInfos:[{rewardVault:n.rewardVault,totalReward:n.totalReward,perSlotReward:n.perSlotReward,perShareReward:n.perShareReward}]})}:Reflect.get(r,e,o)}}),pe=new Proxy(xe,{get(r,e,o){return e==="decode"?(...a)=>{let n=r.decode(...a);return x(P({},n),{version:5,rewardInfos:[{rewardVault:n.rewardVaultA,totalReward:n.totalRewardA,perSlotReward:n.perSlotRewardA,perShareReward:n.perShareRewardA},{rewardVault:n.rewardVaultB,totalReward:n.totalRewardB,perSlotReward:n.perSlotRewardB,perShareReward:n.perShareRewardB}]})}:Reflect.get(r,e,o)}}),me=new Proxy(be,{get(r,e,o){return e==="decode"?(...a)=>{let n=r.decode(...a);return x(P({},n),{version:6,rewardInfos:n.rewardInfos.map(y=>{var m;return x(P({},y),{rewardType:((m=Object.entries(j).find(p=>String(p[1])===y.rewardType.toString()))!=null?m:["Standard SPL"])[0]})})})}:Reflect.get(r,e,o)}}),we=i([t("isSet"),t("rewardPerSecond"),t("rewardOpenTime"),t("rewardEndTime"),t("rewardType")]),F=i([f("instruction"),t("nonce"),d(we,5,"rewardTimeInfo")]),mr=i([f("instruction"),t("rewardReopenTime"),t("rewardEndTime"),t("rewardPerSecond")]),lr=i([f("instruction"),t("isSet"),t("rewardPerSecond"),t("rewardOpenTime"),t("rewardEndTime")]),fr=i([t("state"),s("id"),s("owner"),t("deposited"),d(t(),1,"rewardDebts")]),le=i([t("state"),s("id"),s("owner"),t("deposited"),d(l(),1,"rewardDebts"),d(t(),17)]),Pr=i([t("state"),s("id"),s("owner"),t("deposited"),d(t(),2,"rewardDebts")]),fe=i([t("state"),s("id"),s("owner"),t("deposited"),d(l(),2,"rewardDebts"),d(t(),17)]),Pe=i([t(),t("state"),s("id"),s("owner"),t("deposited"),d(l(),5,"rewardDebts"),d(t(),16)]),gr=i([f("instruction"),t("amount")]);var Te=S("Raydium_farm_instruction");async function Vr(r){let{version:e,id:o,ledger:a,programId:n,owner:y}=r,m={3:9,5:10}[e];m||Te.logWithError(`invalid farm pool version: ${e}`);let p=Buffer.alloc(B.span);B.encode({instruction:m},p);let X=[u({pubkey:o}),u({pubkey:a}),u({pubkey:y,isWritable:!1}),u({pubkey:Se.programId,isWritable:!1}),u({pubkey:he,isWritable:!1})];return new q({programId:n,keys:X,data:p})}function Rr(r){var a;let e=Buffer.alloc(F.span);F.encode({instruction:0,nonce:new _e(r.nonce),rewardTimeInfo:r.rewardInfoConfig},e);let o=[...v,u({pubkey:r.farmKeyPair.publicKey}),u({pubkey:r.farmAuthority,isWritable:!1}),u({pubkey:r.lpVault}),u({pubkey:r.lpMint,isWritable:!1}),u({pubkey:r.lockVault}),u({pubkey:r.lockMint,isWritable:!1}),u({pubkey:(a=r.lockUserAccount)!=null?a:K}),u({pubkey:r.owner,isWritable:!1,isSigner:!0})];for(let n of r.rewardInfo)o.push(u({pubkey:n.rewardMint,isWritable:!1}),u({pubkey:n.rewardVault}),u({pubkey:n.userRewardToken}));return new q({programId:r.programId,keys:o,data:e})}export{Vr as createAssociatedLedgerAccountInstruction,Rr as makeCreateFarmInstruction};
//# sourceMappingURL=instruction.mjs.map