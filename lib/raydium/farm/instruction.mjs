var q=Object.defineProperty,X=Object.defineProperties;var z=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var k=(t,o,r)=>o in t?q(t,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[o]=r,P=(t,o)=>{for(var r in o||(o={}))H.call(o,r)&&k(t,r,o[r]);if(F)for(var r of F(o))J.call(o,r)&&k(t,r,o[r]);return t},b=(t,o)=>X(t,z(o));import{SystemProgram as he,SYSVAR_RENT_PUBKEY as _e,TransactionInstruction as Y}from"@solana/web3.js";import Te from"bn.js";import{get as A,set as Z}from"lodash";import Q from"pino";import $ from"pino-pretty";var M={},ee={},te=$({colorize:!0,levelFirst:!0,translateTime:"SYS:yyyymmdd HH:MM:ss.l"}),re=Q({base:null,level:"silent"},te);function S(t){let o=A(M,t);if(!o){let r=A(ee,t);o=re.child({name:t},{level:r}),Z(M,t,o)}return o.logWithError=(...r)=>{let a=r.map(n=>typeof n=="object"?JSON.stringify(n):n).join(", ");throw new Error(a)},o}import{TOKEN_PROGRAM_ID as oe}from"@solana/spl-token";import{PublicKey as c,SystemProgram as ne,SYSVAR_RENT_PUBKEY as ae}from"@solana/web3.js";function u({pubkey:t,isSigner:o=!1,isWritable:r=!0}){return{pubkey:t,isWritable:r,isSigner:o}}var I=[u({pubkey:oe,isWritable:!1}),u({pubkey:ne.programId,isWritable:!1}),u({pubkey:ae,isWritable:!1})];var Ne=new c("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),Ee=new c("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),De=new c("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),Ce=new c("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),Ge=new c("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),We=new c("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),Oe=new c("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),Ye=new c("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),je=new c("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),qe=new c("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),Xe=new c("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),ze=new c("So11111111111111111111111111111111111111112"),U=c.default;import{PublicKey as ye}from"@solana/web3.js";import E,{isBN as D}from"bn.js";import{bits as Ze,BitStructure as Qe,blob as se,Blob as $e,cstr as et,f32 as tt,f32be as rt,f64 as ot,f64be as nt,greedy as at,Layout as ue,ns64 as st,ns64be as ut,nu64 as it,nu64be as ct,offset as dt,s16 as yt,s16be as pt,s24 as mt,s24be as lt,s32 as ft,s32be as Pt,s40 as xt,s40be as Lt,s48 as bt,s48be as gt,s8 as wt,seq as ie,struct as St,Structure as ce,u16 as ht,u16be as _t,u24 as Tt,u24be as Vt,u32 as Rt,u32be as Bt,u40 as Ft,u40be as kt,u48 as At,u48be as Mt,u8 as It,UInt as de,union as Ut,Union as Kt,unionLayoutDiscriminator as vt,utf8 as Nt}from"@solana/buffer-layout";var _=ue,K=ce;var v=de;var N=ie;var g=se;var h=class extends _{constructor(r,a,n){super(r,n);this.blob=g(r),this.signed=a}decode(r,a=0){let n=new E(this.blob.decode(r,a),10,"le");return this.signed?n.fromTwos(this.span*8).clone():n}encode(r,a,n=0){return typeof r=="number"&&(r=new E(r)),this.signed&&(r=r.toTwos(this.span*8)),this.blob.encode(r.toArrayLike(Buffer,"le",this.span),a,n)}};function f(t){return new v(1,t)}function e(t){return new h(8,!1,t)}function l(t){return new h(16,!1,t)}var T=class extends _{constructor(r,a,n,y){super(r.span,y);this.layout=r,this.decoder=a,this.encoder=n}decode(r,a){return this.decoder(this.layout.decode(r,a))}encode(r,a,n){return this.layout.encode(this.encoder(r),a,n)}getSpan(r,a){return this.layout.getSpan(r,a)}};function s(t){return new T(g(32),o=>new ye(o),o=>o.toBuffer(),t)}var V=class extends K{decode(o,r){return super.decode(o,r)}};function i(t,o,r){return new V(t,o,r)}function d(t,o,r){let a,n=typeof o=="number"?o:D(o)?o.toNumber():new Proxy(o,{get(y,m){if(!a){let p=Reflect.get(y,"count");a=D(p)?p.toNumber():p,Reflect.set(y,"count",a)}return Reflect.get(y,m)},set(y,m,p){return m==="count"&&(a=p),Reflect.set(y,m,p)}});return N(t,n,r)}import{PublicKey as w}from"@solana/web3.js";var rr=S("Raydium_farm_config"),C="EhhTKczWMGQt46ynNeRX1WfeagwwJd7ufHvCDjRxjo5Q",or=new w(C),G="9KEPoZmtHUrBbhWN1v1KWLMkkvwY6WLtAVUCPRtRjP4z",nr=new w(G),W="FarmqiPv5eAj3j1GMdMCMUGXqPUvmquZtMy86QH6rzhG",ar=new w(W),sr={[C]:3,[G]:5,[W]:6};var ur=new w("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),ir=new w("FrspKwj8i3pNmKwXreTveC4fu7KL5ZbGeXdZBe2XViu1");var O={"Standard SPL":0,"Option tokens":1};var R=i([f("instruction")]),fr=i([f("instruction")]),Le=i([e("rewardState"),e("rewardOpenTime"),e("rewardEndTime"),e("rewardLastUpdateTime"),e("totalReward"),e("totalRewardEmissioned"),e("rewardClaimed"),e("rewardPerSecond"),l("accRewardPerShare"),s("rewardVault"),s("rewardMint"),s("rewardSender"),e("rewardType"),d(e(),15,"padding")]),be=i([e("state"),e("nonce"),s("lpVault"),s("rewardVault"),s(),s(),e(),e(),e("totalReward"),l("perShareReward"),e("lastSlot"),e("perSlotReward")]),ge=i([e("state"),e("nonce"),s("lpVault"),s("rewardVaultA"),e("totalRewardA"),l("perShareRewardA"),e("perSlotRewardA"),f("option"),s("rewardVaultB"),g(7),e("totalRewardB"),l("perShareRewardB"),e("perSlotRewardB"),e("lastSlot"),s()]),we=i([e(),e("state"),e("nonce"),e("validRewardTokenNum"),l("rewardMultiplier"),e("rewardPeriodMax"),e("rewardPeriodMin"),e("rewardPeriodExtend"),s("lpMint"),s("lpVault"),d(Le,5,"rewardInfos"),s("creator"),s(),d(e(),32,"padding")]),pe=new Proxy(be,{get(t,o,r){return o==="decode"?(...a)=>{let n=t.decode(...a);return b(P({},n),{version:3,rewardInfos:[{rewardVault:n.rewardVault,totalReward:n.totalReward,perSlotReward:n.perSlotReward,perShareReward:n.perShareReward}]})}:Reflect.get(t,o,r)}}),me=new Proxy(ge,{get(t,o,r){return o==="decode"?(...a)=>{let n=t.decode(...a);return b(P({},n),{version:5,rewardInfos:[{rewardVault:n.rewardVaultA,totalReward:n.totalRewardA,perSlotReward:n.perSlotRewardA,perShareReward:n.perShareRewardA},{rewardVault:n.rewardVaultB,totalReward:n.totalRewardB,perSlotReward:n.perSlotRewardB,perShareReward:n.perShareRewardB}]})}:Reflect.get(t,o,r)}}),le=new Proxy(we,{get(t,o,r){return o==="decode"?(...a)=>{let n=t.decode(...a);return b(P({},n),{version:6,rewardInfos:n.rewardInfos.map(y=>{var m;return b(P({},y),{rewardType:((m=Object.entries(O).find(p=>String(p[1])===y.rewardType.toString()))!=null?m:["Standard SPL"])[0]})})})}:Reflect.get(t,o,r)}}),Se=i([e("isSet"),e("rewardPerSecond"),e("rewardOpenTime"),e("rewardEndTime"),e("rewardType")]),B=i([f("instruction"),e("nonce"),d(Se,5,"rewardTimeInfo")]),Pr=i([f("instruction"),e("rewardReopenTime"),e("rewardEndTime"),e("rewardPerSecond")]),xr=i([f("instruction"),e("isSet"),e("rewardPerSecond"),e("rewardOpenTime"),e("rewardEndTime")]),Lr=i([e("state"),s("id"),s("owner"),e("deposited"),d(e(),1,"rewardDebts")]),fe=i([e("state"),s("id"),s("owner"),e("deposited"),d(l(),1,"rewardDebts"),d(e(),17)]),br=i([e("state"),s("id"),s("owner"),e("deposited"),d(e(),2,"rewardDebts")]),Pe=i([e("state"),s("id"),s("owner"),e("deposited"),d(l(),2,"rewardDebts"),d(e(),17)]),xe=i([e(),e("state"),s("id"),s("owner"),e("deposited"),d(l(),5,"rewardDebts"),d(e(),16)]),gr=i([f("instruction"),e("amount")]);var Ve=S("Raydium_farm_instruction");async function Fr(t){let{version:o,id:r,ledger:a,programId:n,owner:y}=t,m={3:9,5:10}[o];m||Ve.logWithError(`invalid farm pool version: ${o}`);let p=Buffer.alloc(R.span);R.encode({instruction:m},p);let j=[u({pubkey:r}),u({pubkey:a}),u({pubkey:y,isWritable:!1}),u({pubkey:he.programId,isWritable:!1}),u({pubkey:_e,isWritable:!1})];return new Y({programId:n,keys:j,data:p})}function kr(t){var a;let o=Buffer.alloc(B.span);B.encode({instruction:0,nonce:new Te(t.nonce),rewardTimeInfo:t.rewardInfoConfig},o);let r=[...I,u({pubkey:t.farmKeyPair.publicKey}),u({pubkey:t.farmAuthority,isWritable:!1}),u({pubkey:t.lpVault}),u({pubkey:t.lpMint,isWritable:!1}),u({pubkey:t.lockVault}),u({pubkey:t.lockMint,isWritable:!1}),u({pubkey:(a=t.lockUserAccount)!=null?a:U}),u({pubkey:t.owner,isWritable:!1,isSigner:!0})];for(let n of t.rewardInfo)r.push(u({pubkey:n.rewardMint,isWritable:!1}),u({pubkey:n.rewardVault}),u({pubkey:n.userRewardToken}));return new Y({programId:t.programId,keys:r,data:o})}export{Fr as createAssociatedLedgerAccountInstruction,kr as makeCreateFarmInstruction};
//# sourceMappingURL=instruction.mjs.map