import{PublicKey as ae}from"@solana/web3.js";import v,{isBN as vt}from"bn.js";import{bits as je,BitStructure as He,blob as re,Blob as $e,cstr as ze,f32 as Ve,f32be as Ye,f64 as Ge,f64be as Je,greedy as Xe,Layout as oe,ns64 as Ze,ns64be as Qe,nu64 as et,nu64be as tt,offset as nt,s16 as rt,s16be as ot,s24 as it,s24be as st,s32 as at,s32be as ut,s40 as ct,s40be as mt,s48 as pt,s48be as lt,s8 as dt,seq as ft,struct as gt,Structure as ie,u16 as bt,u16be as yt,u24 as ht,u24be as Pt,u32 as xt,u32be as Tt,u40 as wt,u40be as St,u48 as Bt,u48be as Nt,u8 as kt,UInt as se,union as Lt,Union as At,unionLayoutDiscriminator as Dt,utf8 as Wt}from"@solana/buffer-layout";var D=oe,q=ie;var W=se;var R=re;var _=class extends D{constructor(t,r,o){super(t,o);this.blob=R(t),this.signed=r}decode(t,r=0){let o=new v(this.blob.decode(t,r),10,"le");return this.signed?o.fromTwos(this.span*8).clone():o}encode(t,r,o=0){return typeof t=="number"&&(t=new v(t)),this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),r,o)}};function H(n){return new W(1,n)}function w(n){return new W(4,n)}function S(n){return new _(8,!1,n)}var I=class extends D{constructor(t,r,o,l){super(t.span,l);this.layout=t,this.decoder=r,this.encoder=o}decode(t,r){return this.decoder(this.layout.decode(t,r))}encode(t,r,o){return this.layout.encode(this.encoder(t),r,o)}getSpan(t,r){return this.layout.getSpan(t,r)}};function b(n){return new I(R(32),e=>new ae(e),e=>e.toBuffer(),n)}var K=class extends q{decode(e,t){return super.decode(e,t)}};function $(n,e,t){return new K(n,e,t)}var f=$([b("mint"),b("owner"),S("amount"),w("delegateOption"),b("delegate"),H("state"),w("isNativeOption"),S("isNative"),S("delegatedAmount"),w("closeAuthorityOption"),b("closeAuthority")]);import{PublicKey as Ae}from"@solana/web3.js";import De from"bn.js";import{get as z,set as ue}from"lodash";import ce from"pino";import me from"pino-pretty";var V={},pe={},le=me({colorize:!0,levelFirst:!0,translateTime:"SYS:yyyymmdd HH:MM:ss.l"}),de=ce({base:null,level:"silent"},le);function c(n){let e=z(V,n);if(!e){let t=z(pe,n);e=de.child({name:n},{level:t}),ue(V,n,e)}return e.logWithError=(...t)=>{let r=t.map(o=>typeof o=="object"?JSON.stringify(o):o).join(", ");throw new Error(r)},e}import{PublicKey as Dr}from"@solana/web3.js";import Rr from"bn.js";import Se from"big.js";import wn from"bn.js";import m from"bn.js";var B=c("Raydium_bignumber");var ge=new m(0),G=new m(1),rn=new m(2),on=new m(3),sn=new m(5),be=new m(10),J=new m(100),an=new m(1e3),un=new m(1e4),Y=9007199254740991;function p(n){if(n instanceof m)return n;if(typeof n=="string"){if(n.match(/^-?[0-9]+$/))return new m(n);B.logWithError(`invalid BigNumberish string: ${n}`)}return typeof n=="number"?(n%1&&B.logWithError(`BigNumberish number underflow: ${n}`),(n>=Y||n<=-Y)&&B.logWithError(`BigNumberish number overflow: ${n}`),new m(String(n))):typeof n=="bigint"?new m(n.toString()):(B.logWithError(`invalid BigNumberish value: ${n}`),new m(0))}import ye from"toformat";var he=ye,y=he;import k from"big.js";import xe from"decimal.js-light";var N=c("module/fraction"),E=y(k),h=y(xe),Te={[0]:h.ROUND_DOWN,[1]:h.ROUND_HALF_UP,[2]:h.ROUND_UP},we={[0]:k.roundDown,[1]:k.roundHalfUp,[2]:k.roundUp},a=class{constructor(e,t=G){this.numerator=p(e),this.denominator=p(t)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new a(this.denominator,this.numerator)}add(e){let t=e instanceof a?e:new a(p(e));return this.denominator.eq(t.denominator)?new a(this.numerator.add(t.numerator),this.denominator):new a(this.numerator.mul(t.denominator).add(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}sub(e){let t=e instanceof a?e:new a(p(e));return this.denominator.eq(t.denominator)?new a(this.numerator.sub(t.numerator),this.denominator):new a(this.numerator.mul(t.denominator).sub(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}mul(e){let t=e instanceof a?e:new a(p(e));return new a(this.numerator.mul(t.numerator),this.denominator.mul(t.denominator))}div(e){let t=e instanceof a?e:new a(p(e));return new a(this.numerator.mul(t.denominator),this.denominator.mul(t.numerator))}toSignificant(e,t={groupSeparator:""},r=1){Number.isInteger(e)||N.logWithError(`${e} is not an integer.`),e<=0&&N.logWithError(`${e} is not positive.`),h.set({precision:e+1,rounding:Te[r]});let o=new h(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return o.toFormat(o.decimalPlaces(),t)}toFixed(e,t={groupSeparator:""},r=1){return Number.isInteger(e)||N.logWithError(`${e} is not an integer.`),e<0&&N.logWithError(`${e} is negative.`),E.DP=e,E.RM=we[r]||1,new E(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,t)}isZero(){return this.numerator.isZero()}};var Wn=c("Raydium_amount"),Rn=y(Se);import{PublicKey as Be}from"@solana/web3.js";var ee={symbol:"SOL",name:"Solana",decimals:9},d={symbol:"WSOL",name:"Wrapped SOL",mint:"So11111111111111111111111111111111111111112",decimals:9,extensions:{coingeckoId:"solana"}},Kn={isQuantumSOL:!0,isLp:!1,official:!0,mint:new Be(d.mint),decimals:9,symbol:"SOL",id:"sol",name:"solana",icon:"https://img.raydium.io/icon/So11111111111111111111111111111111111111112.png",extensions:{coingeckoId:"solana"}};import{PublicKey as C}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as Ne}from"@solana/spl-token";import{PublicKey as u,SystemProgram as ke,SYSVAR_RENT_PUBKEY as Le}from"@solana/web3.js";function U({pubkey:n,isSigner:e=!1,isWritable:t=!0}){return{pubkey:n,isWritable:t,isSigner:e}}var Fn=[U({pubkey:Ne,isWritable:!1}),U({pubkey:ke.programId,isWritable:!1}),U({pubkey:Le,isWritable:!1})];function ne({publicKey:n,transformSol:e}){if(n instanceof u)return e&&n.equals(P)?te:n;if(e&&n===P.toBase58())return te;if(typeof n=="string")try{return new u(n)}catch{throw new Error("invalid public key")}throw new Error("invalid public key")}var Mn=new u("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),qn=new u("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),vn=new u("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),jn=new u("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),Hn=new u("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),$n=new u("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),zn=new u("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),Vn=new u("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),Yn=new u("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),Gn=new u("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),Jn=new u("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),te=new u("So11111111111111111111111111111111111111112"),P=u.default;var O=class{constructor({mint:e,decimals:t,symbol:r="UNKNOWN",name:o="UNKNOWN",skipMint:l=!1}){if(e===P.toBase58()||e instanceof C&&P.equals(e)){this.decimals=d.decimals,this.symbol=d.symbol,this.name=d.name,this.mint=new C(d.mint);return}this.decimals=t,this.symbol=r,this.name=o,this.mint=l?C.default:ne({publicKey:e})}equals(e){return this===e?!0:this.mint.equals(e.mint)}},g=O;g.WSOL=new O(d);var M=class{constructor({decimals:e,symbol:t="UNKNOWN",name:r="UNKNOWN"}){this.decimals=e,this.symbol=t,this.name=r}equals(e){return this===e}},F=M;F.SOL=new M(ee);var cr=new a(J);var yr=c("Raydium_price");import{PACKET_DATA_SIZE as Cr,PublicKey as Or,sendAndConfirmTransaction as Mr,Transaction as jr}from"@solana/web3.js";var zr=c("Raydium_txTool");import{PublicKey as to}from"@solana/web3.js";var oo=c("Raydium_accountInfo_util");var We=c("Raydium_Util");function Wo({solAccountResp:n,tokenAccountResp:e}){let t=[],r=[];for(let{pubkey:o,account:l}of e.value){if(l.data.length!==f.span)throw We.error("invalid token account layout length","publicKey",o.toBase58()),new Error("invalid token account layout length");let x=f.decode(l.data),{mint:L,amount:A}=x;t.push({publicKey:o,mint:L,amount:A,isNative:!1}),r.push({pubkey:o,accountInfo:x})}return n&&t.push({mint:Ae.default,amount:new De(n.lamports),isNative:!0}),{tokenAccounts:t,tokenAccountRawInfos:r}}import{createInitializeAccountInstruction as Re,createCloseAccountInstruction as _e,createTransferInstruction as Ie,TOKEN_PROGRAM_ID as Ke}from"@solana/spl-token";import{Keypair as Ee,PublicKey as Ue,SystemProgram as Ce}from"@solana/web3.js";import Oe from"bn.js";function Fe(n){let{mint:e,tokenAccount:t,owner:r}=n;return Re(t,e,r)}function Me(n){let{tokenAccount:e,payer:t,multiSigners:r=[],owner:o}=n;return _e(e,t,o,r)}async function jo(n){let{connection:e,amount:t,commitment:r,payer:o,owner:l,skipCloseAccount:x}=n,L=await e.getMinimumBalanceForRentExemption(f.span,r),A=p(t).add(new Oe(L)),T=Ee.generate();return{signers:[T],instructions:[Ce.createAccount({fromPubkey:o,newAccountPubkey:T.publicKey,lamports:A.toNumber(),space:f.span,programId:Ke}),Fe({mint:new Ue(d.mint),tokenAccount:T.publicKey,owner:l})],endInstructions:x?[]:[Me({tokenAccount:T.publicKey,payer:o,owner:l})]}}function Ho({source:n,destination:e,owner:t,amount:r,multiSigners:o=[]}){return Ie(n,e,t,p(r).toNumber(),o)}export{Me as closeAccountInstruction,jo as createWSolAccountInstructions,Fe as initTokenAccountInstruction,Ho as makeTransferInstruction,Wo as parseTokenAccountResp,f as splAccountLayout};
//# sourceMappingURL=index.mjs.map