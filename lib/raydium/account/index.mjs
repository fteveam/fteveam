import{PublicKey as ce}from"@solana/web3.js";import j,{isBN as vt}from"bn.js";import{bits as qe,BitStructure as je,blob as ie,Blob as He,cstr as Ye,f32 as $e,f32be as Ve,f64 as ze,f64be as Ge,greedy as Je,Layout as se,ns64 as Xe,ns64be as Ze,nu64 as Qe,nu64be as et,offset as tt,s16 as nt,s16be as rt,s24 as ot,s24be as it,s32 as st,s32be as at,s40 as ut,s40be as ct,s48 as mt,s48be as pt,s8 as lt,seq as dt,struct as ft,Structure as ae,u16 as gt,u16be as bt,u24 as yt,u24be as ht,u32 as Pt,u32be as xt,u40 as Tt,u40be as wt,u48 as St,u48be as Bt,u8 as Lt,UInt as ue,union as Nt,Union as kt,unionLayoutDiscriminator as At,utf8 as Dt}from"@solana/buffer-layout";var D=se,q=ae;var W=ue;var R=ie;var _=class extends D{constructor(t,r,o){super(t,o);this.blob=R(t),this.signed=r}decode(t,r=0){let o=new j(this.blob.decode(t,r),10,"le");return this.signed?o.fromTwos(this.span*8).clone():o}encode(t,r,o=0){return typeof t=="number"&&(t=new j(t)),this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),r,o)}};function Y(n){return new W(1,n)}function w(n){return new W(4,n)}function S(n){return new _(8,!1,n)}var K=class extends D{constructor(t,r,o,l){super(t.span,l);this.layout=t,this.decoder=r,this.encoder=o}decode(t,r){return this.decoder(this.layout.decode(t,r))}encode(t,r,o){return this.layout.encode(this.encoder(t),r,o)}getSpan(t,r){return this.layout.getSpan(t,r)}};function b(n){return new K(R(32),e=>new ce(e),e=>e.toBuffer(),n)}var I=class extends q{decode(e,t){return super.decode(e,t)}};function $(n,e,t){return new I(n,e,t)}var f=$([b("mint"),b("owner"),S("amount"),w("delegateOption"),b("delegate"),Y("state"),w("isNativeOption"),S("isNative"),S("delegatedAmount"),w("closeAuthorityOption"),b("closeAuthority")]);import{PublicKey as ke}from"@solana/web3.js";import Ae from"bn.js";import{get as V,set as me}from"lodash";import G from"dayjs";import pe from"dayjs/plugin/utc";G.extend(pe);var E=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:3,this.name=e.name}set level(e){this.logLevel=e}get time(){return G().utc().format("YYYY/MM/DD HH:mm:ss UTC")}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let t=e.map(r=>typeof r=="object"?JSON.stringify(r):r).join(", ");throw new Error(t)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},z={},le={};function c(n){let e=V(z,n);if(!e){let t=V(le,n);e=new E({name:n,logLevel:t}),me(z,n,e)}return e}import{PublicKey as Nr}from"@solana/web3.js";import Ar from"bn.js";import we from"big.js";import Pn from"bn.js";import m from"bn.js";var B=c("Raydium_bignumber");var fe=new m(0),X=new m(1),en=new m(2),tn=new m(3),nn=new m(5),ge=new m(10),Z=new m(100),rn=new m(1e3),on=new m(1e4),J=9007199254740991;function p(n){if(n instanceof m)return n;if(typeof n=="string"){if(n.match(/^-?[0-9]+$/))return new m(n);B.logWithError(`invalid BigNumberish string: ${n}`)}return typeof n=="number"?(n%1&&B.logWithError(`BigNumberish number underflow: ${n}`),(n>=J||n<=-J)&&B.logWithError(`BigNumberish number overflow: ${n}`),new m(String(n))):typeof n=="bigint"?new m(n.toString()):(B.logWithError(`invalid BigNumberish value: ${n}`),new m(0))}import be from"toformat";var ye=be,y=ye;import N from"big.js";import Pe from"decimal.js-light";var L=c("module/fraction"),U=y(N),h=y(Pe),xe={[0]:h.ROUND_DOWN,[1]:h.ROUND_HALF_UP,[2]:h.ROUND_UP},Te={[0]:N.roundDown,[1]:N.roundHalfUp,[2]:N.roundUp},a=class{constructor(e,t=X){this.numerator=p(e),this.denominator=p(t)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new a(this.denominator,this.numerator)}add(e){let t=e instanceof a?e:new a(p(e));return this.denominator.eq(t.denominator)?new a(this.numerator.add(t.numerator),this.denominator):new a(this.numerator.mul(t.denominator).add(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}sub(e){let t=e instanceof a?e:new a(p(e));return this.denominator.eq(t.denominator)?new a(this.numerator.sub(t.numerator),this.denominator):new a(this.numerator.mul(t.denominator).sub(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}mul(e){let t=e instanceof a?e:new a(p(e));return new a(this.numerator.mul(t.numerator),this.denominator.mul(t.denominator))}div(e){let t=e instanceof a?e:new a(p(e));return new a(this.numerator.mul(t.denominator),this.denominator.mul(t.numerator))}toSignificant(e,t={groupSeparator:""},r=1){Number.isInteger(e)||L.logWithError(`${e} is not an integer.`),e<=0&&L.logWithError(`${e} is not positive.`),h.set({precision:e+1,rounding:xe[r]});let o=new h(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return o.toFormat(o.decimalPlaces(),t)}toFixed(e,t={groupSeparator:""},r=1){return Number.isInteger(e)||L.logWithError(`${e} is not an integer.`),e<0&&L.logWithError(`${e} is negative.`),U.DP=e,U.RM=Te[r]||1,new U(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,t)}isZero(){return this.numerator.isZero()}};var kn=c("Raydium_amount"),An=y(we);import{PublicKey as Se}from"@solana/web3.js";var ne={symbol:"SOL",name:"Solana",decimals:9},d={symbol:"WSOL",name:"Wrapped SOL",mint:"So11111111111111111111111111111111111111112",decimals:9,extensions:{coingeckoId:"solana"}},Rn={isQuantumSOL:!0,isLp:!1,official:!0,mint:new Se(d.mint),decimals:9,symbol:"SOL",id:"sol",name:"solana",icon:"https://img.raydium.io/icon/So11111111111111111111111111111111111111112.png",extensions:{coingeckoId:"solana"}};import{PublicKey as O}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as Be}from"@solana/spl-token";import{PublicKey as u,SystemProgram as Le,SYSVAR_RENT_PUBKEY as Ne}from"@solana/web3.js";function C({pubkey:n,isSigner:e=!1,isWritable:t=!0}){return{pubkey:n,isWritable:t,isSigner:e}}var Un=[C({pubkey:Be,isWritable:!1}),C({pubkey:Le.programId,isWritable:!1}),C({pubkey:Ne,isWritable:!1})];function oe({publicKey:n,transformSol:e}){if(n instanceof u)return e&&n.equals(P)?re:n;if(e&&n===P.toBase58())return re;if(typeof n=="string")try{return new u(n)}catch{throw new Error("invalid public key")}throw new Error("invalid public key")}var Cn=new u("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),On=new u("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),Fn=new u("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),Mn=new u("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),vn=new u("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),qn=new u("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),jn=new u("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),Hn=new u("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),Yn=new u("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),$n=new u("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),Vn=new u("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),re=new u("So11111111111111111111111111111111111111112"),P=u.default;var F=class{constructor({mint:e,decimals:t,symbol:r="UNKNOWN",name:o="UNKNOWN",skipMint:l=!1}){if(e===P.toBase58()||e instanceof O&&P.equals(e)){this.decimals=d.decimals,this.symbol=d.symbol,this.name=d.name,this.mint=new O(d.mint);return}this.decimals=t,this.symbol=r,this.name=o,this.mint=l?O.default:oe({publicKey:e})}equals(e){return this===e?!0:this.mint.equals(e.mint)}},g=F;g.WSOL=new F(d);var v=class{constructor({decimals:e,symbol:t="UNKNOWN",name:r="UNKNOWN"}){this.decimals=e,this.symbol=t,this.name=r}equals(e){return this===e}},M=v;M.SOL=new v(ne);var sr=new a(Z);var fr=c("Raydium_price");import{PACKET_DATA_SIZE as Ir,PublicKey as Er,sendAndConfirmTransaction as Cr,Transaction as Mr}from"@solana/web3.js";var jr=c("Raydium_txTool");import{PublicKey as Zr}from"@solana/web3.js";var to=c("Raydium_accountInfo_util");var De=c("Raydium_Util");function ko({solAccountResp:n,tokenAccountResp:e}){let t=[],r=[];for(let{pubkey:o,account:l}of e.value){if(l.data.length!==f.span)throw De.error("invalid token account layout length","publicKey",o.toBase58()),new Error("invalid token account layout length");let x=f.decode(l.data),{mint:k,amount:A}=x;t.push({publicKey:o,mint:k,amount:A,isNative:!1}),r.push({pubkey:o,accountInfo:x})}return n&&t.push({mint:ke.default,amount:new Ae(n.lamports),isNative:!0}),{tokenAccounts:t,tokenAccountRawInfos:r}}import{createInitializeAccountInstruction as We,createCloseAccountInstruction as Re,createTransferInstruction as _e,TOKEN_PROGRAM_ID as Ke}from"@solana/spl-token";import{Keypair as Ie,PublicKey as Ee,SystemProgram as Ue}from"@solana/web3.js";import Ce from"bn.js";function Oe(n){let{mint:e,tokenAccount:t,owner:r}=n;return We(t,e,r)}function Fe(n){let{tokenAccount:e,payer:t,multiSigners:r=[],owner:o}=n;return Re(e,t,o,r)}async function Mo(n){let{connection:e,amount:t,commitment:r,payer:o,owner:l,skipCloseAccount:x}=n,k=await e.getMinimumBalanceForRentExemption(f.span,r),A=p(t).add(new Ce(k)),T=Ie.generate();return{signers:[T],instructions:[Ue.createAccount({fromPubkey:o,newAccountPubkey:T.publicKey,lamports:A.toNumber(),space:f.span,programId:Ke}),Oe({mint:new Ee(d.mint),tokenAccount:T.publicKey,owner:l})],endInstructions:x?[]:[Fe({tokenAccount:T.publicKey,payer:o,owner:l})]}}function vo({source:n,destination:e,owner:t,amount:r,multiSigners:o=[]}){return _e(n,e,t,p(r).toNumber(),o)}export{Fe as closeAccountInstruction,Mo as createWSolAccountInstructions,Oe as initTokenAccountInstruction,vo as makeTransferInstruction,ko as parseTokenAccountResp,f as splAccountLayout};
//# sourceMappingURL=index.mjs.map