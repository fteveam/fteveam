var be=Object.create;var w=Object.defineProperty;var ye=Object.getOwnPropertyDescriptor;var he=Object.getOwnPropertyNames;var xe=Object.getPrototypeOf,Pe=Object.prototype.hasOwnProperty;var Te=(n,e)=>{for(var t in e)w(n,t,{get:e[t],enumerable:!0})},j=(n,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of he(e))!Pe.call(n,i)&&i!==t&&w(n,i,{get:()=>e[i],enumerable:!(o=ye(e,i))||o.enumerable});return n};var p=(n,e,t)=>(t=n!=null?be(xe(n)):{},j(e||!n||!n.__esModule?w(t,"default",{value:n,enumerable:!0}):t,n)),we=n=>j(w({},"__esModule",{value:!0}),n);var Fe={};Te(Fe,{parseTokenAccountResp:()=>Ce});module.exports=we(Fe);var le=require("@solana/web3.js"),de=p(require("bn.js"));var b=require("lodash"),$=p(require("pino")),V=p(require("pino-pretty")),H={},Se={},Be=(0,V.default)({colorize:!0,levelFirst:!0,translateTime:"SYS:yyyymmdd HH:MM:ss.l"}),Ne=(0,$.default)({base:null,level:"silent"},Be);function m(n){let e=(0,b.get)(H,n);if(!e){let t=(0,b.get)(Se,n);e=Ne.child({name:n},{level:t}),(0,b.set)(H,n,e)}return e.logWithError=(...t)=>{let o=t.map(i=>typeof i=="object"?JSON.stringify(i):i).join(", ");throw new Error(o)},e}var Ue=require("@solana/web3.js"),Ie=p(require("bn.js"));var ne=p(require("big.js")),Ee=p(require("bn.js"));var c=p(require("bn.js"));var S=m("Raydium_bignumber");var ke=new c.default(0),J=new c.default(1),Ve=new c.default(2),Ye=new c.default(3),ze=new c.default(5),De=new c.default(10),G=new c.default(100),Je=new c.default(1e3),Ge=new c.default(1e4),Y=9007199254740991;function l(n){if(n instanceof c.default)return n;if(typeof n=="string"){if(n.match(/^-?[0-9]+$/))return new c.default(n);S.logWithError(`invalid BigNumberish string: ${n}`)}return typeof n=="number"?(n%1&&S.logWithError(`BigNumberish number underflow: ${n}`),(n>=Y||n<=-Y)&&S.logWithError(`BigNumberish number overflow: ${n}`),new c.default(String(n))):typeof n=="bigint"?new c.default(n.toString()):(S.logWithError(`invalid BigNumberish value: ${n}`),new c.default(0))}var ee=p(require("toformat")),Ae=ee.default,y=Ae;var h=p(require("big.js")),te=p(require("decimal.js-light"));var B=m("module/fraction"),W=y(h.default),x=y(te.default),_e={[0]:x.ROUND_DOWN,[1]:x.ROUND_HALF_UP,[2]:x.ROUND_UP},Re={[0]:h.default.roundDown,[1]:h.default.roundHalfUp,[2]:h.default.roundUp},s=class{constructor(e,t=J){this.numerator=l(e),this.denominator=l(t)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new s(this.denominator,this.numerator)}add(e){let t=e instanceof s?e:new s(l(e));return this.denominator.eq(t.denominator)?new s(this.numerator.add(t.numerator),this.denominator):new s(this.numerator.mul(t.denominator).add(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}sub(e){let t=e instanceof s?e:new s(l(e));return this.denominator.eq(t.denominator)?new s(this.numerator.sub(t.numerator),this.denominator):new s(this.numerator.mul(t.denominator).sub(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}mul(e){let t=e instanceof s?e:new s(l(e));return new s(this.numerator.mul(t.numerator),this.denominator.mul(t.denominator))}div(e){let t=e instanceof s?e:new s(l(e));return new s(this.numerator.mul(t.denominator),this.denominator.mul(t.numerator))}toSignificant(e,t={groupSeparator:""},o=1){Number.isInteger(e)||B.logWithError(`${e} is not an integer.`),e<=0&&B.logWithError(`${e} is not positive.`),x.set({precision:e+1,rounding:_e[o]});let i=new x(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return i.toFormat(i.decimalPlaces(),t)}toFixed(e,t={groupSeparator:""},o=1){return Number.isInteger(e)||B.logWithError(`${e} is not an integer.`),e<0&&B.logWithError(`${e} is negative.`),W.DP=e,W.RM=Re[o]||1,new W(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,t)}isZero(){return this.numerator.isZero()}};var lt=m("Raydium_amount"),dt=y(ne.default);var re=require("@solana/web3.js"),oe={symbol:"SOL",name:"Solana",decimals:9},d={symbol:"WSOL",name:"Wrapped SOL",mint:"So11111111111111111111111111111111111111112",decimals:9,extensions:{coingeckoId:"solana"}},gt={isQuantumSOL:!0,isLp:!1,official:!0,mint:new re.PublicKey(d.mint),decimals:9,symbol:"SOL",id:"sol",name:"solana",icon:"https://img.raydium.io/icon/So11111111111111111111111111111111111111112.png",extensions:{coingeckoId:"solana"}};var N=require("@solana/web3.js");var se=require("@solana/spl-token"),u=require("@solana/web3.js");function _({pubkey:n,isSigner:e=!1,isWritable:t=!0}){return{pubkey:n,isWritable:t,isSigner:e}}var ht=[_({pubkey:se.TOKEN_PROGRAM_ID,isWritable:!1}),_({pubkey:u.SystemProgram.programId,isWritable:!1}),_({pubkey:u.SYSVAR_RENT_PUBKEY,isWritable:!1})];function ae({publicKey:n,transformSol:e}){if(n instanceof u.PublicKey)return e&&n.equals(P)?ie:n;if(e&&n===P.toBase58())return ie;if(typeof n=="string")try{return new u.PublicKey(n)}catch{throw new Error("invalid public key")}throw new Error("invalid public key")}var xt=new u.PublicKey("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),Pt=new u.PublicKey("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),Tt=new u.PublicKey("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),wt=new u.PublicKey("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),St=new u.PublicKey("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),Bt=new u.PublicKey("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),Nt=new u.PublicKey("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),Lt=new u.PublicKey("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),kt=new u.PublicKey("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),Dt=new u.PublicKey("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),At=new u.PublicKey("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),ie=new u.PublicKey("So11111111111111111111111111111111111111112"),P=u.PublicKey.default;var R=class{constructor({mint:e,decimals:t,symbol:o="UNKNOWN",name:i="UNKNOWN",skipMint:f=!1}){if(e===P.toBase58()||e instanceof N.PublicKey&&P.equals(e)){this.decimals=d.decimals,this.symbol=d.symbol,this.name=d.name,this.mint=new N.PublicKey(d.mint);return}this.decimals=t,this.symbol=o,this.name=i,this.mint=f?N.PublicKey.default:ae({publicKey:e})}equals(e){return this===e?!0:this.mint.equals(e.mint)}},g=R;g.WSOL=new R(d);var U=class{constructor({decimals:e,symbol:t="UNKNOWN",name:o="UNKNOWN"}){this.decimals=e,this.symbol=t,this.name=o}equals(e){return this===e}},E=U;E.SOL=new U(oe);var qt=new s(G);var Jt=m("Raydium_price");var L=require("@solana/web3.js");var bn=m("Raydium_txTool");var Ke=require("@solana/web3.js");var Ln=m("Raydium_accountInfo_util");var ce=require("@solana/web3.js"),k=p(require("bn.js"));var r=require("@solana/buffer-layout"),I=r.Layout,ue=r.Structure;var K=r.UInt;var O=r.blob;var C=class extends I{constructor(t,o,i){super(t,i);this.blob=O(t),this.signed=o}decode(t,o=0){let i=new k.default(this.blob.decode(t,o),10,"le");return this.signed?i.fromTwos(this.span*8).clone():i}encode(t,o,i=0){return typeof t=="number"&&(t=new k.default(t)),this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),o,i)}};function me(n){return new K(1,n)}function D(n){return new K(4,n)}function A(n){return new C(8,!1,n)}var F=class extends I{constructor(t,o,i,f){super(t.span,f);this.layout=t,this.decoder=o,this.encoder=i}decode(t,o){return this.decoder(this.layout.decode(t,o))}encode(t,o,i){return this.layout.encode(this.encoder(t),o,i)}getSpan(t,o){return this.layout.getSpan(t,o)}};function T(n){return new F(O(32),e=>new ce.PublicKey(e),e=>e.toBuffer(),n)}var M=class extends ue{decode(e,t){return super.decode(e,t)}};function pe(n,e,t){return new M(n,e,t)}var q=pe([T("mint"),T("owner"),A("amount"),D("delegateOption"),T("delegate"),me("state"),D("isNativeOption"),A("isNative"),A("delegatedAmount"),D("closeAuthorityOption"),T("closeAuthority")]);var Oe=m("Raydium_Util");function Ce({solAccountResp:n,tokenAccountResp:e}){let t=[],o=[];for(let{pubkey:i,account:f}of e.value){if(f.data.length!==q.span)throw Oe.error("invalid token account layout length","publicKey",i.toBase58()),new Error("invalid token account layout length");let v=q.decode(f.data),{mint:fe,amount:ge}=v;t.push({publicKey:i,mint:fe,amount:ge,isNative:!1}),o.push({pubkey:i,accountInfo:v})}return n&&t.push({mint:le.PublicKey.default,amount:new de.default(n.lamports),isNative:!0}),{tokenAccounts:t,tokenAccountRawInfos:o}}0&&(module.exports={parseTokenAccountResp});
//# sourceMappingURL=util.js.map