import{createInitializeAccountInstruction as De,createCloseAccountInstruction as Ae,createTransferInstruction as We,TOKEN_PROGRAM_ID as _e}from"@solana/spl-token";import{Keypair as Re,PublicKey as Ie,SystemProgram as Ee}from"@solana/web3.js";import Ue from"bn.js";import{get as O,set as re}from"lodash";import oe from"pino";import ie from"pino-pretty";var F={},se={},ae=ie({colorize:!0,levelFirst:!0,translateTime:"SYS:yyyymmdd HH:MM:ss.l"}),ue=oe({base:null,level:"silent"},ae);function m(n){let e=O(F,n);if(!e){let t=O(se,n);e=ue.child({name:n},{level:t}),re(F,n,e)}return e.logWithError=(...t)=>{let r=t.map(o=>typeof o=="object"?JSON.stringify(o):o).join(", ");throw new Error(r)},e}import{PublicKey as xn}from"@solana/web3.js";import wn from"bn.js";import he from"big.js";import lt from"bn.js";import c from"bn.js";var x=m("Raydium_bignumber");var me=new c(0),v=new c(1),Ye=new c(2),Ge=new c(3),Je=new c(5),pe=new c(10),j=new c(100),Xe=new c(1e3),Ze=new c(1e4),M=9007199254740991;function p(n){if(n instanceof c)return n;if(typeof n=="string"){if(n.match(/^-?[0-9]+$/))return new c(n);x.logWithError(`invalid BigNumberish string: ${n}`)}return typeof n=="number"?(n%1&&x.logWithError(`BigNumberish number underflow: ${n}`),(n>=M||n<=-M)&&x.logWithError(`BigNumberish number overflow: ${n}`),new c(String(n))):typeof n=="bigint"?new c(n.toString()):(x.logWithError(`invalid BigNumberish value: ${n}`),new c(0))}import le from"toformat";var de=le,g=de;import w from"big.js";import ge from"decimal.js-light";var T=m("module/fraction"),N=g(w),b=g(ge),be={[0]:b.ROUND_DOWN,[1]:b.ROUND_HALF_UP,[2]:b.ROUND_UP},ye={[0]:w.roundDown,[1]:w.roundHalfUp,[2]:w.roundUp},i=class{constructor(e,t=v){this.numerator=p(e),this.denominator=p(t)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new i(this.denominator,this.numerator)}add(e){let t=e instanceof i?e:new i(p(e));return this.denominator.eq(t.denominator)?new i(this.numerator.add(t.numerator),this.denominator):new i(this.numerator.mul(t.denominator).add(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}sub(e){let t=e instanceof i?e:new i(p(e));return this.denominator.eq(t.denominator)?new i(this.numerator.sub(t.numerator),this.denominator):new i(this.numerator.mul(t.denominator).sub(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}mul(e){let t=e instanceof i?e:new i(p(e));return new i(this.numerator.mul(t.numerator),this.denominator.mul(t.denominator))}div(e){let t=e instanceof i?e:new i(p(e));return new i(this.numerator.mul(t.denominator),this.denominator.mul(t.numerator))}toSignificant(e,t={groupSeparator:""},r=1){Number.isInteger(e)||T.logWithError(`${e} is not an integer.`),e<=0&&T.logWithError(`${e} is not positive.`),b.set({precision:e+1,rounding:be[r]});let o=new b(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return o.toFormat(o.decimalPlaces(),t)}toFixed(e,t={groupSeparator:""},r=1){return Number.isInteger(e)||T.logWithError(`${e} is not an integer.`),e<0&&T.logWithError(`${e} is negative.`),N.DP=e,N.RM=ye[r]||1,new N(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,t)}isZero(){return this.numerator.isZero()}};var xt=m("Raydium_amount"),Tt=g(he);import{PublicKey as Pe}from"@solana/web3.js";var V={symbol:"SOL",name:"Solana",decimals:9},l={symbol:"WSOL",name:"Wrapped SOL",mint:"So11111111111111111111111111111111111111112",decimals:9,extensions:{coingeckoId:"solana"}},Bt={isQuantumSOL:!0,isLp:!1,official:!0,mint:new Pe(l.mint),decimals:9,symbol:"SOL",id:"sol",name:"solana",icon:"https://img.raydium.io/icon/So11111111111111111111111111111111111111112.png",extensions:{coingeckoId:"solana"}};import{PublicKey as k}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as xe}from"@solana/spl-token";import{PublicKey as u,SystemProgram as Te,SYSVAR_RENT_PUBKEY as we}from"@solana/web3.js";function L({pubkey:n,isSigner:e=!1,isWritable:t=!0}){return{pubkey:n,isWritable:t,isSigner:e}}var At=[L({pubkey:xe,isWritable:!1}),L({pubkey:Te.programId,isWritable:!1}),L({pubkey:we,isWritable:!1})];function G({publicKey:n,transformSol:e}){if(n instanceof u)return e&&n.equals(y)?Y:n;if(e&&n===y.toBase58())return Y;if(typeof n=="string")try{return new u(n)}catch{throw new Error("invalid public key")}throw new Error("invalid public key")}var Wt=new u("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),_t=new u("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),Rt=new u("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),It=new u("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),Et=new u("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),Ut=new u("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),Kt=new u("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),Ct=new u("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),Ot=new u("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),Ft=new u("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),Mt=new u("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),Y=new u("So11111111111111111111111111111111111111112"),y=u.default;var D=class{constructor({mint:e,decimals:t,symbol:r="UNKNOWN",name:o="UNKNOWN",skipMint:d=!1}){if(e===y.toBase58()||e instanceof k&&y.equals(e)){this.decimals=l.decimals,this.symbol=l.symbol,this.name=l.name,this.mint=new k(l.mint);return}this.decimals=t,this.symbol=r,this.name=o,this.mint=d?k.default:G({publicKey:e})}equals(e){return this===e?!0:this.mint.equals(e.mint)}},f=D;f.WSOL=new D(l);var W=class{constructor({decimals:e,symbol:t="UNKNOWN",name:r="UNKNOWN"}){this.decimals=e,this.symbol=t,this.name=r}equals(e){return this===e}},A=W;A.SOL=new W(V);var Qt=new i(j);var un=m("Raydium_price");import{PACKET_DATA_SIZE as Dn,PublicKey as An,sendAndConfirmTransaction as _n,Transaction as En}from"@solana/web3.js";var Cn=m("Raydium_txTool");import{PublicKey as zn}from"@solana/web3.js";var Gn=m("Raydium_accountInfo_util");import{PublicKey as ke}from"@solana/web3.js";import X,{isBN as go}from"bn.js";import{bits as gr,BitStructure as br,blob as Se,Blob as yr,cstr as hr,f32 as Pr,f32be as xr,f64 as Tr,f64be as wr,greedy as Sr,Layout as Be,ns64 as Br,ns64be as Nr,nu64 as Lr,nu64be as kr,offset as Dr,s16 as Ar,s16be as Wr,s24 as _r,s24be as Rr,s32 as Ir,s32be as Er,s40 as Ur,s40be as Kr,s48 as Cr,s48be as Or,s8 as Fr,seq as Mr,struct as qr,Structure as Ne,u16 as vr,u16be as jr,u24 as Hr,u24be as $r,u32 as zr,u32be as Vr,u40 as Yr,u40be as Gr,u48 as Jr,u48be as Xr,u8 as Zr,UInt as Le,union as Qr,Union as eo,unionLayoutDiscriminator as to,utf8 as no}from"@solana/buffer-layout";var _=Be,J=Ne;var R=Le;var I=Se;var E=class extends _{constructor(t,r,o){super(t,o);this.blob=I(t),this.signed=r}decode(t,r=0){let o=new X(this.blob.decode(t,r),10,"le");return this.signed?o.fromTwos(this.span*8).clone():o}encode(t,r,o=0){return typeof t=="number"&&(t=new X(t)),this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),r,o)}};function Z(n){return new R(1,n)}function S(n){return new R(4,n)}function B(n){return new E(8,!1,n)}var U=class extends _{constructor(t,r,o,d){super(t.span,d);this.layout=t,this.decoder=r,this.encoder=o}decode(t,r){return this.decoder(this.layout.decode(t,r))}encode(t,r,o){return this.layout.encode(this.encoder(t),r,o)}getSpan(t,r){return this.layout.getSpan(t,r)}};function h(n){return new U(I(32),e=>new ke(e),e=>e.toBuffer(),n)}var K=class extends J{decode(e,t){return super.decode(e,t)}};function Q(n,e,t){return new K(n,e,t)}var C=Q([h("mint"),h("owner"),B("amount"),S("delegateOption"),h("delegate"),Z("state"),S("isNativeOption"),B("isNative"),B("delegatedAmount"),S("closeAuthorityOption"),h("closeAuthority")]);function Ke(n){let{mint:e,tokenAccount:t,owner:r}=n;return De(t,e,r)}function Ce(n){let{tokenAccount:e,payer:t,multiSigners:r=[],owner:o}=n;return Ae(e,t,o,r)}async function Ro(n){let{connection:e,amount:t,commitment:r,payer:o,owner:d,skipCloseAccount:ee}=n,te=await e.getMinimumBalanceForRentExemption(C.span,r),ne=p(t).add(new Ue(te)),P=Re.generate();return{signers:[P],instructions:[Ee.createAccount({fromPubkey:o,newAccountPubkey:P.publicKey,lamports:ne.toNumber(),space:C.span,programId:_e}),Ke({mint:new Ie(l.mint),tokenAccount:P.publicKey,owner:d})],endInstructions:ee?[]:[Ce({tokenAccount:P.publicKey,payer:o,owner:d})]}}function Io({source:n,destination:e,owner:t,amount:r,multiSigners:o=[]}){return We(n,e,t,p(r).toNumber(),o)}export{Ce as closeAccountInstruction,Ro as createWSolAccountInstructions,Ke as initTokenAccountInstruction,Io as makeTransferInstruction};
//# sourceMappingURL=instruction.mjs.map