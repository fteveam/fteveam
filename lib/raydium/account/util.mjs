import{PublicKey as Ne}from"@solana/web3.js";import ke from"bn.js";import{get as F,set as oe}from"lodash";import q from"dayjs";import ie from"dayjs/plugin/utc";q.extend(ie);var S=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:0,this.name=e.name}set level(e){this.logLevel=e}get time(){return q().utc().format("YYYY/MM/DD HH:mm:ss UTC")}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let t=e.map(r=>typeof r=="object"?JSON.stringify(r):r).join(", ");throw new Error(t)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},M={},se={};function c(n){let e=F(M,n);if(!e){let t=F(se,n);e=new S({name:n,logLevel:t}),oe(M,n,e)}return e}import{PublicKey as cn}from"@solana/web3.js";import pn from"bn.js";import be from"big.js";import tt from"bn.js";import m from"bn.js";var x=c("Raydium_bignumber");var ue=new m(0),H=new m(1),Oe=new m(2),Ce=new m(3),Fe=new m(5),ce=new m(10),Y=new m(100),Me=new m(1e3),qe=new m(1e4),v=9007199254740991;function p(n){if(n instanceof m)return n;if(typeof n=="string"){if(n.match(/^-?[0-9]+$/))return new m(n);x.logWithError(`invalid BigNumberish string: ${n}`)}return typeof n=="number"?(n%1&&x.logWithError(`BigNumberish number underflow: ${n}`),(n>=v||n<=-v)&&x.logWithError(`BigNumberish number overflow: ${n}`),new m(String(n))):typeof n=="bigint"?new m(n.toString()):(x.logWithError(`invalid BigNumberish value: ${n}`),new m(0))}import me from"toformat";var pe=me,g=pe;import T from"big.js";import de from"decimal.js-light";var P=c("module/fraction"),B=g(T),b=g(de),fe={[0]:b.ROUND_DOWN,[1]:b.ROUND_HALF_UP,[2]:b.ROUND_UP},ge={[0]:T.roundDown,[1]:T.roundHalfUp,[2]:T.roundUp},o=class{constructor(e,t=H){this.numerator=p(e),this.denominator=p(t)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new o(this.denominator,this.numerator)}add(e){let t=e instanceof o?e:new o(p(e));return this.denominator.eq(t.denominator)?new o(this.numerator.add(t.numerator),this.denominator):new o(this.numerator.mul(t.denominator).add(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}sub(e){let t=e instanceof o?e:new o(p(e));return this.denominator.eq(t.denominator)?new o(this.numerator.sub(t.numerator),this.denominator):new o(this.numerator.mul(t.denominator).sub(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}mul(e){let t=e instanceof o?e:new o(p(e));return new o(this.numerator.mul(t.numerator),this.denominator.mul(t.denominator))}div(e){let t=e instanceof o?e:new o(p(e));return new o(this.numerator.mul(t.denominator),this.denominator.mul(t.numerator))}toSignificant(e,t={groupSeparator:""},r=1){Number.isInteger(e)||P.logWithError(`${e} is not an integer.`),e<=0&&P.logWithError(`${e} is not positive.`),b.set({precision:e+1,rounding:fe[r]});let a=new b(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return a.toFormat(a.decimalPlaces(),t)}toFixed(e,t={groupSeparator:""},r=1){return Number.isInteger(e)||P.logWithError(`${e} is not an integer.`),e<0&&P.logWithError(`${e} is negative.`),B.DP=e,B.RM=ge[r]||1,new B(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,t)}isZero(){return this.numerator.isZero()}};var ct=c("Raydium_amount"),mt=g(be);import{PublicKey as ye}from"@solana/web3.js";var J={symbol:"SOL",name:"Solana",decimals:9},l={symbol:"WSOL",name:"Wrapped SOL",mint:"So11111111111111111111111111111111111111112",decimals:9,extensions:{coingeckoId:"solana"}},dt={isQuantumSOL:!0,isLp:!1,official:!0,mint:new ye(l.mint),decimals:9,symbol:"SOL",id:"sol",name:"solana",icon:"https://img.raydium.io/icon/So11111111111111111111111111111111111111112.png",extensions:{coingeckoId:"solana"}};import{PublicKey as k}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as he}from"@solana/spl-token";import{PublicKey as u,SystemProgram as xe,SYSVAR_RENT_PUBKEY as Pe}from"@solana/web3.js";function N({pubkey:n,isSigner:e=!1,isWritable:t=!0}){return{pubkey:n,isWritable:t,isSigner:e}}var ht=[N({pubkey:he,isWritable:!1}),N({pubkey:xe.programId,isWritable:!1}),N({pubkey:Pe,isWritable:!1})];function X({publicKey:n,transformSol:e}){if(n instanceof u)return e&&n.equals(y)?G:n;if(e&&n===y.toBase58())return G;if(typeof n=="string")try{return new u(n)}catch{throw new Error("invalid public key")}throw new Error("invalid public key")}var xt=new u("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),Pt=new u("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),Tt=new u("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),wt=new u("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),Lt=new u("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),St=new u("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),Bt=new u("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),Nt=new u("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),kt=new u("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),Dt=new u("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),At=new u("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),G=new u("So11111111111111111111111111111111111111112"),y=u.default;var D=class{constructor({mint:e,decimals:t,symbol:r="UNKNOWN",name:a="UNKNOWN",skipMint:d=!1}){if(e===y.toBase58()||e instanceof k&&y.equals(e)){this.decimals=l.decimals,this.symbol=l.symbol,this.name=l.name,this.mint=new k(l.mint);return}this.decimals=t,this.symbol=r,this.name=a,this.mint=d?k.default:X({publicKey:e})}equals(e){return this===e?!0:this.mint.equals(e.mint)}},f=D;f.WSOL=new D(l);var W=class{constructor({decimals:e,symbol:t="UNKNOWN",name:r="UNKNOWN"}){this.decimals=e,this.symbol=t,this.name=r}equals(e){return this===e}},A=W;A.SOL=new W(J);var vt=new o(Y);var Gt=c("Raydium_price");import{PACKET_DATA_SIZE as yn,PublicKey as hn,sendAndConfirmTransaction as Pn,Transaction as Ln}from"@solana/web3.js";var Nn=c("Raydium_txTool");import{PublicKey as In}from"@solana/web3.js";var Cn=c("Raydium_accountInfo_util");import{PublicKey as Be}from"@solana/web3.js";import Q,{isBN as ro}from"bn.js";import{bits as or,BitStructure as ir,blob as Te,Blob as sr,cstr as ar,f32 as ur,f32be as cr,f64 as mr,f64be as pr,greedy as lr,Layout as we,ns64 as dr,ns64be as fr,nu64 as gr,nu64be as br,offset as yr,s16 as hr,s16be as xr,s24 as Pr,s24be as Tr,s32 as wr,s32be as Lr,s40 as Sr,s40be as Br,s48 as Nr,s48be as kr,s8 as Dr,seq as Ar,struct as Wr,Structure as Le,u16 as _r,u16be as Rr,u24 as Er,u24be as Ur,u32 as Ir,u32be as Kr,u40 as Or,u40be as Cr,u48 as Fr,u48be as Mr,u8 as qr,UInt as Se,union as vr,Union as jr,unionLayoutDiscriminator as Hr,utf8 as Yr}from"@solana/buffer-layout";var _=we,Z=Le;var R=Se;var E=Te;var U=class extends _{constructor(t,r,a){super(t,a);this.blob=E(t),this.signed=r}decode(t,r=0){let a=new Q(this.blob.decode(t,r),10,"le");return this.signed?a.fromTwos(this.span*8).clone():a}encode(t,r,a=0){return typeof t=="number"&&(t=new Q(t)),this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),r,a)}};function ee(n){return new R(1,n)}function w(n){return new R(4,n)}function L(n){return new U(8,!1,n)}var I=class extends _{constructor(t,r,a,d){super(t.span,d);this.layout=t,this.decoder=r,this.encoder=a}decode(t,r){return this.decoder(this.layout.decode(t,r))}encode(t,r,a){return this.layout.encode(this.encoder(t),r,a)}getSpan(t,r){return this.layout.getSpan(t,r)}};function h(n){return new I(E(32),e=>new Be(e),e=>e.toBuffer(),n)}var K=class extends Z{decode(e,t){return super.decode(e,t)}};function te(n,e,t){return new K(n,e,t)}var O=te([h("mint"),h("owner"),L("amount"),w("delegateOption"),h("delegate"),ee("state"),w("isNativeOption"),L("isNative"),L("delegatedAmount"),w("closeAuthorityOption"),h("closeAuthority")]);var De=c("Raydium_Util");function bo({solAccountResp:n,tokenAccountResp:e}){let t=[],r=[];for(let{pubkey:a,account:d}of e.value){if(d.data.length!==O.span)throw De.error("invalid token account layout length","publicKey",a.toBase58()),new Error("invalid token account layout length");let C=O.decode(d.data),{mint:ne,amount:re}=C;t.push({publicKey:a,mint:ne,amount:re,isNative:!1}),r.push({pubkey:a,accountInfo:C})}return n&&t.push({mint:Ne.default,amount:new ke(n.lamports),isNative:!0}),{tokenAccounts:t,tokenAccountRawInfos:r}}export{bo as parseTokenAccountResp};
//# sourceMappingURL=util.mjs.map