import{PublicKey as ke}from"@solana/web3.js";import De from"bn.js";import{get as C,set as ne}from"lodash";import re from"pino";import oe from"pino-pretty";var F={},ie={},se=oe({colorize:!0,levelFirst:!0,translateTime:"SYS:yyyymmdd HH:MM:ss.l"}),ae=re({base:null,level:"silent"},se);function c(n){let e=C(F,n);if(!e){let t=C(ie,n);e=ae.child({name:n},{level:t}),ne(F,n,e)}return e.logWithError=(...t)=>{let r=t.map(i=>typeof i=="object"?JSON.stringify(i):i).join(", ");throw new Error(r)},e}import{PublicKey as ln}from"@solana/web3.js";import fn from"bn.js";import ye from"big.js";import ot from"bn.js";import m from"bn.js";var x=c("Raydium_bignumber");var ce=new m(0),v=new m(1),Me=new m(2),qe=new m(3),ve=new m(5),me=new m(10),j=new m(100),je=new m(1e3),He=new m(1e4),M=9007199254740991;function p(n){if(n instanceof m)return n;if(typeof n=="string"){if(n.match(/^-?[0-9]+$/))return new m(n);x.logWithError(`invalid BigNumberish string: ${n}`)}return typeof n=="number"?(n%1&&x.logWithError(`BigNumberish number underflow: ${n}`),(n>=M||n<=-M)&&x.logWithError(`BigNumberish number overflow: ${n}`),new m(String(n))):typeof n=="bigint"?new m(n.toString()):(x.logWithError(`invalid BigNumberish value: ${n}`),new m(0))}import pe from"toformat";var le=pe,g=le;import T from"big.js";import fe from"decimal.js-light";var P=c("module/fraction"),B=g(T),b=g(fe),ge={[0]:b.ROUND_DOWN,[1]:b.ROUND_HALF_UP,[2]:b.ROUND_UP},be={[0]:T.roundDown,[1]:T.roundHalfUp,[2]:T.roundUp},o=class{constructor(e,t=v){this.numerator=p(e),this.denominator=p(t)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new o(this.denominator,this.numerator)}add(e){let t=e instanceof o?e:new o(p(e));return this.denominator.eq(t.denominator)?new o(this.numerator.add(t.numerator),this.denominator):new o(this.numerator.mul(t.denominator).add(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}sub(e){let t=e instanceof o?e:new o(p(e));return this.denominator.eq(t.denominator)?new o(this.numerator.sub(t.numerator),this.denominator):new o(this.numerator.mul(t.denominator).sub(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}mul(e){let t=e instanceof o?e:new o(p(e));return new o(this.numerator.mul(t.numerator),this.denominator.mul(t.denominator))}div(e){let t=e instanceof o?e:new o(p(e));return new o(this.numerator.mul(t.denominator),this.denominator.mul(t.numerator))}toSignificant(e,t={groupSeparator:""},r=1){Number.isInteger(e)||P.logWithError(`${e} is not an integer.`),e<=0&&P.logWithError(`${e} is not positive.`),b.set({precision:e+1,rounding:ge[r]});let i=new b(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return i.toFormat(i.decimalPlaces(),t)}toFixed(e,t={groupSeparator:""},r=1){return Number.isInteger(e)||P.logWithError(`${e} is not an integer.`),e<0&&P.logWithError(`${e} is negative.`),B.DP=e,B.RM=be[r]||1,new B(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,t)}isZero(){return this.numerator.isZero()}};var lt=c("Raydium_amount"),dt=g(ye);import{PublicKey as he}from"@solana/web3.js";var Y={symbol:"SOL",name:"Solana",decimals:9},l={symbol:"WSOL",name:"Wrapped SOL",mint:"So11111111111111111111111111111111111111112",decimals:9,extensions:{coingeckoId:"solana"}},bt={isQuantumSOL:!0,isLp:!1,official:!0,mint:new he(l.mint),decimals:9,symbol:"SOL",id:"sol",name:"solana",icon:"https://img.raydium.io/icon/So11111111111111111111111111111111111111112.png",extensions:{coingeckoId:"solana"}};import{PublicKey as L}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as xe}from"@solana/spl-token";import{PublicKey as u,SystemProgram as Pe,SYSVAR_RENT_PUBKEY as Te}from"@solana/web3.js";function N({pubkey:n,isSigner:e=!1,isWritable:t=!0}){return{pubkey:n,isWritable:t,isSigner:e}}var Tt=[N({pubkey:xe,isWritable:!1}),N({pubkey:Pe.programId,isWritable:!1}),N({pubkey:Te,isWritable:!1})];function J({publicKey:n,transformSol:e}){if(n instanceof u)return e&&n.equals(y)?z:n;if(e&&n===y.toBase58())return z;if(typeof n=="string")try{return new u(n)}catch{throw new Error("invalid public key")}throw new Error("invalid public key")}var wt=new u("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),St=new u("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),Bt=new u("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),Nt=new u("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),Lt=new u("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),kt=new u("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),Dt=new u("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),At=new u("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),Wt=new u("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),_t=new u("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),Rt=new u("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),z=new u("So11111111111111111111111111111111111111112"),y=u.default;var k=class{constructor({mint:e,decimals:t,symbol:r="UNKNOWN",name:i="UNKNOWN",skipMint:d=!1}){if(e===y.toBase58()||e instanceof L&&y.equals(e)){this.decimals=l.decimals,this.symbol=l.symbol,this.name=l.name,this.mint=new L(l.mint);return}this.decimals=t,this.symbol=r,this.name=i,this.mint=d?L.default:J({publicKey:e})}equals(e){return this===e?!0:this.mint.equals(e.mint)}},f=k;f.WSOL=new k(l);var A=class{constructor({decimals:e,symbol:t="UNKNOWN",name:r="UNKNOWN"}){this.decimals=e,this.symbol=t,this.name=r}equals(e){return this===e}},D=A;D.SOL=new A(Y);var $t=new o(j);var Qt=c("Raydium_price");import{PACKET_DATA_SIZE as Pn,PublicKey as Tn,sendAndConfirmTransaction as Sn,Transaction as Ln}from"@solana/web3.js";var An=c("Raydium_txTool");import{PublicKey as Cn}from"@solana/web3.js";var qn=c("Raydium_accountInfo_util");import{PublicKey as Le}from"@solana/web3.js";import X,{isBN as so}from"bn.js";import{bits as ar,BitStructure as ur,blob as we,Blob as cr,cstr as mr,f32 as pr,f32be as lr,f64 as dr,f64be as fr,greedy as gr,Layout as Se,ns64 as br,ns64be as yr,nu64 as hr,nu64be as xr,offset as Pr,s16 as Tr,s16be as wr,s24 as Sr,s24be as Br,s32 as Nr,s32be as Lr,s40 as kr,s40be as Dr,s48 as Ar,s48be as Wr,s8 as _r,seq as Rr,struct as Er,Structure as Be,u16 as Ur,u16be as Ir,u24 as Kr,u24be as Or,u32 as Cr,u32be as Fr,u40 as Mr,u40be as qr,u48 as vr,u48be as jr,u8 as Hr,UInt as Ne,union as $r,Union as Vr,unionLayoutDiscriminator as Yr,utf8 as zr}from"@solana/buffer-layout";var W=Se,G=Be;var _=Ne;var R=we;var E=class extends W{constructor(t,r,i){super(t,i);this.blob=R(t),this.signed=r}decode(t,r=0){let i=new X(this.blob.decode(t,r),10,"le");return this.signed?i.fromTwos(this.span*8).clone():i}encode(t,r,i=0){return typeof t=="number"&&(t=new X(t)),this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),r,i)}};function Z(n){return new _(1,n)}function w(n){return new _(4,n)}function S(n){return new E(8,!1,n)}var U=class extends W{constructor(t,r,i,d){super(t.span,d);this.layout=t,this.decoder=r,this.encoder=i}decode(t,r){return this.decoder(this.layout.decode(t,r))}encode(t,r,i){return this.layout.encode(this.encoder(t),r,i)}getSpan(t,r){return this.layout.getSpan(t,r)}};function h(n){return new U(R(32),e=>new Le(e),e=>e.toBuffer(),n)}var I=class extends G{decode(e,t){return super.decode(e,t)}};function Q(n,e,t){return new I(n,e,t)}var K=Q([h("mint"),h("owner"),S("amount"),w("delegateOption"),h("delegate"),Z("state"),w("isNativeOption"),S("isNative"),S("delegatedAmount"),w("closeAuthorityOption"),h("closeAuthority")]);var Ae=c("Raydium_Util");function xo({solAccountResp:n,tokenAccountResp:e}){let t=[],r=[];for(let{pubkey:i,account:d}of e.value){if(d.data.length!==K.span)throw Ae.error("invalid token account layout length","publicKey",i.toBase58()),new Error("invalid token account layout length");let O=K.decode(d.data),{mint:ee,amount:te}=O;t.push({publicKey:i,mint:ee,amount:te,isNative:!1}),r.push({pubkey:i,accountInfo:O})}return n&&t.push({mint:ke.default,amount:new De(n.lamports),isNative:!0}),{tokenAccounts:t,tokenAccountRawInfos:r}}export{xo as parseTokenAccountResp};
//# sourceMappingURL=util.mjs.map