var Se=Object.create;var k=Object.defineProperty;var Be=Object.getOwnPropertyDescriptor;var Le=Object.getOwnPropertyNames;var Ne=Object.getPrototypeOf,ke=Object.prototype.hasOwnProperty;var Ae=(n,e)=>{for(var t in e)k(n,t,{get:e[t],enumerable:!0})},J=(n,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Le(e))!ke.call(n,i)&&i!==t&&k(n,i,{get:()=>e[i],enumerable:!(o=Be(e,i))||o.enumerable});return n};var p=(n,e,t)=>(t=n!=null?Se(Ne(n)):{},J(e||!n||!n.__esModule?k(t,"default",{value:n,enumerable:!0}):t,n)),De=n=>J(k({},"__esModule",{value:!0}),n);var $e={};Ae($e,{closeAccountInstruction:()=>we,createWSolAccountInstructions:()=>He,initTokenAccountInstruction:()=>Te,makeTransferInstruction:()=>Ye,parseTokenAccountResp:()=>je,splAccountLayout:()=>b});module.exports=De($e);var Q=require("@solana/web3.js"),A=p(require("bn.js"));var r=require("@solana/buffer-layout"),C=r.Layout,X=r.Structure;var O=r.UInt;var F=r.blob;var M=class extends C{constructor(t,o,i){super(t,i);this.blob=F(t),this.signed=o}decode(t,o=0){let i=new A.default(this.blob.decode(t,o),10,"le");return this.signed?i.fromTwos(this.span*8).clone():i}encode(t,o,i=0){return typeof t=="number"&&(t=new A.default(t)),this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),o,i)}};function ee(n){return new O(1,n)}function D(n){return new O(4,n)}function W(n){return new M(8,!1,n)}var v=class extends C{constructor(t,o,i,d){super(t.span,d);this.layout=t,this.decoder=o,this.encoder=i}decode(t,o){return this.decoder(this.layout.decode(t,o))}encode(t,o,i){return this.layout.encode(this.encoder(t),o,i)}getSpan(t,o){return this.layout.getSpan(t,o)}};function P(n){return new v(F(32),e=>new Q.PublicKey(e),e=>e.toBuffer(),n)}var q=class extends X{decode(e,t){return super.decode(e,t)}};function te(n,e,t){return new q(n,e,t)}var b=te([P("mint"),P("owner"),W("amount"),D("delegateOption"),P("delegate"),ee("state"),D("isNativeOption"),W("isNative"),W("delegatedAmount"),D("closeAuthorityOption"),P("closeAuthority")]);var he=require("@solana/web3.js"),Pe=p(require("bn.js"));var x=require("lodash"),H=p(require("dayjs")),re=p(require("dayjs/plugin/utc"));H.default.extend(re.default);var j=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:0,this.name=e.name}set level(e){this.logLevel=e}get time(){return(0,H.default)().utc().format("YYYY/MM/DD HH:mm:ss UTC")}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let t=e.map(o=>typeof o=="object"?JSON.stringify(o):o).join(", ");throw new Error(t)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},ne={},We={};function m(n){let e=(0,x.get)(ne,n);if(!e){let t=(0,x.get)(We,n);e=new j({name:n,logLevel:t}),(0,x.set)(ne,n,e)}return e}var Fe=require("@solana/web3.js"),Me=p(require("bn.js"));var le=p(require("big.js")),Oe=p(require("bn.js"));var c=p(require("bn.js"));var R=m("Raydium_bignumber");var _e=new c.default(0),ie=new c.default(1),pt=new c.default(2),lt=new c.default(3),dt=new c.default(5),Ke=new c.default(10),se=new c.default(100),ft=new c.default(1e3),gt=new c.default(1e4),oe=9007199254740991;function l(n){if(n instanceof c.default)return n;if(typeof n=="string"){if(n.match(/^-?[0-9]+$/))return new c.default(n);R.logWithError(`invalid BigNumberish string: ${n}`)}return typeof n=="number"?(n%1&&R.logWithError(`BigNumberish number underflow: ${n}`),(n>=oe||n<=-oe)&&R.logWithError(`BigNumberish number overflow: ${n}`),new c.default(String(n))):typeof n=="bigint"?new c.default(n.toString()):(R.logWithError(`invalid BigNumberish value: ${n}`),new c.default(0))}var me=p(require("toformat")),Ie=me.default,T=Ie;var w=p(require("big.js")),pe=p(require("decimal.js-light"));var _=m("module/fraction"),Y=T(w.default),S=T(pe.default),Ue={[0]:S.ROUND_DOWN,[1]:S.ROUND_HALF_UP,[2]:S.ROUND_UP},Ce={[0]:w.default.roundDown,[1]:w.default.roundHalfUp,[2]:w.default.roundUp},a=class{constructor(e,t=ie){this.numerator=l(e),this.denominator=l(t)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new a(this.denominator,this.numerator)}add(e){let t=e instanceof a?e:new a(l(e));return this.denominator.eq(t.denominator)?new a(this.numerator.add(t.numerator),this.denominator):new a(this.numerator.mul(t.denominator).add(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}sub(e){let t=e instanceof a?e:new a(l(e));return this.denominator.eq(t.denominator)?new a(this.numerator.sub(t.numerator),this.denominator):new a(this.numerator.mul(t.denominator).sub(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}mul(e){let t=e instanceof a?e:new a(l(e));return new a(this.numerator.mul(t.numerator),this.denominator.mul(t.denominator))}div(e){let t=e instanceof a?e:new a(l(e));return new a(this.numerator.mul(t.denominator),this.denominator.mul(t.numerator))}toSignificant(e,t={groupSeparator:""},o=1){Number.isInteger(e)||_.logWithError(`${e} is not an integer.`),e<=0&&_.logWithError(`${e} is not positive.`),S.set({precision:e+1,rounding:Ue[o]});let i=new S(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return i.toFormat(i.decimalPlaces(),t)}toFixed(e,t={groupSeparator:""},o=1){return Number.isInteger(e)||_.logWithError(`${e} is not an integer.`),e<0&&_.logWithError(`${e} is negative.`),Y.DP=e,Y.RM=Ce[o]||1,new Y(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,t)}isZero(){return this.numerator.isZero()}};var Rt=m("Raydium_amount"),_t=T(le.default);var de=require("@solana/web3.js"),fe={symbol:"SOL",name:"Solana",decimals:9},f={symbol:"WSOL",name:"Wrapped SOL",mint:"So11111111111111111111111111111111111111112",decimals:9,extensions:{coingeckoId:"solana"}},It={isQuantumSOL:!0,isLp:!1,official:!0,mint:new de.PublicKey(f.mint),decimals:9,symbol:"SOL",id:"sol",name:"solana",icon:"https://img.raydium.io/icon/So11111111111111111111111111111111111111112.png",extensions:{coingeckoId:"solana"}};var K=require("@solana/web3.js");var be=require("@solana/spl-token"),u=require("@solana/web3.js");function $({pubkey:n,isSigner:e=!1,isWritable:t=!0}){return{pubkey:n,isWritable:t,isSigner:e}}var Ct=[$({pubkey:be.TOKEN_PROGRAM_ID,isWritable:!1}),$({pubkey:u.SystemProgram.programId,isWritable:!1}),$({pubkey:u.SYSVAR_RENT_PUBKEY,isWritable:!1})];function ye({publicKey:n,transformSol:e}){if(n instanceof u.PublicKey)return e&&n.equals(B)?ge:n;if(e&&n===B.toBase58())return ge;if(typeof n=="string")try{return new u.PublicKey(n)}catch{throw new Error("invalid public key")}throw new Error("invalid public key")}var Ot=new u.PublicKey("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),Ft=new u.PublicKey("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),Mt=new u.PublicKey("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),vt=new u.PublicKey("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),qt=new u.PublicKey("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),jt=new u.PublicKey("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),Ht=new u.PublicKey("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),Yt=new u.PublicKey("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),$t=new u.PublicKey("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),Vt=new u.PublicKey("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),zt=new u.PublicKey("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),ge=new u.PublicKey("So11111111111111111111111111111111111111112"),B=u.PublicKey.default;var V=class{constructor({mint:e,decimals:t,symbol:o="UNKNOWN",name:i="UNKNOWN",skipMint:d=!1}){if(e===B.toBase58()||e instanceof K.PublicKey&&B.equals(e)){this.decimals=f.decimals,this.symbol=f.symbol,this.name=f.name,this.mint=new K.PublicKey(f.mint);return}this.decimals=t,this.symbol=o,this.name=i,this.mint=d?K.PublicKey.default:ye({publicKey:e})}equals(e){return this===e?!0:this.mint.equals(e.mint)}},y=V;y.WSOL=new V(f);var G=class{constructor({decimals:e,symbol:t="UNKNOWN",name:o="UNKNOWN"}){this.decimals=e,this.symbol=t,this.name=o}equals(e){return this===e}},z=G;z.SOL=new G(fe);var an=new a(se);var gn=m("Raydium_price");var I=require("@solana/web3.js");var En=m("Raydium_txTool");var ve=require("@solana/web3.js");var Yn=m("Raydium_accountInfo_util");var qe=m("Raydium_Util");function je({solAccountResp:n,tokenAccountResp:e}){let t=[],o=[];for(let{pubkey:i,account:d}of e.value){if(d.data.length!==b.span)throw qe.error("invalid token account layout length","publicKey",i.toBase58()),new Error("invalid token account layout length");let L=b.decode(d.data),{mint:E,amount:U}=L;t.push({publicKey:i,mint:E,amount:U,isNative:!1}),o.push({pubkey:i,accountInfo:L})}return n&&t.push({mint:he.PublicKey.default,amount:new Pe.default(n.lamports),isNative:!0}),{tokenAccounts:t,tokenAccountRawInfos:o}}var g=require("@solana/spl-token"),h=require("@solana/web3.js"),xe=p(require("bn.js"));function Te(n){let{mint:e,tokenAccount:t,owner:o}=n;return(0,g.createInitializeAccountInstruction)(t,e,o)}function we(n){let{tokenAccount:e,payer:t,multiSigners:o=[],owner:i}=n;return(0,g.createCloseAccountInstruction)(e,t,i,o)}async function He(n){let{connection:e,amount:t,commitment:o,payer:i,owner:d,skipCloseAccount:L}=n,E=await e.getMinimumBalanceForRentExemption(b.span,o),U=l(t).add(new xe.default(E)),N=h.Keypair.generate();return{signers:[N],instructions:[h.SystemProgram.createAccount({fromPubkey:i,newAccountPubkey:N.publicKey,lamports:U.toNumber(),space:b.span,programId:g.TOKEN_PROGRAM_ID}),Te({mint:new h.PublicKey(f.mint),tokenAccount:N.publicKey,owner:d})],endInstructions:L?[]:[we({tokenAccount:N.publicKey,payer:i,owner:d})]}}function Ye({source:n,destination:e,owner:t,amount:o,multiSigners:i=[]}){return(0,g.createTransferInstruction)(n,e,t,l(o).toNumber(),i)}0&&(module.exports={closeAccountInstruction,createWSolAccountInstructions,initTokenAccountInstruction,makeTransferInstruction,parseTokenAccountResp,splAccountLayout});
//# sourceMappingURL=index.js.map