var we=Object.create;var L=Object.defineProperty;var Se=Object.getOwnPropertyDescriptor;var Be=Object.getOwnPropertyNames;var Ne=Object.getPrototypeOf,ke=Object.prototype.hasOwnProperty;var Le=(n,e)=>{for(var t in e)L(n,t,{get:e[t],enumerable:!0})},Y=(n,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Be(e))!ke.call(n,i)&&i!==t&&L(n,i,{get:()=>e[i],enumerable:!(o=Se(e,i))||o.enumerable});return n};var p=(n,e,t)=>(t=n!=null?we(Ne(n)):{},Y(e||!n||!n.__esModule?L(t,"default",{value:n,enumerable:!0}):t,n)),Ae=n=>Y(L({},"__esModule",{value:!0}),n);var Ve={};Le(Ve,{closeAccountInstruction:()=>Te,createWSolAccountInstructions:()=>$e,initTokenAccountInstruction:()=>xe,makeTransferInstruction:()=>ze,parseTokenAccountResp:()=>He,splAccountLayout:()=>b});module.exports=Ae(Ve);var X=require("@solana/web3.js"),A=p(require("bn.js"));var r=require("@solana/buffer-layout"),C=r.Layout,G=r.Structure;var O=r.UInt;var F=r.blob;var M=class extends C{constructor(t,o,i){super(t,i);this.blob=F(t),this.signed=o}decode(t,o=0){let i=new A.default(this.blob.decode(t,o),10,"le");return this.signed?i.fromTwos(this.span*8).clone():i}encode(t,o,i=0){return typeof t=="number"&&(t=new A.default(t)),this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),o,i)}};function Z(n){return new O(1,n)}function D(n){return new O(4,n)}function W(n){return new M(8,!1,n)}var q=class extends C{constructor(t,o,i,d){super(t.span,d);this.layout=t,this.decoder=o,this.encoder=i}decode(t,o){return this.decoder(this.layout.decode(t,o))}encode(t,o,i){return this.layout.encode(this.encoder(t),o,i)}getSpan(t,o){return this.layout.getSpan(t,o)}};function P(n){return new q(F(32),e=>new X.PublicKey(e),e=>e.toBuffer(),n)}var v=class extends G{decode(e,t){return super.decode(e,t)}};function Q(n,e,t){return new v(n,e,t)}var b=Q([P("mint"),P("owner"),W("amount"),D("delegateOption"),P("delegate"),Z("state"),D("isNativeOption"),W("isNative"),W("delegatedAmount"),D("closeAuthorityOption"),P("closeAuthority")]);var ye=require("@solana/web3.js"),he=p(require("bn.js"));var x=require("lodash"),te=p(require("pino")),ne=p(require("pino-pretty")),ee={},De={},We=(0,ne.default)({colorize:!0,levelFirst:!0,translateTime:"SYS:yyyymmdd HH:MM:ss.l"}),Re=(0,te.default)({base:null,level:"silent"},We);function m(n){let e=(0,x.get)(ee,n);if(!e){let t=(0,x.get)(De,n);e=Re.child({name:n},{level:t}),(0,x.set)(ee,n,e)}return e.logWithError=(...t)=>{let o=t.map(i=>typeof i=="object"?JSON.stringify(i):i).join(", ");throw new Error(o)},e}var Me=require("@solana/web3.js"),qe=p(require("bn.js"));var pe=p(require("big.js")),Fe=p(require("bn.js"));var c=p(require("bn.js"));var R=m("Raydium_bignumber");var Ie=new c.default(0),oe=new c.default(1),ft=new c.default(2),gt=new c.default(3),bt=new c.default(5),Ke=new c.default(10),ie=new c.default(100),yt=new c.default(1e3),ht=new c.default(1e4),re=9007199254740991;function l(n){if(n instanceof c.default)return n;if(typeof n=="string"){if(n.match(/^-?[0-9]+$/))return new c.default(n);R.logWithError(`invalid BigNumberish string: ${n}`)}return typeof n=="number"?(n%1&&R.logWithError(`BigNumberish number underflow: ${n}`),(n>=re||n<=-re)&&R.logWithError(`BigNumberish number overflow: ${n}`),new c.default(String(n))):typeof n=="bigint"?new c.default(n.toString()):(R.logWithError(`invalid BigNumberish value: ${n}`),new c.default(0))}var ce=p(require("toformat")),Ee=ce.default,T=Ee;var w=p(require("big.js")),me=p(require("decimal.js-light"));var _=m("module/fraction"),j=T(w.default),S=T(me.default),Ce={[0]:S.ROUND_DOWN,[1]:S.ROUND_HALF_UP,[2]:S.ROUND_UP},Oe={[0]:w.default.roundDown,[1]:w.default.roundHalfUp,[2]:w.default.roundUp},a=class{constructor(e,t=oe){this.numerator=l(e),this.denominator=l(t)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new a(this.denominator,this.numerator)}add(e){let t=e instanceof a?e:new a(l(e));return this.denominator.eq(t.denominator)?new a(this.numerator.add(t.numerator),this.denominator):new a(this.numerator.mul(t.denominator).add(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}sub(e){let t=e instanceof a?e:new a(l(e));return this.denominator.eq(t.denominator)?new a(this.numerator.sub(t.numerator),this.denominator):new a(this.numerator.mul(t.denominator).sub(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}mul(e){let t=e instanceof a?e:new a(l(e));return new a(this.numerator.mul(t.numerator),this.denominator.mul(t.denominator))}div(e){let t=e instanceof a?e:new a(l(e));return new a(this.numerator.mul(t.denominator),this.denominator.mul(t.numerator))}toSignificant(e,t={groupSeparator:""},o=1){Number.isInteger(e)||_.logWithError(`${e} is not an integer.`),e<=0&&_.logWithError(`${e} is not positive.`),S.set({precision:e+1,rounding:Ce[o]});let i=new S(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return i.toFormat(i.decimalPlaces(),t)}toFixed(e,t={groupSeparator:""},o=1){return Number.isInteger(e)||_.logWithError(`${e} is not an integer.`),e<0&&_.logWithError(`${e} is negative.`),j.DP=e,j.RM=Oe[o]||1,new j(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,t)}isZero(){return this.numerator.isZero()}};var Kt=m("Raydium_amount"),Et=T(pe.default);var le=require("@solana/web3.js"),de={symbol:"SOL",name:"Solana",decimals:9},f={symbol:"WSOL",name:"Wrapped SOL",mint:"So11111111111111111111111111111111111111112",decimals:9,extensions:{coingeckoId:"solana"}},Ct={isQuantumSOL:!0,isLp:!1,official:!0,mint:new le.PublicKey(f.mint),decimals:9,symbol:"SOL",id:"sol",name:"solana",icon:"https://img.raydium.io/icon/So11111111111111111111111111111111111111112.png",extensions:{coingeckoId:"solana"}};var I=require("@solana/web3.js");var ge=require("@solana/spl-token"),u=require("@solana/web3.js");function H({pubkey:n,isSigner:e=!1,isWritable:t=!0}){return{pubkey:n,isWritable:t,isSigner:e}}var Mt=[H({pubkey:ge.TOKEN_PROGRAM_ID,isWritable:!1}),H({pubkey:u.SystemProgram.programId,isWritable:!1}),H({pubkey:u.SYSVAR_RENT_PUBKEY,isWritable:!1})];function be({publicKey:n,transformSol:e}){if(n instanceof u.PublicKey)return e&&n.equals(B)?fe:n;if(e&&n===B.toBase58())return fe;if(typeof n=="string")try{return new u.PublicKey(n)}catch{throw new Error("invalid public key")}throw new Error("invalid public key")}var qt=new u.PublicKey("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),vt=new u.PublicKey("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),jt=new u.PublicKey("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),Ht=new u.PublicKey("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),$t=new u.PublicKey("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),zt=new u.PublicKey("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),Vt=new u.PublicKey("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),Yt=new u.PublicKey("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),Gt=new u.PublicKey("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),Jt=new u.PublicKey("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),Xt=new u.PublicKey("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),fe=new u.PublicKey("So11111111111111111111111111111111111111112"),B=u.PublicKey.default;var $=class{constructor({mint:e,decimals:t,symbol:o="UNKNOWN",name:i="UNKNOWN",skipMint:d=!1}){if(e===B.toBase58()||e instanceof I.PublicKey&&B.equals(e)){this.decimals=f.decimals,this.symbol=f.symbol,this.name=f.name,this.mint=new I.PublicKey(f.mint);return}this.decimals=t,this.symbol=o,this.name=i,this.mint=d?I.PublicKey.default:be({publicKey:e})}equals(e){return this===e?!0:this.mint.equals(e.mint)}},y=$;y.WSOL=new $(f);var V=class{constructor({decimals:e,symbol:t="UNKNOWN",name:o="UNKNOWN"}){this.decimals=e,this.symbol=t,this.name=o}equals(e){return this===e}},z=V;z.SOL=new V(de);var mn=new a(ie);var hn=m("Raydium_price");var K=require("@solana/web3.js");var On=m("Raydium_txTool");var ve=require("@solana/web3.js");var Yn=m("Raydium_accountInfo_util");var je=m("Raydium_Util");function He({solAccountResp:n,tokenAccountResp:e}){let t=[],o=[];for(let{pubkey:i,account:d}of e.value){if(d.data.length!==b.span)throw je.error("invalid token account layout length","publicKey",i.toBase58()),new Error("invalid token account layout length");let N=b.decode(d.data),{mint:E,amount:U}=N;t.push({publicKey:i,mint:E,amount:U,isNative:!1}),o.push({pubkey:i,accountInfo:N})}return n&&t.push({mint:ye.PublicKey.default,amount:new he.default(n.lamports),isNative:!0}),{tokenAccounts:t,tokenAccountRawInfos:o}}var g=require("@solana/spl-token"),h=require("@solana/web3.js"),Pe=p(require("bn.js"));function xe(n){let{mint:e,tokenAccount:t,owner:o}=n;return(0,g.createInitializeAccountInstruction)(t,e,o)}function Te(n){let{tokenAccount:e,payer:t,multiSigners:o=[],owner:i}=n;return(0,g.createCloseAccountInstruction)(e,t,i,o)}async function $e(n){let{connection:e,amount:t,commitment:o,payer:i,owner:d,skipCloseAccount:N}=n,E=await e.getMinimumBalanceForRentExemption(b.span,o),U=l(t).add(new Pe.default(E)),k=h.Keypair.generate();return{signers:[k],instructions:[h.SystemProgram.createAccount({fromPubkey:i,newAccountPubkey:k.publicKey,lamports:U.toNumber(),space:b.span,programId:g.TOKEN_PROGRAM_ID}),xe({mint:new h.PublicKey(f.mint),tokenAccount:k.publicKey,owner:d})],endInstructions:N?[]:[Te({tokenAccount:k.publicKey,payer:i,owner:d})]}}function ze({source:n,destination:e,owner:t,amount:o,multiSigners:i=[]}){return(0,g.createTransferInstruction)(n,e,t,l(o).toNumber(),i)}0&&(module.exports={closeAccountInstruction,createWSolAccountInstructions,initTokenAccountInstruction,makeTransferInstruction,parseTokenAccountResp,splAccountLayout});
//# sourceMappingURL=index.js.map