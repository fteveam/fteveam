import{PublicKey as fe}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as le}from"@solana/spl-token";import{PublicKey as c,SystemProgram as de,SYSVAR_RENT_PUBKEY as be}from"@solana/web3.js";function t({pubkey:n,isSigner:e=!1,isWritable:r=!0}){return{pubkey:n,isWritable:r,isSigner:e}}var Xe=[t({pubkey:le,isWritable:!1}),t({pubkey:de.programId,isWritable:!1}),t({pubkey:be,isWritable:!1})];function q({publicKey:n,transformSol:e}){if(n instanceof c)return e&&n.equals(h)?T:n;if(e&&n===h.toBase58())return T;if(typeof n=="string")try{return new c(n)}catch{throw new Error("invalid public key")}throw new Error("invalid public key")}var v=new c("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),V=new c("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),Ge=new c("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),j=new c("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),Y=new c("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),H=new c("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),z=new c("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),K=new c("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),Je=new c("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),Ze=new c("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),$=new c("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),T=new c("So11111111111111111111111111111111111111112"),h=c.default;var ge="routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS",E=new fe(ge),nt=["amm","serum","route"],rt=[j,v,T,H,V,z,K,Y,$].map(n=>n.toBase58());import{PublicKey as nn}from"@solana/web3.js";import ee,{isBN as te}from"bn.js";import{bits as st,BitStructure as at,blob as ye,Blob as ut,cstr as ct,f32 as mt,f32be as pt,f64 as lt,f64be as dt,greedy as bt,Layout as xe,ns64 as ft,ns64be as gt,nu64 as yt,nu64be as xt,offset as ht,s16 as Pt,s16be as kt,s24 as St,s24be as Tt,s32 as wt,s32be as Bt,s40 as Lt,s40be as Nt,s48 as Wt,s48be as It,s8 as Et,seq as he,struct as Dt,Structure as Pe,u16 as _t,u16be as At,u24 as Rt,u24be as Ut,u32 as Ot,u32be as Mt,u40 as Ct,u40be as Ft,u48 as qt,u48be as vt,u8 as Vt,UInt as ke,union as jt,Union as Yt,unionLayoutDiscriminator as Ht,utf8 as zt}from"@solana/buffer-layout";var X=xe,G=Pe;var J=ke;var Z=he;var Q=ye;var D=class extends X{constructor(r,o,i){super(r,i);this.blob=Q(r),this.signed=o}decode(r,o=0){let i=new ee(this.blob.decode(r,o),10,"le");return this.signed?i.fromTwos(this.span*8).clone():i}encode(r,o,i=0){return typeof r=="number"&&(r=new ee(r)),this.signed&&(r=r.toTwos(this.span*8)),this.blob.encode(r.toArrayLike(Buffer,"le",this.span),o,i)}};function A(n){return new J(1,n)}function b(n){return new D(8,!1,n)}var _=class extends G{decode(e,r){return super.decode(e,r)}};function x(n,e,r){return new _(n,e,r)}function ne(n,e,r){let o,i=typeof e=="number"?e:te(e)?e.toNumber():new Proxy(e,{get(d,f){if(!o){let y=Reflect.get(d,"count");o=te(y)?y.toNumber():y,Reflect.set(d,"count",o)}return Reflect.get(d,f)},set(d,f,y){return f==="count"&&(o=y),Reflect.set(d,f,y)}});return Z(n,i,r)}var w=x([A("instruction"),b("amountIn"),b("amountOut")]),B=x([A("instruction")]);import{PACKET_DATA_SIZE as xn,PublicKey as Ie,sendAndConfirmTransaction as Pn,Transaction as Tn}from"@solana/web3.js";import{get as re,set as Te}from"lodash";import we from"pino";import Be from"pino-pretty";var oe={},Le={},Ne=Be({colorize:!0,levelFirst:!0,translateTime:"SYS:yyyymmdd HH:MM:ss.l"}),We=we({base:null,level:"silent"},Ne);function l(n){let e=re(oe,n);if(!e){let r=re(Le,n);e=We.child({name:n},{level:r}),Te(oe,n,e)}return e.logWithError=(...r)=>{let o=r.map(i=>typeof i=="object"?JSON.stringify(i):i).join(", ");throw new Error(o)},e}var Ln=l("Raydium_txTool");async function ie(n,e){let[r,o]=await Ie.findProgramAddress(n,e);return{publicKey:r,nonce:o}}async function In({programId:n,fromPoolId:e,middleMint:r,owner:o}){let{publicKey:i}=await ie([e.toBuffer(),r.toBuffer(),o.toBuffer()],n);return i}import{TOKEN_PROGRAM_ID as I}from"@solana/spl-token";import{SystemProgram as me,TransactionInstruction as pe}from"@solana/web3.js";import m from"bn.js";import Oe from"big.js";import jn from"bn.js";import Ee from"toformat";var De=Ee,P=De;import N from"big.js";import _e from"decimal.js-light";var L=l("module/fraction"),R=P(N),k=P(_e),Ae={[0]:k.ROUND_DOWN,[1]:k.ROUND_HALF_UP,[2]:k.ROUND_UP},Re={[0]:N.roundDown,[1]:N.roundHalfUp,[2]:N.roundUp},s=class{constructor(e,r=se){this.numerator=p(e),this.denominator=p(r)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new s(this.denominator,this.numerator)}add(e){let r=e instanceof s?e:new s(p(e));return this.denominator.eq(r.denominator)?new s(this.numerator.add(r.numerator),this.denominator):new s(this.numerator.mul(r.denominator).add(r.numerator.mul(this.denominator)),this.denominator.mul(r.denominator))}sub(e){let r=e instanceof s?e:new s(p(e));return this.denominator.eq(r.denominator)?new s(this.numerator.sub(r.numerator),this.denominator):new s(this.numerator.mul(r.denominator).sub(r.numerator.mul(this.denominator)),this.denominator.mul(r.denominator))}mul(e){let r=e instanceof s?e:new s(p(e));return new s(this.numerator.mul(r.numerator),this.denominator.mul(r.denominator))}div(e){let r=e instanceof s?e:new s(p(e));return new s(this.numerator.mul(r.denominator),this.denominator.mul(r.numerator))}toSignificant(e,r={groupSeparator:""},o=1){Number.isInteger(e)||L.logWithError(`${e} is not an integer.`),e<=0&&L.logWithError(`${e} is not positive.`),k.set({precision:e+1,rounding:Ae[o]});let i=new k(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return i.toFormat(i.decimalPlaces(),r)}toFixed(e,r={groupSeparator:""},o=1){return Number.isInteger(e)||L.logWithError(`${e} is not an integer.`),e<0&&L.logWithError(`${e} is negative.`),R.DP=e,R.RM=Re[o]||1,new R(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,r)}isZero(){return this.numerator.isZero()}};var Jn=l("Raydium_amount"),Zn=P(Oe);import{PublicKey as Ce}from"@solana/web3.js";var ae={symbol:"SOL",name:"Solana",decimals:9},g={symbol:"WSOL",name:"Wrapped SOL",mint:"So11111111111111111111111111111111111111112",decimals:9,extensions:{coingeckoId:"solana"}},tr={isQuantumSOL:!0,isLp:!1,official:!0,mint:new Ce(g.mint),decimals:9,symbol:"SOL",id:"sol",name:"solana",icon:"https://img.raydium.io/icon/So11111111111111111111111111111111111111112.png",extensions:{coingeckoId:"solana"}};import{PublicKey as U}from"@solana/web3.js";var O=class{constructor({mint:e,decimals:r,symbol:o="UNKNOWN",name:i="UNKNOWN",skipMint:d=!1}){if(e===h.toBase58()||e instanceof U&&h.equals(e)){this.decimals=g.decimals,this.symbol=g.symbol,this.name=g.name,this.mint=new U(g.mint);return}this.decimals=r,this.symbol=o,this.name=i,this.mint=d?U.default:q({publicKey:e})}equals(e){return this===e?!0:this.mint.equals(e.mint)}},S=O;S.WSOL=new O(g);var C=class{constructor({decimals:e,symbol:r="UNKNOWN",name:o="UNKNOWN"}){this.decimals=e,this.symbol=r,this.name=o}equals(e){return this===e}},M=C;M.SOL=new C(ae);var br=new s(ue);var kr=l("Raydium_price");var W=l("Raydium_bignumber");var Fr=new m(0),se=new m(1),qr=new m(2),vr=new m(3),Vr=new m(5),Me=new m(10),ue=new m(100),jr=new m(1e3),Yr=new m(1e4),ce=9007199254740991;function p(n){if(n instanceof m)return n;if(typeof n=="string"){if(n.match(/^-?[0-9]+$/))return new m(n);W.logWithError(`invalid BigNumberish string: ${n}`)}return typeof n=="number"?(n%1&&W.logWithError(`BigNumberish number underflow: ${n}`),(n>=ce||n<=-ce)&&W.logWithError(`BigNumberish number overflow: ${n}`),new m(String(n))):typeof n=="bigint"?new m(n.toString()):(W.logWithError(`invalid BigNumberish value: ${n}`),new m(0))}import{PublicKey as Fe}from"@solana/web3.js";var F=new Fe("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),qe=5e4,ve=x([b("x"),b("y"),b("price")]),Xr=x([b("accountType"),b("status"),b("multiplier"),b("validDataCount"),ne(ve,qe,"DataElement")]);var Ve=l("Raydium_route_instruction");function io(n){let{fixedSide:e}=n;if(e==="in")return[je(n),Ye(n)];throw Ve.logWithError("invalid params","params",n),new Error(`invalid params, params: ${n}`)}function je({fromPoolKeys:n,toPoolKeys:e,userKeys:r,amountIn:o,amountOut:i}){let d=Buffer.alloc(w.span),f;return n.version===4?(w.encode({instruction:0,amountIn:p(o),amountOut:p(i)},d),f=[t({pubkey:me.programId,isWritable:!1}),t({pubkey:I,isWritable:!1}),t({pubkey:n.programId,isWritable:!1}),t({pubkey:n.id}),t({pubkey:e.id,isWritable:!1}),t({pubkey:n.authority,isWritable:!1}),t({pubkey:n.openOrders}),t({pubkey:n.baseVault}),t({pubkey:n.quoteVault}),t({pubkey:n.marketProgramId,isWritable:!1}),t({pubkey:n.marketId}),t({pubkey:n.marketBids}),t({pubkey:n.marketAsks}),t({pubkey:n.marketEventQueue}),t({pubkey:n.marketBaseVault}),t({pubkey:n.marketQuoteVault}),t({pubkey:n.marketAuthority,isWritable:!1}),t({pubkey:r.inTokenAccount}),t({pubkey:r.middleTokenAccount}),t({pubkey:r.middleStatusAccount}),t({pubkey:r.owner,isWritable:!1,isSigner:!0})]):(w.encode({instruction:2,amountIn:p(o),amountOut:p(i)},d),f=[t({pubkey:me.programId,isWritable:!1}),t({pubkey:I,isWritable:!1}),t({pubkey:n.programId,isWritable:!1}),t({pubkey:n.id}),t({pubkey:e.id,isWritable:!1}),t({pubkey:n.authority,isWritable:!1}),t({pubkey:n.openOrders}),t({pubkey:n.baseVault}),t({pubkey:n.quoteVault}),t({pubkey:F,isWritable:!1}),t({pubkey:n.marketProgramId,isWritable:!1}),t({pubkey:n.marketId}),t({pubkey:n.marketBids}),t({pubkey:n.marketAsks}),t({pubkey:n.marketEventQueue}),t({pubkey:n.id}),t({pubkey:n.id}),t({pubkey:n.id}),t({pubkey:r.inTokenAccount}),t({pubkey:r.middleTokenAccount}),t({pubkey:r.middleStatusAccount}),t({pubkey:r.owner,isWritable:!1,isSigner:!0})]),new pe({programId:E,keys:f,data:d})}function Ye({fromPoolKeys:n,toPoolKeys:e,userKeys:r}){let o=Buffer.alloc(B.span),i;return e.version===4?(B.encode({instruction:1},o),i=[t({pubkey:I,isWritable:!1}),t({pubkey:e.programId,isWritable:!1}),t({pubkey:n.id,isWritable:!1}),t({pubkey:e.id}),t({pubkey:e.authority,isWritable:!1}),t({pubkey:e.openOrders}),t({pubkey:e.baseVault}),t({pubkey:e.quoteVault}),t({pubkey:e.marketProgramId,isWritable:!1}),t({pubkey:e.marketId}),t({pubkey:e.marketBids}),t({pubkey:e.marketAsks}),t({pubkey:e.marketEventQueue}),t({pubkey:e.marketBaseVault}),t({pubkey:e.marketQuoteVault}),t({pubkey:e.marketAuthority,isWritable:!1}),t({pubkey:r.middleTokenAccount}),t({pubkey:r.outTokenAccount}),t({pubkey:r.middleStatusAccount}),t({pubkey:r.owner,isWritable:!1,isSigner:!0})]):(B.encode({instruction:3},o),i=[t({pubkey:I,isWritable:!1}),t({pubkey:e.programId,isWritable:!1}),t({pubkey:n.id,isWritable:!1}),t({pubkey:e.id}),t({pubkey:e.authority,isWritable:!1}),t({pubkey:e.openOrders}),t({pubkey:e.baseVault}),t({pubkey:e.quoteVault}),t({pubkey:F,isWritable:!1}),t({pubkey:e.marketProgramId,isWritable:!1}),t({pubkey:e.marketId}),t({pubkey:e.marketBids}),t({pubkey:e.marketAsks}),t({pubkey:e.marketEventQueue}),t({pubkey:e.id}),t({pubkey:e.id}),t({pubkey:e.id}),t({pubkey:r.middleTokenAccount}),t({pubkey:r.outTokenAccount}),t({pubkey:r.middleStatusAccount}),t({pubkey:r.owner,isWritable:!1,isSigner:!0})]),new pe({programId:E,keys:i,data:o})}export{E as ROUTE_PROGRAM_ID_V1,ge as _ROUTE_PROGRAM_ID_V1,nt as defaultRoutes,In as getAssociatedMiddleStatusAccount,io as makeRouteSwapInstruction,je as makeSwapInFixedInInstruction,Ye as makeSwapOutFixedInInstruction,w as routeSwapInLayout,B as routeSwapOutLayout,rt as swapRouteMiddleMints};
//# sourceMappingURL=index.mjs.map