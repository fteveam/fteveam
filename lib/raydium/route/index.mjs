import{PublicKey as ye}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as be}from"@solana/spl-token";import{PublicKey as c,SystemProgram as fe,SYSVAR_RENT_PUBKEY as ge}from"@solana/web3.js";function t({pubkey:n,isSigner:e=!1,isWritable:r=!0}){return{pubkey:n,isWritable:r,isSigner:e}}var ze=[t({pubkey:be,isWritable:!1}),t({pubkey:fe.programId,isWritable:!1}),t({pubkey:ge,isWritable:!1})];function q({publicKey:n,transformSol:e}){if(n instanceof c)return e&&n.equals(h)?T:n;if(e&&n===h.toBase58())return T;if(typeof n=="string")try{return new c(n)}catch{throw new Error("invalid public key")}throw new Error("invalid public key")}var V=new c("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),j=new c("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),Xe=new c("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),Y=new c("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),H=new c("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),K=new c("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),$=new c("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),z=new c("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),Ge=new c("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),Je=new c("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),X=new c("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),T=new c("So11111111111111111111111111111111111111112"),h=c.default;var xe="routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS",E=new ye(xe),tt=["amm","serum","route"],nt=[Y,V,T,K,j,$,z,H,X].map(n=>n.toBase58());import{PublicKey as tn}from"@solana/web3.js";import te,{isBN as ne}from"bn.js";import{bits as it,BitStructure as st,blob as he,Blob as at,cstr as ut,f32 as ct,f32be as mt,f64 as pt,f64be as lt,greedy as dt,Layout as Pe,ns64 as bt,ns64be as ft,nu64 as gt,nu64be as yt,offset as xt,s16 as ht,s16be as Pt,s24 as kt,s24be as wt,s32 as Tt,s32be as St,s40 as Lt,s40be as Bt,s48 as Nt,s48be as Wt,s8 as It,seq as ke,struct as Et,Structure as we,u16 as Dt,u16be as _t,u24 as At,u24be as Rt,u32 as Ut,u32be as Ot,u40 as Mt,u40be as vt,u48 as Ct,u48be as Ft,u8 as qt,UInt as Te,union as Vt,Union as jt,unionLayoutDiscriminator as Yt,utf8 as Ht}from"@solana/buffer-layout";var G=Pe,J=we;var Z=Te;var Q=ke;var ee=he;var D=class extends G{constructor(r,o,s){super(r,s);this.blob=ee(r),this.signed=o}decode(r,o=0){let s=new te(this.blob.decode(r,o),10,"le");return this.signed?s.fromTwos(this.span*8).clone():s}encode(r,o,s=0){return typeof r=="number"&&(r=new te(r)),this.signed&&(r=r.toTwos(this.span*8)),this.blob.encode(r.toArrayLike(Buffer,"le",this.span),o,s)}};function A(n){return new Z(1,n)}function b(n){return new D(8,!1,n)}var _=class extends J{decode(e,r){return super.decode(e,r)}};function x(n,e,r){return new _(n,e,r)}function re(n,e,r){let o,s=typeof e=="number"?e:ne(e)?e.toNumber():new Proxy(e,{get(d,f){if(!o){let y=Reflect.get(d,"count");o=ne(y)?y.toNumber():y,Reflect.set(d,"count",o)}return Reflect.get(d,f)},set(d,f,y){return f==="count"&&(o=y),Reflect.set(d,f,y)}});return Q(n,s,r)}var S=x([A("instruction"),b("amountIn"),b("amountOut")]),L=x([A("instruction")]);import{PACKET_DATA_SIZE as fn,PublicKey as We,sendAndConfirmTransaction as yn,Transaction as Pn}from"@solana/web3.js";import{get as oe,set as Le}from"lodash";import se from"dayjs";import Be from"dayjs/plugin/utc";se.extend(Be);var R=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:0,this.name=e.name}set level(e){this.logLevel=e}get time(){return se().utc().format("YYYY/MM/DD HH:mm:ss UTC")}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let r=e.map(o=>typeof o=="object"?JSON.stringify(o):o).join(", ");throw new Error(r)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},ie={},Ne={};function l(n){let e=oe(ie,n);if(!e){let r=oe(Ne,n);e=new R({name:n,logLevel:r}),Le(ie,n,e)}return e}var Tn=l("Raydium_txTool");async function ae(n,e){let[r,o]=await We.findProgramAddress(n,e);return{publicKey:r,nonce:o}}async function Bn({programId:n,fromPoolId:e,middleMint:r,owner:o}){let{publicKey:s}=await ae([e.toBuffer(),r.toBuffer(),o.toBuffer()],n);return s}import{TOKEN_PROGRAM_ID as I}from"@solana/spl-token";import{SystemProgram as le,TransactionInstruction as de}from"@solana/web3.js";import m from"bn.js";import Ue from"big.js";import Fn from"bn.js";import Ie from"toformat";var Ee=Ie,P=Ee;import N from"big.js";import De from"decimal.js-light";var B=l("module/fraction"),U=P(N),k=P(De),_e={[0]:k.ROUND_DOWN,[1]:k.ROUND_HALF_UP,[2]:k.ROUND_UP},Ae={[0]:N.roundDown,[1]:N.roundHalfUp,[2]:N.roundUp},i=class{constructor(e,r=ue){this.numerator=p(e),this.denominator=p(r)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new i(this.denominator,this.numerator)}add(e){let r=e instanceof i?e:new i(p(e));return this.denominator.eq(r.denominator)?new i(this.numerator.add(r.numerator),this.denominator):new i(this.numerator.mul(r.denominator).add(r.numerator.mul(this.denominator)),this.denominator.mul(r.denominator))}sub(e){let r=e instanceof i?e:new i(p(e));return this.denominator.eq(r.denominator)?new i(this.numerator.sub(r.numerator),this.denominator):new i(this.numerator.mul(r.denominator).sub(r.numerator.mul(this.denominator)),this.denominator.mul(r.denominator))}mul(e){let r=e instanceof i?e:new i(p(e));return new i(this.numerator.mul(r.numerator),this.denominator.mul(r.denominator))}div(e){let r=e instanceof i?e:new i(p(e));return new i(this.numerator.mul(r.denominator),this.denominator.mul(r.numerator))}toSignificant(e,r={groupSeparator:""},o=1){Number.isInteger(e)||B.logWithError(`${e} is not an integer.`),e<=0&&B.logWithError(`${e} is not positive.`),k.set({precision:e+1,rounding:_e[o]});let s=new k(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return s.toFormat(s.decimalPlaces(),r)}toFixed(e,r={groupSeparator:""},o=1){return Number.isInteger(e)||B.logWithError(`${e} is not an integer.`),e<0&&B.logWithError(`${e} is negative.`),U.DP=e,U.RM=Ae[o]||1,new U(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,r)}isZero(){return this.numerator.isZero()}};var zn=l("Raydium_amount"),Xn=P(Ue);import{PublicKey as Me}from"@solana/web3.js";var ce={symbol:"SOL",name:"Solana",decimals:9},g={symbol:"WSOL",name:"Wrapped SOL",mint:"So11111111111111111111111111111111111111112",decimals:9,extensions:{coingeckoId:"solana"}},Zn={isQuantumSOL:!0,isLp:!1,official:!0,mint:new Me(g.mint),decimals:9,symbol:"SOL",id:"sol",name:"solana",icon:"https://img.raydium.io/icon/So11111111111111111111111111111111111111112.png",extensions:{coingeckoId:"solana"}};import{PublicKey as O}from"@solana/web3.js";var M=class{constructor({mint:e,decimals:r,symbol:o="UNKNOWN",name:s="UNKNOWN",skipMint:d=!1}){if(e===h.toBase58()||e instanceof O&&h.equals(e)){this.decimals=g.decimals,this.symbol=g.symbol,this.name=g.name,this.mint=new O(g.mint);return}this.decimals=r,this.symbol=o,this.name=s,this.mint=d?O.default:q({publicKey:e})}equals(e){return this===e?!0:this.mint.equals(e.mint)}},w=M;w.WSOL=new M(g);var C=class{constructor({decimals:e,symbol:r="UNKNOWN",name:o="UNKNOWN"}){this.decimals=e,this.symbol=r,this.name=o}equals(e){return this===e}},v=C;v.SOL=new C(ce);var pr=new i(me);var xr=l("Raydium_price");var W=l("Raydium_bignumber");var Or=new m(0),ue=new m(1),Mr=new m(2),vr=new m(3),Cr=new m(5),Oe=new m(10),me=new m(100),Fr=new m(1e3),qr=new m(1e4),pe=9007199254740991;function p(n){if(n instanceof m)return n;if(typeof n=="string"){if(n.match(/^-?[0-9]+$/))return new m(n);W.logWithError(`invalid BigNumberish string: ${n}`)}return typeof n=="number"?(n%1&&W.logWithError(`BigNumberish number underflow: ${n}`),(n>=pe||n<=-pe)&&W.logWithError(`BigNumberish number overflow: ${n}`),new m(String(n))):typeof n=="bigint"?new m(n.toString()):(W.logWithError(`invalid BigNumberish value: ${n}`),new m(0))}import{PublicKey as ve}from"@solana/web3.js";var F=new ve("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),Ce=5e4,Fe=x([b("x"),b("y"),b("price")]),Kr=x([b("accountType"),b("status"),b("multiplier"),b("validDataCount"),re(Fe,Ce,"DataElement")]);var qe=l("Raydium_route_instruction");function no(n){let{fixedSide:e}=n;if(e==="in")return[Ve(n),je(n)];throw qe.logWithError("invalid params","params",n),new Error(`invalid params, params: ${n}`)}function Ve({fromPoolKeys:n,toPoolKeys:e,userKeys:r,amountIn:o,amountOut:s}){let d=Buffer.alloc(S.span),f;return n.version===4?(S.encode({instruction:0,amountIn:p(o),amountOut:p(s)},d),f=[t({pubkey:le.programId,isWritable:!1}),t({pubkey:I,isWritable:!1}),t({pubkey:n.programId,isWritable:!1}),t({pubkey:n.id}),t({pubkey:e.id,isWritable:!1}),t({pubkey:n.authority,isWritable:!1}),t({pubkey:n.openOrders}),t({pubkey:n.baseVault}),t({pubkey:n.quoteVault}),t({pubkey:n.marketProgramId,isWritable:!1}),t({pubkey:n.marketId}),t({pubkey:n.marketBids}),t({pubkey:n.marketAsks}),t({pubkey:n.marketEventQueue}),t({pubkey:n.marketBaseVault}),t({pubkey:n.marketQuoteVault}),t({pubkey:n.marketAuthority,isWritable:!1}),t({pubkey:r.inTokenAccount}),t({pubkey:r.middleTokenAccount}),t({pubkey:r.middleStatusAccount}),t({pubkey:r.owner,isWritable:!1,isSigner:!0})]):(S.encode({instruction:2,amountIn:p(o),amountOut:p(s)},d),f=[t({pubkey:le.programId,isWritable:!1}),t({pubkey:I,isWritable:!1}),t({pubkey:n.programId,isWritable:!1}),t({pubkey:n.id}),t({pubkey:e.id,isWritable:!1}),t({pubkey:n.authority,isWritable:!1}),t({pubkey:n.openOrders}),t({pubkey:n.baseVault}),t({pubkey:n.quoteVault}),t({pubkey:F,isWritable:!1}),t({pubkey:n.marketProgramId,isWritable:!1}),t({pubkey:n.marketId}),t({pubkey:n.marketBids}),t({pubkey:n.marketAsks}),t({pubkey:n.marketEventQueue}),t({pubkey:n.id}),t({pubkey:n.id}),t({pubkey:n.id}),t({pubkey:r.inTokenAccount}),t({pubkey:r.middleTokenAccount}),t({pubkey:r.middleStatusAccount}),t({pubkey:r.owner,isWritable:!1,isSigner:!0})]),new de({programId:E,keys:f,data:d})}function je({fromPoolKeys:n,toPoolKeys:e,userKeys:r}){let o=Buffer.alloc(L.span),s;return e.version===4?(L.encode({instruction:1},o),s=[t({pubkey:I,isWritable:!1}),t({pubkey:e.programId,isWritable:!1}),t({pubkey:n.id,isWritable:!1}),t({pubkey:e.id}),t({pubkey:e.authority,isWritable:!1}),t({pubkey:e.openOrders}),t({pubkey:e.baseVault}),t({pubkey:e.quoteVault}),t({pubkey:e.marketProgramId,isWritable:!1}),t({pubkey:e.marketId}),t({pubkey:e.marketBids}),t({pubkey:e.marketAsks}),t({pubkey:e.marketEventQueue}),t({pubkey:e.marketBaseVault}),t({pubkey:e.marketQuoteVault}),t({pubkey:e.marketAuthority,isWritable:!1}),t({pubkey:r.middleTokenAccount}),t({pubkey:r.outTokenAccount}),t({pubkey:r.middleStatusAccount}),t({pubkey:r.owner,isWritable:!1,isSigner:!0})]):(L.encode({instruction:3},o),s=[t({pubkey:I,isWritable:!1}),t({pubkey:e.programId,isWritable:!1}),t({pubkey:n.id,isWritable:!1}),t({pubkey:e.id}),t({pubkey:e.authority,isWritable:!1}),t({pubkey:e.openOrders}),t({pubkey:e.baseVault}),t({pubkey:e.quoteVault}),t({pubkey:F,isWritable:!1}),t({pubkey:e.marketProgramId,isWritable:!1}),t({pubkey:e.marketId}),t({pubkey:e.marketBids}),t({pubkey:e.marketAsks}),t({pubkey:e.marketEventQueue}),t({pubkey:e.id}),t({pubkey:e.id}),t({pubkey:e.id}),t({pubkey:r.middleTokenAccount}),t({pubkey:r.outTokenAccount}),t({pubkey:r.middleStatusAccount}),t({pubkey:r.owner,isWritable:!1,isSigner:!0})]),new de({programId:E,keys:s,data:o})}export{E as ROUTE_PROGRAM_ID_V1,xe as _ROUTE_PROGRAM_ID_V1,tt as defaultRoutes,Bn as getAssociatedMiddleStatusAccount,no as makeRouteSwapInstruction,Ve as makeSwapInFixedInInstruction,je as makeSwapOutFixedInInstruction,S as routeSwapInLayout,L as routeSwapOutLayout,nt as swapRouteMiddleMints};
//# sourceMappingURL=index.mjs.map