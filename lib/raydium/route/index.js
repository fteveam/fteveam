var Ne=Object.create;var _=Object.defineProperty;var We=Object.getOwnPropertyDescriptor;var Ie=Object.getOwnPropertyNames;var Ee=Object.getPrototypeOf,De=Object.prototype.hasOwnProperty;var _e=(t,e)=>{for(var r in e)_(t,r,{get:e[r],enumerable:!0})},z=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Ie(e))!De.call(t,s)&&s!==r&&_(t,s,{get:()=>e[s],enumerable:!(i=We(e,s))||i.enumerable});return t};var f=(t,e,r)=>(r=t!=null?Ne(Ee(t)):{},z(e||!t||!t.__esModule?_(r,"default",{value:t,enumerable:!0}):r,t)),Ae=t=>z(_({},"__esModule",{value:!0}),t);var Ge={};_e(Ge,{ROUTE_PROGRAM_ID_V1:()=>R,_ROUTE_PROGRAM_ID_V1:()=>se,defaultRoutes:()=>Re,getAssociatedMiddleStatusAccount:()=>Ce,makeRouteSwapInstruction:()=>Xe,makeSwapInFixedInInstruction:()=>Le,makeSwapOutFixedInInstruction:()=>Be,routeSwapInLayout:()=>T,routeSwapOutLayout:()=>S,swapRouteMiddleMints:()=>Ue});module.exports=Ae(Ge);var ie=require("@solana/web3.js");var X=require("@solana/spl-token"),c=require("@solana/web3.js");function n({pubkey:t,isSigner:e=!1,isWritable:r=!0}){return{pubkey:t,isWritable:r,isSigner:e}}var Qe=[n({pubkey:X.TOKEN_PROGRAM_ID,isWritable:!1}),n({pubkey:c.SystemProgram.programId,isWritable:!1}),n({pubkey:c.SYSVAR_RENT_PUBKEY,isWritable:!1})];function G({publicKey:t,transformSol:e}){if(t instanceof c.PublicKey)return e&&t.equals(w)?A:t;if(e&&t===w.toBase58())return A;if(typeof t=="string")try{return new c.PublicKey(t)}catch{throw new Error("invalid public key")}throw new Error("invalid public key")}var J=new c.PublicKey("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),Z=new c.PublicKey("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),et=new c.PublicKey("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),Q=new c.PublicKey("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),ee=new c.PublicKey("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),te=new c.PublicKey("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),ne=new c.PublicKey("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),re=new c.PublicKey("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),tt=new c.PublicKey("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),nt=new c.PublicKey("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),oe=new c.PublicKey("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),A=new c.PublicKey("So11111111111111111111111111111111111111112"),w=c.PublicKey.default;var se="routeUGWgWzqBWFcrCfv8tritsqukccJPu3q5GPP3xS",R=new ie.PublicKey(se),Re=["amm","serum","route"],Ue=[Q,J,A,te,Z,ne,re,ee,oe].map(t=>t.toBase58());var Me=require("@solana/web3.js"),h=f(require("bn.js"));var o=require("@solana/buffer-layout"),ae=o.Layout,ue=o.Structure;var ce=o.UInt;var me=o.seq;var pe=o.blob;var v=class extends ae{constructor(r,i,s){super(r,s);this.blob=pe(r),this.signed=i}decode(r,i=0){let s=new h.default(this.blob.decode(r,i),10,"le");return this.signed?s.fromTwos(this.span*8).clone():s}encode(r,i,s=0){return typeof r=="number"&&(r=new h.default(r)),this.signed&&(r=r.toTwos(this.span*8)),this.blob.encode(r.toArrayLike(Buffer,"le",this.span),i,s)}};function F(t){return new ce(1,t)}function b(t){return new v(8,!1,t)}var C=class extends ue{decode(e,r){return super.decode(e,r)}};function P(t,e,r){return new C(t,e,r)}function le(t,e,r){let i,s=typeof e=="number"?e:(0,h.isBN)(e)?e.toNumber():new Proxy(e,{get(d,g){if(!i){let x=Reflect.get(d,"count");i=(0,h.isBN)(x)?x.toNumber():x,Reflect.set(d,"count",i)}return Reflect.get(d,g)},set(d,g,x){return g==="count"&&(i=x),Reflect.set(d,g,x)}});return me(t,s,r)}var T=P([F("instruction"),b("amountIn"),b("amountOut")]),S=P([F("instruction")]);var B=require("@solana/web3.js");var L=require("lodash"),V=f(require("dayjs")),be=f(require("dayjs/plugin/utc"));V.default.extend(be.default);var q=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:0,this.name=e.name}set level(e){this.logLevel=e}get time(){return(0,V.default)().utc().format("YYYY/MM/DD HH:mm:ss UTC")}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let r=e.map(i=>typeof i=="object"?JSON.stringify(i):i).join(", ");throw new Error(r)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},de={},ve={};function l(t){let e=(0,L.get)(de,t);if(!e){let r=(0,L.get)(ve,t);e=new q({name:t,logLevel:r}),(0,L.set)(de,t,e)}return e}var Bt=l("Raydium_txTool");async function fe(t,e){let[r,i]=await B.PublicKey.findProgramAddress(t,e);return{publicKey:r,nonce:i}}async function Ce({programId:t,fromPoolId:e,middleMint:r,owner:i}){let{publicKey:s}=await fe([e.toBuffer(),r.toBuffer(),i.toBuffer()],t);return s}var D=require("@solana/spl-token"),k=require("@solana/web3.js");var m=f(require("bn.js"));var he=f(require("big.js")),Ye=f(require("bn.js"));var ge=f(require("toformat")),Fe=ge.default,N=Fe;var W=f(require("big.js")),ye=f(require("decimal.js-light"));var U=l("module/fraction"),j=N(W.default),I=N(ye.default),qe={[0]:I.ROUND_DOWN,[1]:I.ROUND_HALF_UP,[2]:I.ROUND_UP},Ve={[0]:W.default.roundDown,[1]:W.default.roundHalfUp,[2]:W.default.roundUp},a=class{constructor(e,r=xe){this.numerator=p(e),this.denominator=p(r)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new a(this.denominator,this.numerator)}add(e){let r=e instanceof a?e:new a(p(e));return this.denominator.eq(r.denominator)?new a(this.numerator.add(r.numerator),this.denominator):new a(this.numerator.mul(r.denominator).add(r.numerator.mul(this.denominator)),this.denominator.mul(r.denominator))}sub(e){let r=e instanceof a?e:new a(p(e));return this.denominator.eq(r.denominator)?new a(this.numerator.sub(r.numerator),this.denominator):new a(this.numerator.mul(r.denominator).sub(r.numerator.mul(this.denominator)),this.denominator.mul(r.denominator))}mul(e){let r=e instanceof a?e:new a(p(e));return new a(this.numerator.mul(r.numerator),this.denominator.mul(r.denominator))}div(e){let r=e instanceof a?e:new a(p(e));return new a(this.numerator.mul(r.denominator),this.denominator.mul(r.numerator))}toSignificant(e,r={groupSeparator:""},i=1){Number.isInteger(e)||U.logWithError(`${e} is not an integer.`),e<=0&&U.logWithError(`${e} is not positive.`),I.set({precision:e+1,rounding:qe[i]});let s=new I(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return s.toFormat(s.decimalPlaces(),r)}toFixed(e,r={groupSeparator:""},i=1){return Number.isInteger(e)||U.logWithError(`${e} is not an integer.`),e<0&&U.logWithError(`${e} is negative.`),j.DP=e,j.RM=Ve[i]||1,new j(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,r)}isZero(){return this.numerator.isZero()}};var Yt=l("Raydium_amount"),Ht=N(he.default);var Pe=require("@solana/web3.js"),ke={symbol:"SOL",name:"Solana",decimals:9},y={symbol:"WSOL",name:"Wrapped SOL",mint:"So11111111111111111111111111111111111111112",decimals:9,extensions:{coingeckoId:"solana"}},$t={isQuantumSOL:!0,isLp:!1,official:!0,mint:new Pe.PublicKey(y.mint),decimals:9,symbol:"SOL",id:"sol",name:"solana",icon:"https://img.raydium.io/icon/So11111111111111111111111111111111111111112.png",extensions:{coingeckoId:"solana"}};var O=require("@solana/web3.js");var Y=class{constructor({mint:e,decimals:r,symbol:i="UNKNOWN",name:s="UNKNOWN",skipMint:d=!1}){if(e===w.toBase58()||e instanceof O.PublicKey&&w.equals(e)){this.decimals=y.decimals,this.symbol=y.symbol,this.name=y.name,this.mint=new O.PublicKey(y.mint);return}this.decimals=r,this.symbol=i,this.name=s,this.mint=d?O.PublicKey.default:G({publicKey:e})}equals(e){return this===e?!0:this.mint.equals(e.mint)}},E=Y;E.WSOL=new Y(y);var K=class{constructor({decimals:e,symbol:r="UNKNOWN",name:i="UNKNOWN"}){this.decimals=e,this.symbol=r,this.name=i}equals(e){return this===e}},H=K;H.SOL=new K(ke);var sn=new a(we);var dn=l("Raydium_price");var M=l("Raydium_bignumber");var En=new m.default(0),xe=new m.default(1),Dn=new m.default(2),_n=new m.default(3),An=new m.default(5),He=new m.default(10),we=new m.default(100),Rn=new m.default(1e3),Un=new m.default(1e4),Te=9007199254740991;function p(t){if(t instanceof m.default)return t;if(typeof t=="string"){if(t.match(/^-?[0-9]+$/))return new m.default(t);M.logWithError(`invalid BigNumberish string: ${t}`)}return typeof t=="number"?(t%1&&M.logWithError(`BigNumberish number underflow: ${t}`),(t>=Te||t<=-Te)&&M.logWithError(`BigNumberish number overflow: ${t}`),new m.default(String(t))):typeof t=="bigint"?new m.default(t.toString()):(M.logWithError(`invalid BigNumberish value: ${t}`),new m.default(0))}var Se=require("@solana/web3.js");var $=new Se.PublicKey("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),Ke=5e4,$e=P([b("x"),b("y"),b("price")]),Cn=P([b("accountType"),b("status"),b("multiplier"),b("validDataCount"),le($e,Ke,"DataElement")]);var ze=l("Raydium_route_instruction");function Xe(t){let{fixedSide:e}=t;if(e==="in")return[Le(t),Be(t)];throw ze.logWithError("invalid params","params",t),new Error(`invalid params, params: ${t}`)}function Le({fromPoolKeys:t,toPoolKeys:e,userKeys:r,amountIn:i,amountOut:s}){let d=Buffer.alloc(T.span),g;return t.version===4?(T.encode({instruction:0,amountIn:p(i),amountOut:p(s)},d),g=[n({pubkey:k.SystemProgram.programId,isWritable:!1}),n({pubkey:D.TOKEN_PROGRAM_ID,isWritable:!1}),n({pubkey:t.programId,isWritable:!1}),n({pubkey:t.id}),n({pubkey:e.id,isWritable:!1}),n({pubkey:t.authority,isWritable:!1}),n({pubkey:t.openOrders}),n({pubkey:t.baseVault}),n({pubkey:t.quoteVault}),n({pubkey:t.marketProgramId,isWritable:!1}),n({pubkey:t.marketId}),n({pubkey:t.marketBids}),n({pubkey:t.marketAsks}),n({pubkey:t.marketEventQueue}),n({pubkey:t.marketBaseVault}),n({pubkey:t.marketQuoteVault}),n({pubkey:t.marketAuthority,isWritable:!1}),n({pubkey:r.inTokenAccount}),n({pubkey:r.middleTokenAccount}),n({pubkey:r.middleStatusAccount}),n({pubkey:r.owner,isWritable:!1,isSigner:!0})]):(T.encode({instruction:2,amountIn:p(i),amountOut:p(s)},d),g=[n({pubkey:k.SystemProgram.programId,isWritable:!1}),n({pubkey:D.TOKEN_PROGRAM_ID,isWritable:!1}),n({pubkey:t.programId,isWritable:!1}),n({pubkey:t.id}),n({pubkey:e.id,isWritable:!1}),n({pubkey:t.authority,isWritable:!1}),n({pubkey:t.openOrders}),n({pubkey:t.baseVault}),n({pubkey:t.quoteVault}),n({pubkey:$,isWritable:!1}),n({pubkey:t.marketProgramId,isWritable:!1}),n({pubkey:t.marketId}),n({pubkey:t.marketBids}),n({pubkey:t.marketAsks}),n({pubkey:t.marketEventQueue}),n({pubkey:t.id}),n({pubkey:t.id}),n({pubkey:t.id}),n({pubkey:r.inTokenAccount}),n({pubkey:r.middleTokenAccount}),n({pubkey:r.middleStatusAccount}),n({pubkey:r.owner,isWritable:!1,isSigner:!0})]),new k.TransactionInstruction({programId:R,keys:g,data:d})}function Be({fromPoolKeys:t,toPoolKeys:e,userKeys:r}){let i=Buffer.alloc(S.span),s;return e.version===4?(S.encode({instruction:1},i),s=[n({pubkey:D.TOKEN_PROGRAM_ID,isWritable:!1}),n({pubkey:e.programId,isWritable:!1}),n({pubkey:t.id,isWritable:!1}),n({pubkey:e.id}),n({pubkey:e.authority,isWritable:!1}),n({pubkey:e.openOrders}),n({pubkey:e.baseVault}),n({pubkey:e.quoteVault}),n({pubkey:e.marketProgramId,isWritable:!1}),n({pubkey:e.marketId}),n({pubkey:e.marketBids}),n({pubkey:e.marketAsks}),n({pubkey:e.marketEventQueue}),n({pubkey:e.marketBaseVault}),n({pubkey:e.marketQuoteVault}),n({pubkey:e.marketAuthority,isWritable:!1}),n({pubkey:r.middleTokenAccount}),n({pubkey:r.outTokenAccount}),n({pubkey:r.middleStatusAccount}),n({pubkey:r.owner,isWritable:!1,isSigner:!0})]):(S.encode({instruction:3},i),s=[n({pubkey:D.TOKEN_PROGRAM_ID,isWritable:!1}),n({pubkey:e.programId,isWritable:!1}),n({pubkey:t.id,isWritable:!1}),n({pubkey:e.id}),n({pubkey:e.authority,isWritable:!1}),n({pubkey:e.openOrders}),n({pubkey:e.baseVault}),n({pubkey:e.quoteVault}),n({pubkey:$,isWritable:!1}),n({pubkey:e.marketProgramId,isWritable:!1}),n({pubkey:e.marketId}),n({pubkey:e.marketBids}),n({pubkey:e.marketAsks}),n({pubkey:e.marketEventQueue}),n({pubkey:e.id}),n({pubkey:e.id}),n({pubkey:e.id}),n({pubkey:r.middleTokenAccount}),n({pubkey:r.outTokenAccount}),n({pubkey:r.middleStatusAccount}),n({pubkey:r.owner,isWritable:!1,isSigner:!0})]),new k.TransactionInstruction({programId:R,keys:s,data:i})}0&&(module.exports={ROUTE_PROGRAM_ID_V1,_ROUTE_PROGRAM_ID_V1,defaultRoutes,getAssociatedMiddleStatusAccount,makeRouteSwapInstruction,makeSwapInFixedInInstruction,makeSwapOutFixedInInstruction,routeSwapInLayout,routeSwapOutLayout,swapRouteMiddleMints});
//# sourceMappingURL=index.js.map