var M=Object.create;var g=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty;var U=(r,e)=>{for(var o in e)g(r,o,{get:e[o],enumerable:!0})},b=(r,e,o,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of x(e))!T.call(r,t)&&t!==o&&g(r,t,{get:()=>e[t],enumerable:!(n=d(e,t))||n.enumerable});return r};var c=(r,e,o)=>(o=r!=null?M(y(r)):{},b(e||!r||!r.__esModule?g(o,"default",{value:r,enumerable:!0}):o,r)),w=r=>b(g({},"__esModule",{value:!0}),r);var k={};U(k,{SERUM_PROGRAMID_TO_VERSION:()=>Y,SERUM_PROGRAM_ID_V3:()=>V,SERUM_VERSION_TO_PROGRAM_ID:()=>D,_SERUM_PROGRAM_ID_V3:()=>f,getSerumAssociatedAuthority:()=>S,getSerumProgramId:()=>N,getSerumVersion:()=>A});module.exports=w(k);var p=require("@solana/web3.js");var i=require("lodash"),l=c(require("dayjs")),h=c(require("dayjs/plugin/utc"));l.default.extend(h.default);var m=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:0,this.name=e.name}set level(e){this.logLevel=e}get time(){return(0,l.default)().utc().format("YYYY/MM/DD HH:mm:ss UTC")}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let o=e.map(n=>typeof n=="object"?JSON.stringify(n):n).join(", ");throw new Error(o)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},R={},K={};function L(r){let e=(0,i.get)(R,r);if(!e){let o=(0,i.get)(K,r);e=new m({name:r,logLevel:o}),(0,i.set)(R,r,e)}return e}var u=require("@solana/web3.js"),I=c(require("bn.js"));var P=new I.default(25),W=new I.default(1e4),v="675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8",B=new u.PublicKey(v),E="5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h",F=new u.PublicKey(E),H={[v]:4,[E]:5};var O={4:3,5:3};var _=L("Raydium_liquidity_serum"),f="9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",V=new p.PublicKey(f),Y={[f]:3},D={3:V};function A(r){let e=O[r];return e||_.logWithError("invalid version","version",r),e}function N(r){let e=D[r];return e||_.logWithError("invalid version","version",r),e}async function S({programId:r,marketId:e}){let o=[e.toBuffer()],n=0,t;for(;n<100;){try{let s=o.concat(Buffer.from([n]),Buffer.alloc(7));t=await p.PublicKey.createProgramAddress(s,r)}catch(s){if(s instanceof TypeError)throw s;n++;continue}return{publicKey:t,nonce:n}}throw _.logWithError("unable to find a viable program address nonce","params",{programId:r,marketId:e}),new Error("unable to find a viable program address nonce")}0&&(module.exports={SERUM_PROGRAMID_TO_VERSION,SERUM_PROGRAM_ID_V3,SERUM_VERSION_TO_PROGRAM_ID,_SERUM_PROGRAM_ID_V3,getSerumAssociatedAuthority,getSerumProgramId,getSerumVersion});
//# sourceMappingURL=serum.js.map