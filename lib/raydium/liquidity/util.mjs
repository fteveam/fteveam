import{OpenOrders as Et}from"@project-serum/serum";import V from"bn.js";import{get as le,set as Qe}from"lodash";import de from"dayjs";import je from"dayjs/plugin/utc";de.extend(je);var H=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:0,this.name=e.name}set level(e){this.logLevel=e}get time(){return de().utc().format("YYYY/MM/DD HH:mm:ss UTC")}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let t=e.map(o=>typeof o=="object"?JSON.stringify(o):o).join(", ");throw new Error(t)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},pe={},Ge={};function b(n){let e=le(pe,n);if(!e){let t=le(Ge,n);e=new H({name:n,logLevel:t}),Qe(pe,n,e)}return e}import{TOKEN_PROGRAM_ID as ze}from"@solana/spl-token";import{PublicKey as y,SystemProgram as He,SYSVAR_RENT_PUBKEY as Xe}from"@solana/web3.js";function w({pubkey:n,isSigner:e=!1,isWritable:t=!0}){return{pubkey:n,isWritable:t,isSigner:e}}var $e=[w({pubkey:ze,isWritable:!1}),w({pubkey:He.programId,isWritable:!1}),w({pubkey:Xe,isWritable:!1})];function E({publicKey:n,transformSol:e}){if(n instanceof y)return e&&n.equals(O)?be:n;if(e&&n===O.toBase58())return be;if(typeof n=="string")try{return new y(n)}catch{throw new Error("invalid public key")}throw new Error("invalid public key")}var Qt=new y("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),jt=new y("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),Gt=new y("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),zt=new y("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),Ht=new y("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),Xt=new y("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),$t=new y("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),Jt=new y("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),Zt=new y("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),en=new y("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),tn=new y("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),be=new y("So11111111111111111111111111111111111111112"),O=y.default;import{PACKET_DATA_SIZE as Je,PublicKey as ye,sendAndConfirmTransaction as an,Transaction as X}from"@solana/web3.js";var B=b("Raydium_txTool");function Ze(n,e){n.length<1&&B.logWithError(`no instructions provided: ${n.toString()}`),e.length<1&&B.logWithError(`no signers provided:, ${e.toString()}`);let t=new X;t.recentBlockhash="11111111111111111111111111111111",t.feePayer=e[0],t.add(...n);let o=t.compileMessage().serialize();return e.length+e.length*64+o.length}async function fe(n,e,t){let o=new ye("RaydiumSimuLateTransaction11111111111111111"),i=[],s=new X;s.feePayer=o;for(let c of e)Ze([...s.instructions,c],[o])>Je&&(i.push(s),s=new X,s.feePayer=o),s.add(c);s.instructions.length>0&&i.push(s);let m=[];try{m=await Promise.all(i.map(c=>n.simulateTransaction(c)))}catch(c){c instanceof Error&&B.logWithError(`failed to simulate for instructions, RPC_ERROR, ${c.message}`)}let l=[];for(let c of m){let{value:x}=c;if(B.debug(`simulate result: ${JSON.stringify(c)}`),x.logs){let k=x.logs.filter(L=>L&&L.includes(t));B.debug(`filteredLog: ${JSON.stringify(l)}`),k.length||B.logWithError(` "simulate log not match keyword, keyword: ${t}`),l.push(...k)}}return l}function ge(n,e){let t=n.match(/{["\w:,]+}/g);return!t||t.length!==1?B.logWithError(`simulate log fail to match json, keyword: ${e}`):t[0]}function S(n,e){let o=new RegExp(`"${e}":(\\d+)`,"g").exec(n);return!o||o.length!==2?B.logWithError(`simulate log fail to match key", key: ${e}`):o[1]}async function $(n,e){let[t,o]=await ye.findProgramAddress(n,e);return{publicKey:t,nonce:o}}import at from"big.js";import Y from"bn.js";import f from"bn.js";var F=b("Raydium_bignumber");var fn=new f(0),he=new f(1),gn=new f(2),xn=new f(3),Pn=new f(5),ke=new f(10),Le=new f(100),hn=new f(1e3),kn=new f(1e4),xe=9007199254740991;function P(n){if(n instanceof f)return n;if(typeof n=="string"){if(n.match(/^-?[0-9]+$/))return new f(n);F.logWithError(`invalid BigNumberish string: ${n}`)}return typeof n=="number"?(n%1&&F.logWithError(`BigNumberish number underflow: ${n}`),(n>=xe||n<=-xe)&&F.logWithError(`BigNumberish number overflow: ${n}`),new f(String(n))):typeof n=="bigint"?new f(n.toString()):(F.logWithError(`invalid BigNumberish value: ${n}`),new f(0))}import tt from"toformat";var nt=tt,R=nt;import C from"big.js";import ot from"decimal.js-light";var K=b("module/fraction"),J=R(C),M=R(ot),it={[0]:M.ROUND_DOWN,[1]:M.ROUND_HALF_UP,[2]:M.ROUND_UP},st={[0]:C.roundDown,[1]:C.roundHalfUp,[2]:C.roundUp},a=class{constructor(e,t=he){this.numerator=P(e),this.denominator=P(t)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new a(this.denominator,this.numerator)}add(e){let t=e instanceof a?e:new a(P(e));return this.denominator.eq(t.denominator)?new a(this.numerator.add(t.numerator),this.denominator):new a(this.numerator.mul(t.denominator).add(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}sub(e){let t=e instanceof a?e:new a(P(e));return this.denominator.eq(t.denominator)?new a(this.numerator.sub(t.numerator),this.denominator):new a(this.numerator.mul(t.denominator).sub(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}mul(e){let t=e instanceof a?e:new a(P(e));return new a(this.numerator.mul(t.numerator),this.denominator.mul(t.denominator))}div(e){let t=e instanceof a?e:new a(P(e));return new a(this.numerator.mul(t.denominator),this.denominator.mul(t.numerator))}toSignificant(e,t={groupSeparator:""},o=1){Number.isInteger(e)||K.logWithError(`${e} is not an integer.`),e<=0&&K.logWithError(`${e} is not positive.`),M.set({precision:e+1,rounding:it[o]});let i=new M(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return i.toFormat(i.decimalPlaces(),t)}toFixed(e,t={groupSeparator:""},o=1){return Number.isInteger(e)||K.logWithError(`${e} is not an integer.`),e<0&&K.logWithError(`${e} is negative.`),J.DP=e,J.RM=st[o]||1,new J(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,t)}isZero(){return this.numerator.isZero()}};var ut=b("Raydium_amount"),we=R(at);function ct(n,e){let t="0",o="0";if(n.includes(".")){let i=n.split(".");i.length===2?([t,o]=i,o=o.padEnd(e,"0")):ut.logWithError(`invalid number string, num: ${n}`)}else t=n;return[t,o.slice(0,e)||o]}var _=class extends a{constructor(t,o,i=!0,s){let m=new Y(0),l=ke.pow(new Y(t.decimals));if(i)m=P(o);else{let c=new Y(0),x=new Y(0);if(typeof o=="string"||typeof o=="number"||typeof o=="bigint"){let[k,L]=ct(o.toString(),t.decimals);c=P(k),x=P(L)}c=c.mul(l),m=c.add(x)}super(m,l);this.logger=b(s||"Amount"),this.token=t}get raw(){return this.numerator}isZero(){return this.raw.isZero()}gt(t){return this.token.equals(t.token)||this.logger.logWithError("gt token not equals"),this.raw.gt(t.raw)}lt(t){return this.token.equals(t.token)||this.logger.logWithError("lt token not equals"),this.raw.lt(t.raw)}add(t){return this.token.equals(t.token)||this.logger.logWithError("add token not equals"),new _(this.token,this.raw.add(t.raw))}subtract(t){return this.token.equals(t.token)||this.logger.logWithError("sub token not equals"),new _(this.token,this.raw.sub(t.raw))}toSignificant(t=this.token.decimals,o,i=0){return super.toSignificant(t,o,i)}toFixed(t=this.token.decimals,o,i=0){return t>this.token.decimals&&this.logger.logWithError("decimals overflow"),super.toFixed(t,o,i)}toExact(t={groupSeparator:""}){return we.DP=this.token.decimals,new we(this.numerator.toString()).div(this.denominator.toString()).toFormat(t)}};import{PublicKey as mt}from"@solana/web3.js";var Te={symbol:"SOL",name:"Solana",decimals:9},A={symbol:"WSOL",name:"Wrapped SOL",mint:"So11111111111111111111111111111111111111112",decimals:9,extensions:{coingeckoId:"solana"}},jn={isQuantumSOL:!0,isLp:!1,official:!0,mint:new mt(A.mint),decimals:9,symbol:"SOL",id:"sol",name:"solana",icon:"https://img.raydium.io/icon/So11111111111111111111111111111111111111112.png",extensions:{coingeckoId:"solana"}};import{PublicKey as Z}from"@solana/web3.js";var ee=class{constructor({mint:e,decimals:t,symbol:o="UNKNOWN",name:i="UNKNOWN",skipMint:s=!1}){if(e===O.toBase58()||e instanceof Z&&O.equals(e)){this.decimals=A.decimals,this.symbol=A.symbol,this.name=A.name,this.mint=new Z(A.mint);return}this.decimals=t,this.symbol=o,this.name=i,this.mint=s?Z.default:E({publicKey:e})}equals(e){return this===e?!0:this.mint.equals(e.mint)}},q=ee;q.WSOL=new ee(A);var ne=class{constructor({decimals:e,symbol:t="UNKNOWN",name:o="UNKNOWN"}){this.decimals=e,this.symbol=t,this.name=o}equals(e){return this===e}},te=ne;te.SOL=new ne(Te);var ir=new a(Le);var dr=b("Raydium_price");import{PublicKey as Se}from"@solana/web3.js";import Ie from"bn.js";var Sr=new Ie(25),Ir=new Ie(1e4),Be="675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8",lt=new Se(Be),_e="5quBtoiQqxF9Jv6KYKctB59NT3gtJD2Y65kdnB1Uev3h",pt=new Se(_e),Br={[Be]:4,[_e]:5},Ne={4:lt,5:pt},qe={4:3,5:3};import{TOKEN_PROGRAM_ID as Fo}from"@solana/spl-token";import{SystemProgram as Yo,TransactionInstruction as qt}from"@solana/web3.js";import{PublicKey as xt}from"@solana/web3.js";import We,{isBN as Oe}from"bn.js";import{bits as qr,BitStructure as Ar,blob as dt,Blob as Dr,cstr as Er,f32 as Wr,f32be as Or,f64 as Rr,f64be as Mr,greedy as vr,Layout as bt,ns64 as Vr,ns64be as Ur,nu64 as Fr,nu64be as Kr,offset as Cr,s16 as Yr,s16be as Qr,s24 as jr,s24be as Gr,s32 as zr,s32be as Hr,s40 as Xr,s40be as $r,s48 as Jr,s48be as Zr,s8 as eo,seq as yt,struct as to,Structure as ft,u16 as no,u16be as ro,u24 as oo,u24be as io,u32 as so,u32be as ao,u40 as uo,u40be as co,u48 as mo,u48be as lo,u8 as po,UInt as gt,union as bo,Union as yo,unionLayoutDiscriminator as fo,utf8 as go}from"@solana/buffer-layout";var re=bt,Ae=ft;var De=gt;var Ee=yt;var oe=dt;var Q=class extends re{constructor(t,o,i){super(t,i);this.blob=oe(t),this.signed=o}decode(t,o=0){let i=new We(this.blob.decode(t,o),10,"le");return this.signed?i.fromTwos(this.span*8).clone():i}encode(t,o,i=0){return typeof t=="number"&&(t=new We(t)),this.signed&&(t=t.toTwos(this.span*8)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),o,i)}};function h(n){return new De(1,n)}function r(n){return new Q(8,!1,n)}function T(n){return new Q(16,!1,n)}var ie=class extends re{constructor(t,o,i,s){super(t.span,s);this.layout=t,this.decoder=o,this.encoder=i}decode(t,o){return this.decoder(this.layout.decode(t,o))}encode(t,o,i){return this.layout.encode(this.encoder(t),o,i)}getSpan(t,o){return this.layout.getSpan(t,o)}};function u(n){return new ie(oe(32),e=>new xt(e),e=>e.toBuffer(),n)}var se=class extends Ae{decode(e,t){return super.decode(e,t)}};function g(n,e,t){return new se(n,e,t)}function v(n,e,t){let o,i=typeof e=="number"?e:Oe(e)?e.toNumber():new Proxy(e,{get(s,m){if(!o){let l=Reflect.get(s,"count");o=Oe(l)?l.toNumber():l,Reflect.set(s,"count",o)}return Reflect.get(s,m)},set(s,m,l){return m==="count"&&(o=l),Reflect.set(s,m,l)}});return Ee(n,i,t)}var Pt=g([h("instruction"),r("amountIn"),r("minAmountOut")]),ht=g([h("instruction"),r("maxAmountIn"),r("amountOut")]),kt=g([h("instruction"),h("nonce")]),Lt=g([h("instruction"),h("nonce"),r("startTime")]),ae=g([r("status"),r("nonce"),r("maxOrder"),r("depth"),r("baseDecimal"),r("quoteDecimal"),r("state"),r("resetFlag"),r("minSize"),r("volMaxCutRatio"),r("amountWaveRatio"),r("baseLotSize"),r("quoteLotSize"),r("minPriceMultiplier"),r("maxPriceMultiplier"),r("systemDecimalValue"),r("minSeparateNumerator"),r("minSeparateDenominator"),r("tradeFeeNumerator"),r("tradeFeeDenominator"),r("pnlNumerator"),r("pnlDenominator"),r("swapFeeNumerator"),r("swapFeeDenominator"),r("baseNeedTakePnl"),r("quoteNeedTakePnl"),r("quoteTotalPnl"),r("baseTotalPnl"),T("quoteTotalDeposited"),T("baseTotalDeposited"),T("swapBaseInAmount"),T("swapQuoteOutAmount"),r("swapBase2QuoteFee"),T("swapQuoteInAmount"),T("swapBaseOutAmount"),r("swapQuote2BaseFee"),u("baseVault"),u("quoteVault"),u("baseMint"),u("quoteMint"),u("lpMint"),u("openOrders"),u("marketId"),u("marketProgramId"),u("targetOrders"),u("withdrawQueue"),u("lpVault"),u("owner"),r("lpReserve"),v(r(),3,"padding")]),wt=g([r("accountType"),r("status"),r("nonce"),r("maxOrder"),r("depth"),r("baseDecimal"),r("quoteDecimal"),r("state"),r("resetFlag"),r("minSize"),r("volMaxCutRatio"),r("amountWaveRatio"),r("baseLotSize"),r("quoteLotSize"),r("minPriceMultiplier"),r("maxPriceMultiplier"),r("systemDecimalsValue"),r("abortTradeFactor"),r("priceTickMultiplier"),r("priceTick"),r("minSeparateNumerator"),r("minSeparateDenominator"),r("tradeFeeNumerator"),r("tradeFeeDenominator"),r("pnlNumerator"),r("pnlDenominator"),r("swapFeeNumerator"),r("swapFeeDenominator"),r("baseNeedTakePnl"),r("quoteNeedTakePnl"),r("quoteTotalPnl"),r("baseTotalPnl"),r("poolOpenTime"),r("punishPcAmount"),r("punishCoinAmount"),r("orderbookToInitTime"),T("swapBaseInAmount"),T("swapQuoteOutAmount"),T("swapQuoteInAmount"),T("swapBaseOutAmount"),r("swapQuote2BaseFee"),r("swapBase2QuoteFee"),u("baseVault"),u("quoteVault"),u("baseMint"),u("quoteMint"),u("lpMint"),u("modelDataAccount"),u("openOrders"),u("marketId"),u("marketProgramId"),u("targetOrders"),u("owner"),v(r(),64,"padding")]),Tt=g([h("instruction"),r("baseAmountIn"),r("quoteAmountIn"),r("fixedSide")]),St=g([h("instruction"),r("amountIn")]),Re={4:ae,5:wt};import{PublicKey as It}from"@solana/web3.js";var Bt=new It("CDSr3ssLcRB6XYPJwAfFt18MZvEZp4LjHcvzBVZ45duo"),_t=5e4,Nt=g([r("x"),r("y"),r("price")]),Mo=g([r("accountType"),r("status"),r("multiplier"),r("validDataCount"),v(Nt,_t,"DataElement")]);var $o=b("Raydium_liquidity_instruction");function Me(n){let e=g([h("instruction"),h("simulateType")]),t=Buffer.alloc(e.span);e.encode({instruction:12,simulateType:0},t);let o=[w({pubkey:n.id,isWritable:!1}),w({pubkey:n.authority,isWritable:!1}),w({pubkey:n.openOrders,isWritable:!1}),w({pubkey:n.baseVault,isWritable:!1}),w({pubkey:n.quoteVault,isWritable:!1}),w({pubkey:n.lpMint,isWritable:!1}),w({pubkey:n.marketId,isWritable:!1})];return new qt({programId:n.programId,keys:o,data:t})}import{PublicKey as ve}from"@solana/web3.js";var ue=b("Raydium_liquidity_serum"),Ve="9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin",At=new ve(Ve),ni={[Ve]:3},Dt={3:At};function Ue(n){let e=qe[n];return e||ue.logWithError("invalid version","version",n),e}function Fe(n){let e=Dt[n];return e||ue.logWithError("invalid version","version",n),e}async function Ke({programId:n,marketId:e}){let t=[e.toBuffer()],o=0,i;for(;o<100;){try{let s=t.concat(Buffer.from([o]),Buffer.alloc(7));i=await ve.createProgramAddress(s,n)}catch(s){if(s instanceof TypeError)throw s;o++;continue}return{publicKey:i,nonce:o}}throw ue.logWithError("unable to find a viable program address nonce","params",{programId:n,marketId:e}),new Error("unable to find a viable program address nonce")}var j=b("Raydium_liquidity_util");function gi(n,e){let t=n instanceof _?n.token:q.WSOL,{baseMint:o,quoteMint:i}=e;if(t.mint.equals(o))return"base";if(t.mint.equals(i))return"quote";let s=`liquidity getTokenSide - token not match with pool, params: ${JSON.stringify({token:t.mint,baseMint:o,quoteMint:i})}`;throw console.error(s),new Error(s)}function xi(n,e){let{baseMint:t,quoteMint:o}=e;return n.mint.equals(t)||n.mint.equals(o)}function Pi(n){let{status:e,startTime:t}=n,o=e.toNumber();return{[0]:{swap:!1,addLiquidity:!1,removeLiquidity:!1},[1]:{swap:!0,addLiquidity:!0,removeLiquidity:!0},[2]:{swap:!1,addLiquidity:!1,removeLiquidity:!1},[3]:{swap:!1,addLiquidity:!1,removeLiquidity:!0},[4]:{swap:!1,addLiquidity:!0,removeLiquidity:!0},[5]:{swap:!1,addLiquidity:!0,removeLiquidity:!0},[6]:{swap:!0,addLiquidity:!0,removeLiquidity:!0},[7]:{swap:Date.now()/1e3>=t.toNumber(),addLiquidity:!0,removeLiquidity:!0}}[o]||{swap:!1,addLiquidity:!1,removeLiquidity:!1}}function hi(n){let e=Re[n];return e||j.logWithError("invalid version","version",n),e}function Wt(n){let e=Ne[n];return e||j.logWithError("invalid version","version",n),e}async function N({name:n,programId:e,marketId:t}){let{publicKey:o}=await $([e.toBuffer(),t.toBuffer(),Buffer.from(n,"utf-8")],e);return o}async function Ot({programId:n}){return $([Buffer.from([97,109,109,32,97,117,116,104,111,114,105,116,121])],n)}async function ki({version:n,marketId:e,baseMint:t,quoteMint:o}){let i=Wt(n),[s,m,l]=[E({publicKey:e}),E({publicKey:t,transformSol:!0}),E({publicKey:o,transformSol:!0})],c=await N({name:"amm_associated_seed",programId:i,marketId:s}),x=await N({name:"lp_mint_associated_seed",programId:i,marketId:s}),{publicKey:k,nonce:L}=await Ot({programId:i}),D=await N({name:"coin_vault_associated_seed",programId:i,marketId:s}),I=await N({name:"pc_vault_associated_seed",programId:i,marketId:s}),W=await N({name:"temp_lp_token_associated_seed",programId:i,marketId:s}),U=await N({name:"open_order_associated_seed",programId:i,marketId:s}),G=await N({name:"target_associated_seed",programId:i,marketId:s}),z=await N({name:"withdraw_associated_seed",programId:i,marketId:s}),ce=Ue(n),me=Fe(ce),{publicKey:Ye}=await Ke({programId:me,marketId:s});return{id:c,baseMint:m,quoteMint:l,lpMint:x,version:n,programId:i,authority:k,nonce:L,baseVault:D,quoteVault:I,lpVault:W,openOrders:U,targetOrders:G,withdrawQueue:z,marketVersion:ce,marketProgramId:me,marketId:s,marketAuthority:Ye}}async function Li({connection:n,pools:e}){let t=e.map(i=>Me(i));return(await fe(n,t,"GetPoolData")).map(i=>{let s=ge(i,"GetPoolData"),m=new V(S(s,"status")),l=Number(S(s,"coin_decimals")),c=Number(S(s,"pc_decimals")),x=Number(S(s,"lp_decimals")),k=new V(S(s,"pool_coin_amount")),L=new V(S(s,"pool_pc_amount")),D=new V(S(s,"pool_lp_supply")),I="0";try{I=S(s,"pool_open_time")}catch{I="0"}return{status:m,baseDecimals:l,quoteDecimals:c,lpDecimals:x,baseReserve:k,quoteReserve:L,lpSupply:D,startTime:new V(I)}})}function wi(n,e,t){return Rt(n.token,e.token,t)}function Rt(n,e,t){let{baseMint:o,quoteMint:i}=t,s=Ce(n,t),m=Ce(e,t);return s===m&&j.logWithError("tokens not match with pool","params",{tokenA:n.mint,tokenB:e.mint,baseMint:o,quoteMint:i}),[s,m]}function Ce(n,e){let{baseMint:t,quoteMint:o}=e;return n.mint.equals(t)?"base":n.mint.equals(o)?"quote":(j.logWithError("token not match with pool","params",{token:n.mint,baseMint:t,quoteMint:o}),"base")}var Ti=n=>n==="a"||n==="b";async function Si(n,e,t){let o=await n.getAccountInfo(e);if(o===null)return null;let i=ae.decode(o.data),s=await n.getTokenAccountBalance(i.baseVault),m=await n.getTokenAccountBalance(i.quoteVault),l=await Et.load(n,i.openOrders,t),c=10**i.baseDecimal.toNumber(),x=10**i.quoteDecimal.toNumber(),k=l.baseTokenTotal.toNumber()/c,L=l.quoteTokenTotal.toNumber()/x,D=i.baseNeedTakePnl.toNumber()/c,I=i.quoteNeedTakePnl.toNumber()/x,W=s.value.uiAmount+k-D,U=m.value.uiAmount+L-I,G=parseFloat(i.lpReserve.toString()),z=W/U;return{baseAmount:W,quoteAmount:U,lpSupply:G,baseVaultKey:i.baseVault,quoteVaultKey:i.quoteVault,baseVaultBalance:s.value.uiAmount,quoteVaultBalance:m.value.uiAmount,openOrdersKey:i.openOrders,openOrdersTotalBase:k,openOrdersTotalQuote:L,basePnl:D,quotePnl:I,priceInQuote:z}}export{gi as getAmountSide,wi as getAmountsSide,ki as getAssociatedPoolKeys,Ot as getLiquidityAssociatedAuthority,N as getLiquidityAssociatedId,Si as getLiquidityInfo,Wt as getLiquidityProgramId,hi as getLiquidityStateLayout,Pi as getPoolEnabledFeatures,Ce as getTokenSide,Rt as getTokensSide,xi as includesToken,Ti as isValidFixedSide,Li as makeSimulationPoolInfo};
//# sourceMappingURL=util.mjs.map