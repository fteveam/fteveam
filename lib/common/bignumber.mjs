var oe=Object.defineProperty,ie=Object.defineProperties;var ae=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable;var K=(r,t,e)=>t in r?oe(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,j=(r,t)=>{for(var e in t||(t={}))se.call(t,e)&&K(r,e,t[e]);if(_)for(var e of _(t))me.call(t,e)&&K(r,e,t[e]);return r},H=(r,t)=>ie(r,ae(t));import a from"bn.js";import We from"big.js";import T from"bn.js";import{get as I,set as ue}from"lodash";import ce from"pino";import pe from"pino-pretty";var Y={},le={},de=pe({colorize:!0,levelFirst:!0,translateTime:"SYS:yyyymmdd HH:MM:ss.l"}),ge=ce({base:null,level:"silent"},de);function d(r){let t=I(Y,r);if(!t){let e=I(le,r);t=ge.child({name:r},{level:e}),ue(Y,r,t)}return t.logWithError=(...e)=>{let n=e.map(i=>typeof i=="object"?JSON.stringify(i):i).join(", ");throw new Error(n)},t}import fe from"toformat";var be=fe,y=be;import D from"big.js";import he from"decimal.js-light";var x=d("module/fraction"),F=y(D),k=y(he),Ne={[0]:k.ROUND_DOWN,[1]:k.ROUND_HALF_UP,[2]:k.ROUND_UP},we={[0]:D.roundDown,[1]:D.roundHalfUp,[2]:D.roundUp},o=class{constructor(t,e=z){this.numerator=m(t),this.denominator=m(e)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new o(this.denominator,this.numerator)}add(t){let e=t instanceof o?t:new o(m(t));return this.denominator.eq(e.denominator)?new o(this.numerator.add(e.numerator),this.denominator):new o(this.numerator.mul(e.denominator).add(e.numerator.mul(this.denominator)),this.denominator.mul(e.denominator))}sub(t){let e=t instanceof o?t:new o(m(t));return this.denominator.eq(e.denominator)?new o(this.numerator.sub(e.numerator),this.denominator):new o(this.numerator.mul(e.denominator).sub(e.numerator.mul(this.denominator)),this.denominator.mul(e.denominator))}mul(t){let e=t instanceof o?t:new o(m(t));return new o(this.numerator.mul(e.numerator),this.denominator.mul(e.denominator))}div(t){let e=t instanceof o?t:new o(m(t));return new o(this.numerator.mul(e.denominator),this.denominator.mul(e.numerator))}toSignificant(t,e={groupSeparator:""},n=1){Number.isInteger(t)||x.logWithError(`${t} is not an integer.`),t<=0&&x.logWithError(`${t} is not positive.`),k.set({precision:t+1,rounding:Ne[n]});let i=new k(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(t);return i.toFormat(i.decimalPlaces(),e)}toFixed(t,e={groupSeparator:""},n=1){return Number.isInteger(t)||x.logWithError(`${t} is not an integer.`),t<0&&x.logWithError(`${t} is negative.`),F.DP=t,F.RM=we[n]||1,new F(this.numerator.toString()).div(this.denominator.toString()).toFormat(t,e)}isZero(){return this.numerator.isZero()}};var ye=d("Raydium_amount"),X=y(We);function ke(r,t){let e="0",n="0";if(r.includes(".")){let i=r.split(".");i.length===2?([e,n]=i,n=n.padEnd(t,"0")):ye.logWithError(`invalid number string, num: ${r}`)}else e=r;return[e,n.slice(0,t)||n]}var g=class extends o{constructor(e,n,i=!0,p){let l=new T(0),h=W.pow(new T(e.decimals));if(i)l=m(n);else{let w=new T(0),v=new T(0);if(typeof n=="string"||typeof n=="number"||typeof n=="bigint"){let[re,ne]=ke(n.toString(),e.decimals);w=m(re),v=m(ne)}w=w.mul(h),l=w.add(v)}super(l,h);this.logger=d(p||"Amount"),this.token=e}get raw(){return this.numerator}isZero(){return this.raw.isZero()}gt(e){return this.token.equals(e.token)||this.logger.logWithError("gt token not equals"),this.raw.gt(e.raw)}lt(e){return this.token.equals(e.token)||this.logger.logWithError("lt token not equals"),this.raw.lt(e.raw)}add(e){return this.token.equals(e.token)||this.logger.logWithError("add token not equals"),new g(this.token,this.raw.add(e.raw))}subtract(e){return this.token.equals(e.token)||this.logger.logWithError("sub token not equals"),new g(this.token,this.raw.sub(e.raw))}toSignificant(e=this.token.decimals,n,i=0){return super.toSignificant(e,n,i)}toFixed(e=this.token.decimals,n,i=0){return e>this.token.decimals&&this.logger.logWithError("decimals overflow"),super.toFixed(e,n,i)}toExact(e={groupSeparator:""}){return X.DP=this.token.decimals,new X(this.numerator.toString()).div(this.denominator.toString()).toFormat(e)}};import{PublicKey as Be}from"@solana/web3.js";var $={symbol:"SOL",name:"Solana",decimals:9},N={symbol:"WSOL",name:"Wrapped SOL",mint:"So11111111111111111111111111111111111111112",decimals:9,extensions:{coingeckoId:"solana"}},it={isQuantumSOL:!0,isLp:!1,official:!0,mint:new Be(N.mint),decimals:9,symbol:"SOL",id:"sol",name:"solana",icon:"https://img.raydium.io/icon/So11111111111111111111111111111111111111112.png",extensions:{coingeckoId:"solana"}};import{PublicKey as U}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as Se}from"@solana/spl-token";import{PublicKey as s,SystemProgram as xe,SYSVAR_RENT_PUBKEY as De}from"@solana/web3.js";function E({pubkey:r,isSigner:t=!1,isWritable:e=!0}){return{pubkey:r,isWritable:e,isSigner:t}}var ct=[E({pubkey:Se,isWritable:!1}),E({pubkey:xe.programId,isWritable:!1}),E({pubkey:De,isWritable:!1})];function Z({publicKey:r,transformSol:t}){if(r instanceof s)return t&&r.equals(B)?J:r;if(t&&r===B.toBase58())return J;if(typeof r=="string")try{return new s(r)}catch{throw new Error("invalid public key")}throw new Error("invalid public key")}var pt=new s("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),lt=new s("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),dt=new s("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),gt=new s("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),ft=new s("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),bt=new s("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),ht=new s("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),Nt=new s("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),wt=new s("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),Wt=new s("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),yt=new s("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),J=new s("So11111111111111111111111111111111111111112"),B=s.default;var R=class{constructor({mint:t,decimals:e,symbol:n="UNKNOWN",name:i="UNKNOWN",skipMint:p=!1}){if(t===B.toBase58()||t instanceof U&&B.equals(t)){this.decimals=N.decimals,this.symbol=N.symbol,this.name=N.name,this.mint=new U(N.mint);return}this.decimals=e,this.symbol=n,this.name=i,this.mint=p?U.default:Z({publicKey:t})}equals(t){return this===t?!0:this.mint.equals(t.mint)}},f=R;f.WSOL=new R(N);var q=class{constructor({decimals:t,symbol:e="UNKNOWN",name:n="UNKNOWN"}){this.decimals=t,this.symbol=e,this.name=n}equals(t){return this===t}},M=q;M.SOL=new q($);var G=new o(V),S=class extends o{toSignificant(t=5,e,n){return this.mul(G).toSignificant(t,e,n)}toFixed(t=2,e,n){return this.mul(G).toFixed(t,e,n)}};var Te=d("Raydium_price"),b=class extends o{constructor(e){let{baseToken:n,quoteToken:i,numerator:p,denominator:l}=e;super(p,l);this.baseToken=n,this.quoteToken=i,this.scalar=new o(A(n.decimals),A(i.decimals))}get raw(){return new o(this.numerator,this.denominator)}get adjusted(){return super.mul(this.scalar)}invert(){return new b({baseToken:this.quoteToken,quoteToken:this.baseToken,denominator:this.numerator,numerator:this.denominator})}mul(e){this.quoteToken!==e.baseToken&&Te.logWithError("mul token not equals");let n=super.mul(e);return new b({baseToken:this.baseToken,quoteToken:e.quoteToken,denominator:n.denominator,numerator:n.numerator})}toSignificant(e=this.quoteToken.decimals,n,i){return this.adjusted.toSignificant(e,n,i)}toFixed(e=this.quoteToken.decimals,n,i){return this.adjusted.toFixed(e,n,i)}};var O=d("Raydium_bignumber"),L=(n=>(n[n.ROUND_DOWN=0]="ROUND_DOWN",n[n.ROUND_HALF_UP=1]="ROUND_HALF_UP",n[n.ROUND_UP=2]="ROUND_UP",n))(L||{}),Oe=new a(0),z=new a(1),Vt=new a(2),Qt=new a(3),er=new a(5),W=new a(10),V=new a(100),tr=new a(1e3),rr=new a(1e4),Q=9007199254740991;function m(r){if(r instanceof a)return r;if(typeof r=="string"){if(r.match(/^-?[0-9]+$/))return new a(r);O.logWithError(`invalid BigNumberish string: ${r}`)}return typeof r=="number"?(r%1&&O.logWithError(`BigNumberish number underflow: ${r}`),(r>=Q||r<=-Q)&&O.logWithError(`BigNumberish number overflow: ${r}`),new a(String(r))):typeof r=="bigint"?new a(r.toString()):(O.logWithError(`invalid BigNumberish value: ${r}`),new a(0))}function A(r){return W.pow(m(r))}function C(r){var h;if(r===void 0)return{denominator:"1",numerator:"0"};if(r instanceof a)return{numerator:r.toString(),denominator:"1"};if(r instanceof o)return{denominator:r.denominator.toString(),numerator:r.numerator.toString()};let t=String(r),[,e="",n="",i=""]=(h=t.replace(",","").match(/(-?)(\d*)\.?(\d*)/))!=null?h:[],p="1"+"0".repeat(i.length),l=e+(n==="0"?"":n)+i||"0";return{denominator:p,numerator:l,sign:e,int:n,dec:i}}function nr(r,t){let e=r.divmod(t);return e.mod.isZero()?e.div:e.div.negative!==0?e.div.isubn(1):e.div.iaddn(1)}function Pe(r){var n;let[,t="",e=""]=(n=r.toFixed(2).match(/(-?)(\d*)\.?(\d*)/))!=null?n:[];return`${t}${e}`}function Fe(r,t=0){return r instanceof a?r:new a(Pe(P(r).mul(W.pow(new a(String(t))))))}function P(r){if(r instanceof S)return new o(r.numerator,r.denominator);if(r instanceof b)return r.adjusted;if(r instanceof g)try{return P(r.toExact())}catch{return new o(Oe)}if(r instanceof o)return r;let t=String(r),e=C(t);return new o(e.numerator,e.denominator)}function or(r,t){let{numerator:e,denominator:n}=C(r);return new S(new a(e),new a(n).mul(t!=null&&t.alreadyDecimaled?new a(100):new a(1)))}function ir(r){let{token:t,numberPrice:e,decimalDone:n}=r,i=new f({mint:"",decimals:6,symbol:"usd",name:"usd",skipMint:!0}),{numerator:p,denominator:l}=C(e),h=n?new a(p).mul(W.pow(new a(t.decimals))):p,w=new a(l).mul(W.pow(new a(i.decimals)));return new b({baseToken:i,denominator:w.toString(),quoteToken:new f(H(j({},t),{skipMint:!0,mint:""})),numerator:h.toString()})}function te(r,t){if(r==null||t==null)return;let e=P(r),n=P(t);return e.mul(n)}function ee(r){let t=new f({mint:"",decimals:6,symbol:"usd",name:"usd",skipMint:!0}),e=Fe(te(r,10**t.decimals));return new g(t,e)}function ar(r,t){return ee(!t||!r?0:te(r,t))}export{V as BN_100,tr as BN_1000,rr as BN_10000,er as BN_FIVE,z as BN_ONE,W as BN_TEN,Qt as BN_THREE,Vt as BN_TWO,Oe as BN_ZERO,L as Rounding,nr as divCeil,te as mul,m as parseBigNumberish,C as parseNumberInfo,Pe as shakeFractionDecimal,A as tenExponential,Fe as toBN,P as toFraction,or as toPercent,ir as toTokenPrice,ar as toTotalPrice,ee as toUsdCurrency};
//# sourceMappingURL=bignumber.mjs.map