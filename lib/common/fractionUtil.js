var ce=Object.create;var F=Object.defineProperty;var pe=Object.getOwnPropertyDescriptor;var le=Object.getOwnPropertyNames;var de=Object.getPrototypeOf,ge=Object.prototype.hasOwnProperty;var fe=(r,e)=>{for(var n in e)F(r,n,{get:e[n],enumerable:!0})},H=(r,e,n,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of le(e))!ge.call(r,i)&&i!==n&&F(r,i,{get:()=>e[i],enumerable:!(t=pe(e,i))||t.enumerable});return r};var g=(r,e,n)=>(n=r!=null?ce(de(r)):{},H(e||!r||!r.__esModule?F(n,"default",{value:r,enumerable:!0}):n,r)),be=r=>H(F({},"__esModule",{value:!0}),r);var Ue={};fe(Ue,{default:()=>u,div:()=>Fe,eq:()=>ue,getMax:()=>Ee,gt:()=>se,gte:()=>Te,isMeaningfulNumber:()=>Pe,lt:()=>De,lte:()=>Le,sub:()=>Oe,toFractionWithDecimals:()=>Se});module.exports=be(Ue);var Q=g(require("big.js")),D=g(require("bn.js"));var a=g(require("bn.js"));var x=require("lodash"),R=g(require("dayjs")),X=g(require("dayjs/plugin/utc"));R.default.extend(X.default);var U=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:0,this.name=e.name}set level(e){this.logLevel=e}get time(){return(0,R.default)().utc().format("YYYY/MM/DD HH:mm:ss UTC")}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let n=e.map(t=>typeof t=="object"?JSON.stringify(t):t).join(", ");throw new Error(n)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},I={},he={};function p(r){let e=(0,x.get)(I,r);if(!e){let n=(0,x.get)(he,r);e=new U({name:r,logLevel:n}),(0,x.set)(I,r,e)}return e}var O=p("Raydium_bignumber");var h=new a.default(0),Z=new a.default(1),je=new a.default(2),Ke=new a.default(3),ve=new a.default(5),M=new a.default(10),$=new a.default(100),Ye=new a.default(1e3),He=new a.default(1e4),z=9007199254740991;function c(r){if(r instanceof a.default)return r;if(typeof r=="string"){if(r.match(/^-?[0-9]+$/))return new a.default(r);O.logWithError(`invalid BigNumberish string: ${r}`)}return typeof r=="number"?(r%1&&O.logWithError(`BigNumberish number underflow: ${r}`),(r>=z||r<=-z)&&O.logWithError(`BigNumberish number overflow: ${r}`),new a.default(String(r))):typeof r=="bigint"?new a.default(r.toString()):(O.logWithError(`invalid BigNumberish value: ${r}`),new a.default(0))}function q(r){return M.pow(c(r))}function A(r){var k;if(r===void 0)return{denominator:"1",numerator:"0"};if(r instanceof a.default)return{numerator:r.toString(),denominator:"1"};if(r instanceof o)return{denominator:r.denominator.toString(),numerator:r.numerator.toString()};let e=String(r),[,n="",t="",i=""]=(k=e.replace(",","").match(/(-?)(\d*)\.?(\d*)/))!=null?k:[],f="1"+"0".repeat(i.length),b=n+(t==="0"?"":t)+i||"0";return{denominator:f,numerator:b,sign:n,int:t,dec:i}}var J=g(require("toformat")),Ne=J.default,y=Ne;var B=g(require("big.js")),G=g(require("decimal.js-light"));var P=p("module/fraction"),C=y(B.default),S=y(G.default),ke={[0]:S.ROUND_DOWN,[1]:S.ROUND_HALF_UP,[2]:S.ROUND_UP},xe={[0]:B.default.roundDown,[1]:B.default.roundHalfUp,[2]:B.default.roundUp},o=class{constructor(e,n=Z){this.numerator=c(e),this.denominator=c(n)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new o(this.denominator,this.numerator)}add(e){let n=e instanceof o?e:new o(c(e));return this.denominator.eq(n.denominator)?new o(this.numerator.add(n.numerator),this.denominator):new o(this.numerator.mul(n.denominator).add(n.numerator.mul(this.denominator)),this.denominator.mul(n.denominator))}sub(e){let n=e instanceof o?e:new o(c(e));return this.denominator.eq(n.denominator)?new o(this.numerator.sub(n.numerator),this.denominator):new o(this.numerator.mul(n.denominator).sub(n.numerator.mul(this.denominator)),this.denominator.mul(n.denominator))}mul(e){let n=e instanceof o?e:new o(c(e));return new o(this.numerator.mul(n.numerator),this.denominator.mul(n.denominator))}div(e){let n=e instanceof o?e:new o(c(e));return new o(this.numerator.mul(n.denominator),this.denominator.mul(n.numerator))}toSignificant(e,n={groupSeparator:""},t=1){Number.isInteger(e)||P.logWithError(`${e} is not an integer.`),e<=0&&P.logWithError(`${e} is not positive.`),S.set({precision:e+1,rounding:ke[t]});let i=new S(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return i.toFormat(i.decimalPlaces(),n)}toFixed(e,n={groupSeparator:""},t=1){return Number.isInteger(e)||P.logWithError(`${e} is not an integer.`),e<0&&P.logWithError(`${e} is negative.`),C.DP=e,C.RM=xe[t]||1,new C(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,n)}isZero(){return this.numerator.isZero()}};var We=p("Raydium_amount"),V=y(Q.default);function ye(r,e){let n="0",t="0";if(r.includes(".")){let i=r.split(".");i.length===2?([n,t]=i,t=t.padEnd(e,"0")):We.logWithError(`invalid number string, num: ${r}`)}else n=r;return[n,t.slice(0,e)||t]}var l=class extends o{constructor(n,t,i=!0,f){let b=new D.default(0),k=M.pow(new D.default(n.decimals));if(i)b=c(t);else{let T=new D.default(0),Y=new D.default(0);if(typeof t=="string"||typeof t=="number"||typeof t=="bigint"){let[ae,me]=ye(t.toString(),n.decimals);T=c(ae),Y=c(me)}T=T.mul(k),b=T.add(Y)}super(b,k);this.logger=p(f||"Amount"),this.token=n}get raw(){return this.numerator}isZero(){return this.raw.isZero()}gt(n){return this.token.equals(n.token)||this.logger.logWithError("gt token not equals"),this.raw.gt(n.raw)}lt(n){return this.token.equals(n.token)||this.logger.logWithError("lt token not equals"),this.raw.lt(n.raw)}add(n){return this.token.equals(n.token)||this.logger.logWithError("add token not equals"),new l(this.token,this.raw.add(n.raw))}subtract(n){return this.token.equals(n.token)||this.logger.logWithError("sub token not equals"),new l(this.token,this.raw.sub(n.raw))}toSignificant(n=this.token.decimals,t,i=0){return super.toSignificant(n,t,i)}toFixed(n=this.token.decimals,t,i=0){return n>this.token.decimals&&this.logger.logWithError("decimals overflow"),super.toFixed(n,t,i)}toExact(n={groupSeparator:""}){return V.DP=this.token.decimals,new V(this.numerator.toString()).div(this.denominator.toString()).toFormat(n)}};var ee=require("@solana/web3.js"),re={symbol:"SOL",name:"Solana",decimals:9},N={symbol:"WSOL",name:"Wrapped SOL",mint:"So11111111111111111111111111111111111111112",decimals:9,extensions:{coingeckoId:"solana"}},ur={isQuantumSOL:!0,isLp:!1,official:!0,mint:new ee.PublicKey(N.mint),decimals:9,symbol:"SOL",id:"sol",name:"solana",icon:"https://img.raydium.io/icon/So11111111111111111111111111111111111111112.png",extensions:{coingeckoId:"solana"}};var E=require("@solana/web3.js");var te=require("@solana/spl-token"),s=require("@solana/web3.js");function _({pubkey:r,isSigner:e=!1,isWritable:n=!0}){return{pubkey:r,isWritable:n,isSigner:e}}var cr=[_({pubkey:te.TOKEN_PROGRAM_ID,isWritable:!1}),_({pubkey:s.SystemProgram.programId,isWritable:!1}),_({pubkey:s.SYSVAR_RENT_PUBKEY,isWritable:!1})];function oe({publicKey:r,transformSol:e}){if(r instanceof s.PublicKey)return e&&r.equals(L)?ne:r;if(e&&r===L.toBase58())return ne;if(typeof r=="string")try{return new s.PublicKey(r)}catch{throw new Error("invalid public key")}throw new Error("invalid public key")}var pr=new s.PublicKey("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),lr=new s.PublicKey("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),dr=new s.PublicKey("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),gr=new s.PublicKey("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),fr=new s.PublicKey("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),br=new s.PublicKey("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),hr=new s.PublicKey("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),Nr=new s.PublicKey("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),wr=new s.PublicKey("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),kr=new s.PublicKey("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),xr=new s.PublicKey("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),ne=new s.PublicKey("So11111111111111111111111111111111111111112"),L=s.PublicKey.default;var j=class{constructor({mint:e,decimals:n,symbol:t="UNKNOWN",name:i="UNKNOWN",skipMint:f=!1}){if(e===L.toBase58()||e instanceof E.PublicKey&&L.equals(e)){this.decimals=N.decimals,this.symbol=N.symbol,this.name=N.name,this.mint=new E.PublicKey(N.mint);return}this.decimals=n,this.symbol=t,this.name=i,this.mint=f?E.PublicKey.default:oe({publicKey:e})}equals(e){return this===e?!0:this.mint.equals(e.mint)}},W=j;W.WSOL=new j(N);var v=class{constructor({decimals:e,symbol:n="UNKNOWN",name:t="UNKNOWN"}){this.decimals=e,this.symbol=n,this.name=t}equals(e){return this===e}},K=v;K.SOL=new v(re);var ie=new o($),w=class extends o{toSignificant(e=5,n,t){return this.mul(ie).toSignificant(e,n,t)}toFixed(e=2,n,t){return this.mul(ie).toFixed(e,n,t)}};var Be=p("Raydium_price"),d=class extends o{constructor(n){let{baseToken:t,quoteToken:i,numerator:f,denominator:b}=n;super(f,b);this.baseToken=t,this.quoteToken=i,this.scalar=new o(q(t.decimals),q(i.decimals))}get raw(){return new o(this.numerator,this.denominator)}get adjusted(){return super.mul(this.scalar)}invert(){return new d({baseToken:this.quoteToken,quoteToken:this.baseToken,denominator:this.numerator,numerator:this.denominator})}mul(n){this.quoteToken!==n.baseToken&&Be.logWithError("mul token not equals");let t=super.mul(n);return new d({baseToken:this.baseToken,quoteToken:n.quoteToken,denominator:t.denominator,numerator:t.numerator})}toSignificant(n=this.quoteToken.decimals,t,i){return this.adjusted.toSignificant(n,t,i)}toFixed(n=this.quoteToken.decimals,t,i){return this.adjusted.toFixed(n,t,i)}};function u(r){if(r instanceof w)return new o(r.numerator,r.denominator);if(r instanceof d)return r.adjusted;if(r instanceof l)try{return u(r.toExact())}catch{return new o(h)}if(r instanceof o)return r;let e=String(r),n=A(e);return new o(n.numerator,n.denominator)}function Se(r){var t;if(r instanceof w)return{fr:new o(r.numerator,r.denominator)};if(r instanceof d)return{fr:r.adjusted};if(r instanceof l)return{fr:u(r.toExact()),decimals:r.token.decimals};if(r instanceof o)return{fr:r};let e=String(r),n=A(e);return{fr:new o(n.numerator,n.denominator),decimals:(t=n.dec)==null?void 0:t.length}}function De(r,e){if(r==null||e==null)return!1;let n=u(r),t=u(e);return n.sub(t).numerator,n.sub(t).numerator.lt(h)}function se(r,e){if(r==null||e==null)return!1;let n=u(r),t=u(e);return n.sub(t).numerator.gt(h)}function Le(r,e){if(r==null||e==null)return!1;let n=u(r),t=u(e);return n.sub(t).numerator.lte(h)}function Te(r,e){if(r==null||e==null)return!1;let n=u(r),t=u(e);return n.sub(t).numerator.gte(h)}function ue(r,e){if(r==null||e==null)return!1;let n=u(r),t=u(e);return n.sub(t).numerator.eq(h)}function Fe(r,e){if(r==null||e==null)return;let n=u(r),t=u(e);try{return n.div(t)}catch{return n}}function Oe(r,e){if(r==null||e==null)return;let n=u(r),t=u(e);return n.sub(t)}function Pe(r){return r==null?!1:!ue(r,0)}function Ee(r,e){return se(e,r)?e:r}0&&(module.exports={div,eq,getMax,gt,gte,isMeaningfulNumber,lt,lte,sub,toFractionWithDecimals});
//# sourceMappingURL=fractionUtil.js.map