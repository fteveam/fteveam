var ue=Object.create;var D=Object.defineProperty;var ce=Object.getOwnPropertyDescriptor;var pe=Object.getOwnPropertyNames;var le=Object.getPrototypeOf,ge=Object.prototype.hasOwnProperty;var de=(t,e)=>{for(var r in e)D(t,r,{get:e[r],enumerable:!0})},j=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of pe(e))!ge.call(t,i)&&i!==r&&D(t,i,{get:()=>e[i],enumerable:!(n=ce(e,i))||n.enumerable});return t};var c=(t,e,r)=>(r=t!=null?ue(le(t)):{},j(e||!t||!t.__esModule?D(r,"default",{value:t,enumerable:!0}):r,t)),fe=t=>j(D({},"__esModule",{value:!0}),t);var Le={};de(Le,{getTimestamp:()=>Se,jsonInfo2PoolKeys:()=>C,sleep:()=>xe});module.exports=fe(Le);var ie=require("@solana/web3.js"),se=c(require("bn.js"));var G=c(require("big.js")),B=c(require("bn.js"));var a=c(require("bn.js"));var N=require("lodash"),F=c(require("dayjs")),H=c(require("dayjs/plugin/utc"));F.default.extend(H.default);var O=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:0,this.name=e.name}set level(e){this.logLevel=e}get time(){return(0,F.default)().utc().format("YYYY/MM/DD HH:mm:ss UTC")}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let r=e.map(n=>typeof n=="object"?JSON.stringify(n):n).join(", ");throw new Error(r)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},Y={},be={};function p(t){let e=(0,N.get)(Y,t);if(!e){let r=(0,N.get)(be,t);e=new O({name:t,logLevel:r}),(0,N.set)(Y,t,e)}return e}var T=p("Raydium_bignumber");var Me=new a.default(0),X=new a.default(1),ve=new a.default(2),qe=new a.default(3),Ae=new a.default(5),E=new a.default(10),z=new a.default(100),Ce=new a.default(1e3),Ke=new a.default(1e4),I=9007199254740991;function u(t){if(t instanceof a.default)return t;if(typeof t=="string"){if(t.match(/^-?[0-9]+$/))return new a.default(t);T.logWithError(`invalid BigNumberish string: ${t}`)}return typeof t=="number"?(t%1&&T.logWithError(`BigNumberish number underflow: ${t}`),(t>=I||t<=-I)&&T.logWithError(`BigNumberish number overflow: ${t}`),new a.default(String(t))):typeof t=="bigint"?new a.default(t.toString()):(T.logWithError(`invalid BigNumberish value: ${t}`),new a.default(0))}function U(t){return E.pow(u(t))}var $=c(require("toformat")),he=$.default,y=he;var k=c(require("big.js")),J=c(require("decimal.js-light"));var L=p("module/fraction"),R=y(k.default),W=y(J.default),we={[0]:W.ROUND_DOWN,[1]:W.ROUND_HALF_UP,[2]:W.ROUND_UP},ye={[0]:k.default.roundDown,[1]:k.default.roundHalfUp,[2]:k.default.roundUp},o=class{constructor(e,r=X){this.numerator=u(e),this.denominator=u(r)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new o(this.denominator,this.numerator)}add(e){let r=e instanceof o?e:new o(u(e));return this.denominator.eq(r.denominator)?new o(this.numerator.add(r.numerator),this.denominator):new o(this.numerator.mul(r.denominator).add(r.numerator.mul(this.denominator)),this.denominator.mul(r.denominator))}sub(e){let r=e instanceof o?e:new o(u(e));return this.denominator.eq(r.denominator)?new o(this.numerator.sub(r.numerator),this.denominator):new o(this.numerator.mul(r.denominator).sub(r.numerator.mul(this.denominator)),this.denominator.mul(r.denominator))}mul(e){let r=e instanceof o?e:new o(u(e));return new o(this.numerator.mul(r.numerator),this.denominator.mul(r.denominator))}div(e){let r=e instanceof o?e:new o(u(e));return new o(this.numerator.mul(r.denominator),this.denominator.mul(r.numerator))}toSignificant(e,r={groupSeparator:""},n=1){Number.isInteger(e)||L.logWithError(`${e} is not an integer.`),e<=0&&L.logWithError(`${e} is not positive.`),W.set({precision:e+1,rounding:we[n]});let i=new W(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return i.toFormat(i.decimalPlaces(),r)}toFixed(e,r={groupSeparator:""},n=1){return Number.isInteger(e)||L.logWithError(`${e} is not an integer.`),e<0&&L.logWithError(`${e} is negative.`),R.DP=e,R.RM=ye[n]||1,new R(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,r)}isZero(){return this.numerator.isZero()}};var ke=p("Raydium_amount"),Z=y(G.default);function We(t,e){let r="0",n="0";if(t.includes(".")){let i=t.split(".");i.length===2?([r,n]=i,n=n.padEnd(e,"0")):ke.logWithError(`invalid number string, num: ${t}`)}else r=t;return[r,n.slice(0,e)||n]}var l=class extends o{constructor(r,n,i=!0,b){let h=new B.default(0),K=E.pow(new B.default(r.decimals));if(i)h=u(n);else{let S=new B.default(0),_=new B.default(0);if(typeof n=="string"||typeof n=="number"||typeof n=="bigint"){let[ae,me]=We(n.toString(),r.decimals);S=u(ae),_=u(me)}S=S.mul(K),h=S.add(_)}super(h,K);this.logger=p(b||"Amount"),this.token=r}get raw(){return this.numerator}isZero(){return this.raw.isZero()}gt(r){return this.token.equals(r.token)||this.logger.logWithError("gt token not equals"),this.raw.gt(r.raw)}lt(r){return this.token.equals(r.token)||this.logger.logWithError("lt token not equals"),this.raw.lt(r.raw)}add(r){return this.token.equals(r.token)||this.logger.logWithError("add token not equals"),new l(this.token,this.raw.add(r.raw))}subtract(r){return this.token.equals(r.token)||this.logger.logWithError("sub token not equals"),new l(this.token,this.raw.sub(r.raw))}toSignificant(r=this.token.decimals,n,i=0){return super.toSignificant(r,n,i)}toFixed(r=this.token.decimals,n,i=0){return r>this.token.decimals&&this.logger.logWithError("decimals overflow"),super.toFixed(r,n,i)}toExact(r={groupSeparator:""}){return Z.DP=this.token.decimals,new Z(this.numerator.toString()).div(this.denominator.toString()).toFormat(r)}};var V=require("@solana/web3.js"),Q={symbol:"SOL",name:"Solana",decimals:9},f={symbol:"WSOL",name:"Wrapped SOL",mint:"So11111111111111111111111111111111111111112",decimals:9,extensions:{coingeckoId:"solana"}},nr={isQuantumSOL:!0,isLp:!1,official:!0,mint:new V.PublicKey(f.mint),decimals:9,symbol:"SOL",id:"sol",name:"solana",icon:"https://img.raydium.io/icon/So11111111111111111111111111111111111111112.png",extensions:{coingeckoId:"solana"}};var P=require("@solana/web3.js");var re=require("@solana/spl-token"),s=require("@solana/web3.js");function M({pubkey:t,isSigner:e=!1,isWritable:r=!0}){return{pubkey:t,isWritable:r,isSigner:e}}var sr=[M({pubkey:re.TOKEN_PROGRAM_ID,isWritable:!1}),M({pubkey:s.SystemProgram.programId,isWritable:!1}),M({pubkey:s.SYSVAR_RENT_PUBKEY,isWritable:!1})];function te({publicKey:t,transformSol:e}){if(t instanceof s.PublicKey)return e&&t.equals(x)?ee:t;if(e&&t===x.toBase58())return ee;if(typeof t=="string")try{return new s.PublicKey(t)}catch{throw new Error("invalid public key")}throw new Error("invalid public key")}function ne(t){try{return new s.PublicKey(t)}catch{return t}}var ar=new s.PublicKey("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),mr=new s.PublicKey("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),ur=new s.PublicKey("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),cr=new s.PublicKey("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),pr=new s.PublicKey("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),lr=new s.PublicKey("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),gr=new s.PublicKey("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),dr=new s.PublicKey("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),fr=new s.PublicKey("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),br=new s.PublicKey("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),hr=new s.PublicKey("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),ee=new s.PublicKey("So11111111111111111111111111111111111111112"),x=s.PublicKey.default;var v=class{constructor({mint:e,decimals:r,symbol:n="UNKNOWN",name:i="UNKNOWN",skipMint:b=!1}){if(e===x.toBase58()||e instanceof P.PublicKey&&x.equals(e)){this.decimals=f.decimals,this.symbol=f.symbol,this.name=f.name,this.mint=new P.PublicKey(f.mint);return}this.decimals=r,this.symbol=n,this.name=i,this.mint=b?P.PublicKey.default:te({publicKey:e})}equals(e){return this===e?!0:this.mint.equals(e.mint)}},d=v;d.WSOL=new v(f);var A=class{constructor({decimals:e,symbol:r="UNKNOWN",name:n="UNKNOWN"}){this.decimals=e,this.symbol=r,this.name=n}equals(e){return this===e}},q=A;q.SOL=new A(Q);var oe=new o(z),w=class extends o{toSignificant(e=5,r,n){return this.mul(oe).toSignificant(e,r,n)}toFixed(e=2,r,n){return this.mul(oe).toFixed(e,r,n)}};var Be=p("Raydium_price"),g=class extends o{constructor(r){let{baseToken:n,quoteToken:i,numerator:b,denominator:h}=r;super(b,h);this.baseToken=n,this.quoteToken=i,this.scalar=new o(U(n.decimals),U(i.decimals))}get raw(){return new o(this.numerator,this.denominator)}get adjusted(){return super.mul(this.scalar)}invert(){return new g({baseToken:this.quoteToken,quoteToken:this.baseToken,denominator:this.numerator,numerator:this.denominator})}mul(r){this.quoteToken!==r.baseToken&&Be.logWithError("mul token not equals");let n=super.mul(r);return new g({baseToken:this.baseToken,quoteToken:r.quoteToken,denominator:n.denominator,numerator:n.numerator})}toSignificant(r=this.quoteToken.decimals,n,i){return this.adjusted.toSignificant(r,n,i)}toFixed(r=this.quoteToken.decimals,n,i){return this.adjusted.toFixed(r,n,i)}};async function xe(t){new Promise(e=>setTimeout(e,t))}function Se(){return new Date().getTime()}var De=[d,l,ie.PublicKey,o,se.default,g,w];function Te(t){return typeof t=="object"&&t!==null&&!De.some(e=>typeof e=="object"&&t instanceof e)}function C(t){return typeof t=="string"?ne(t):Array.isArray(t)?t.map(e=>C(e)):Te(t)?Object.fromEntries(Object.entries(t).map(([e,r])=>[e,C(r)])):t}0&&(module.exports={getTimestamp,jsonInfo2PoolKeys,sleep});
//# sourceMappingURL=utility.js.map