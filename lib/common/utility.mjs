import{PublicKey as be}from"@solana/web3.js";import he from"bn.js";import me from"big.js";import D from"bn.js";import a from"bn.js";import{get as A,set as Q}from"lodash";import K from"dayjs";import ee from"dayjs/plugin/utc";K.extend(ee);var T=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:3,this.name=e.name}set level(e){this.logLevel=e}get time(){return K().utc().format("YYYY/MM/DD HH:mm:ss UTC")}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let r=e.map(n=>typeof n=="object"?JSON.stringify(n):n).join(", ");throw new Error(r)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},C={},re={};function p(t){let e=A(C,t);if(!e){let r=A(re,t);e=new T({name:t,logLevel:r}),Q(C,t,e)}return e}var B=p("Raydium_bignumber");var Oe=new a(0),j=new a(1),Fe=new a(2),Ee=new a(3),Ue=new a(5),L=new a(10),Y=new a(100),Re=new a(1e3),Me=new a(1e4),_=9007199254740991;function c(t){if(t instanceof a)return t;if(typeof t=="string"){if(t.match(/^-?[0-9]+$/))return new a(t);B.logWithError(`invalid BigNumberish string: ${t}`)}return typeof t=="number"?(t%1&&B.logWithError(`BigNumberish number underflow: ${t}`),(t>=_||t<=-_)&&B.logWithError(`BigNumberish number overflow: ${t}`),new a(String(t))):typeof t=="bigint"?new a(t.toString()):(B.logWithError(`invalid BigNumberish value: ${t}`),new a(0))}function P(t){return L.pow(c(t))}import te from"toformat";var ne=te,w=ne;import S from"big.js";import ie from"decimal.js-light";var x=p("module/fraction"),O=w(S),y=w(ie),se={[0]:y.ROUND_DOWN,[1]:y.ROUND_HALF_UP,[2]:y.ROUND_UP},ae={[0]:S.roundDown,[1]:S.roundHalfUp,[2]:S.roundUp},o=class{constructor(e,r=j){this.numerator=c(e),this.denominator=c(r)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new o(this.denominator,this.numerator)}add(e){let r=e instanceof o?e:new o(c(e));return this.denominator.eq(r.denominator)?new o(this.numerator.add(r.numerator),this.denominator):new o(this.numerator.mul(r.denominator).add(r.numerator.mul(this.denominator)),this.denominator.mul(r.denominator))}sub(e){let r=e instanceof o?e:new o(c(e));return this.denominator.eq(r.denominator)?new o(this.numerator.sub(r.numerator),this.denominator):new o(this.numerator.mul(r.denominator).sub(r.numerator.mul(this.denominator)),this.denominator.mul(r.denominator))}mul(e){let r=e instanceof o?e:new o(c(e));return new o(this.numerator.mul(r.numerator),this.denominator.mul(r.denominator))}div(e){let r=e instanceof o?e:new o(c(e));return new o(this.numerator.mul(r.denominator),this.denominator.mul(r.numerator))}toSignificant(e,r={groupSeparator:""},n=1){Number.isInteger(e)||x.logWithError(`${e} is not an integer.`),e<=0&&x.logWithError(`${e} is not positive.`),y.set({precision:e+1,rounding:se[n]});let i=new y(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return i.toFormat(i.decimalPlaces(),r)}toFixed(e,r={groupSeparator:""},n=1){return Number.isInteger(e)||x.logWithError(`${e} is not an integer.`),e<0&&x.logWithError(`${e} is negative.`),O.DP=e,O.RM=ae[n]||1,new O(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,r)}isZero(){return this.numerator.isZero()}};var ue=p("Raydium_amount"),H=w(me);function ce(t,e){let r="0",n="0";if(t.includes(".")){let i=t.split(".");i.length===2?([r,n]=i,n=n.padEnd(e,"0")):ue.logWithError(`invalid number string, num: ${t}`)}else r=t;return[r,n.slice(0,e)||n]}var l=class extends o{constructor(r,n,i=!0,b){let h=new D(0),v=L.pow(new D(r.decimals));if(i)h=c(n);else{let W=new D(0),q=new D(0);if(typeof n=="string"||typeof n=="number"||typeof n=="bigint"){let[G,V]=ce(n.toString(),r.decimals);W=c(G),q=c(V)}W=W.mul(v),h=W.add(q)}super(h,v);this.logger=p(b||"Amount"),this.token=r}get raw(){return this.numerator}isZero(){return this.raw.isZero()}gt(r){return this.token.equals(r.token)||this.logger.logWithError("gt token not equals"),this.raw.gt(r.raw)}lt(r){return this.token.equals(r.token)||this.logger.logWithError("lt token not equals"),this.raw.lt(r.raw)}add(r){return this.token.equals(r.token)||this.logger.logWithError("add token not equals"),new l(this.token,this.raw.add(r.raw))}subtract(r){return this.token.equals(r.token)||this.logger.logWithError("sub token not equals"),new l(this.token,this.raw.sub(r.raw))}toSignificant(r=this.token.decimals,n,i=0){return super.toSignificant(r,n,i)}toFixed(r=this.token.decimals,n,i=0){return r>this.token.decimals&&this.logger.logWithError("decimals overflow"),super.toFixed(r,n,i)}toExact(r={groupSeparator:""}){return H.DP=this.token.decimals,new H(this.numerator.toString()).div(this.denominator.toString()).toFormat(r)}};import{PublicKey as pe}from"@solana/web3.js";var I={symbol:"SOL",name:"Solana",decimals:9},f={symbol:"WSOL",name:"Wrapped SOL",mint:"So11111111111111111111111111111111111111112",decimals:9,extensions:{coingeckoId:"solana"}},or={isQuantumSOL:!0,isLp:!1,official:!0,mint:new pe(f.mint),decimals:9,symbol:"SOL",id:"sol",name:"solana",icon:"https://img.raydium.io/icon/So11111111111111111111111111111111111111112.png",extensions:{coingeckoId:"solana"}};import{PublicKey as E}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as le}from"@solana/spl-token";import{PublicKey as s,SystemProgram as ge,SYSVAR_RENT_PUBKEY as de}from"@solana/web3.js";function F({pubkey:t,isSigner:e=!1,isWritable:r=!0}){return{pubkey:t,isWritable:r,isSigner:e}}var ur=[F({pubkey:le,isWritable:!1}),F({pubkey:ge.programId,isWritable:!1}),F({pubkey:de,isWritable:!1})];function z({publicKey:t,transformSol:e}){if(t instanceof s)return e&&t.equals(k)?X:t;if(e&&t===k.toBase58())return X;if(typeof t=="string")try{return new s(t)}catch{throw new Error("invalid public key")}throw new Error("invalid public key")}function $(t){try{return new s(t)}catch{return t}}var cr=new s("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),pr=new s("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),lr=new s("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),gr=new s("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),dr=new s("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),fr=new s("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),br=new s("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),hr=new s("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),Nr=new s("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),wr=new s("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),yr=new s("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),X=new s("So11111111111111111111111111111111111111112"),k=s.default;var U=class{constructor({mint:e,decimals:r,symbol:n="UNKNOWN",name:i="UNKNOWN",skipMint:b=!1}){if(e===k.toBase58()||e instanceof E&&k.equals(e)){this.decimals=f.decimals,this.symbol=f.symbol,this.name=f.name,this.mint=new E(f.mint);return}this.decimals=r,this.symbol=n,this.name=i,this.mint=b?E.default:z({publicKey:e})}equals(e){return this===e?!0:this.mint.equals(e.mint)}},d=U;d.WSOL=new U(f);var M=class{constructor({decimals:e,symbol:r="UNKNOWN",name:n="UNKNOWN"}){this.decimals=e,this.symbol=r,this.name=n}equals(e){return this===e}},R=M;R.SOL=new M(I);var J=new o(Y),N=class extends o{toSignificant(e=5,r,n){return this.mul(J).toSignificant(e,r,n)}toFixed(e=2,r,n){return this.mul(J).toFixed(e,r,n)}};var fe=p("Raydium_price"),g=class extends o{constructor(r){let{baseToken:n,quoteToken:i,numerator:b,denominator:h}=r;super(b,h);this.baseToken=n,this.quoteToken=i,this.scalar=new o(P(n.decimals),P(i.decimals))}get raw(){return new o(this.numerator,this.denominator)}get adjusted(){return super.mul(this.scalar)}invert(){return new g({baseToken:this.quoteToken,quoteToken:this.baseToken,denominator:this.numerator,numerator:this.denominator})}mul(r){this.quoteToken!==r.baseToken&&fe.logWithError("mul token not equals");let n=super.mul(r);return new g({baseToken:this.baseToken,quoteToken:r.quoteToken,denominator:n.denominator,numerator:n.numerator})}toSignificant(r=this.quoteToken.decimals,n,i){return this.adjusted.toSignificant(r,n,i)}toFixed(r=this.quoteToken.decimals,n,i){return this.adjusted.toFixed(r,n,i)}};async function Vr(t){new Promise(e=>setTimeout(e,t))}function Qr(){return new Date().getTime()}var Ne=[d,l,be,o,he,g,N];function we(t){return typeof t=="object"&&t!==null&&!Ne.some(e=>typeof e=="object"&&t instanceof e)}function Z(t){return typeof t=="string"?$(t):Array.isArray(t)?t.map(e=>Z(e)):we(t)?Object.fromEntries(Object.entries(t).map(([e,r])=>[e,Z(r)])):t}export{Qr as getTimestamp,Z as jsonInfo2PoolKeys,Vr as sleep};
//# sourceMappingURL=utility.mjs.map