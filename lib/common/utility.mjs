import{PublicKey as he}from"@solana/web3.js";import Ne from"bn.js";import ue from"big.js";import D from"bn.js";import s from"bn.js";import{get as A,set as G}from"lodash";import V from"pino";import Q from"pino-pretty";var C={},ee={},te=Q({colorize:!0,levelFirst:!0,translateTime:"SYS:yyyymmdd HH:MM:ss.l"}),re=V({base:null,level:"silent"},te);function p(r){let t=A(C,r);if(!t){let e=A(ee,r);t=re.child({name:r},{level:e}),G(C,r,t)}return t.logWithError=(...e)=>{let n=e.map(i=>typeof i=="object"?JSON.stringify(i):i).join(", ");throw new Error(n)},t}var B=p("Raydium_bignumber");var Re=new s(0),v=new s(1),Ue=new s(2),Me=new s(3),qe=new s(5),T=new s(10),_=new s(100),Ae=new s(1e3),Ce=new s(1e4),K=9007199254740991;function c(r){if(r instanceof s)return r;if(typeof r=="string"){if(r.match(/^-?[0-9]+$/))return new s(r);B.logWithError(`invalid BigNumberish string: ${r}`)}return typeof r=="number"?(r%1&&B.logWithError(`BigNumberish number underflow: ${r}`),(r>=K||r<=-K)&&B.logWithError(`BigNumberish number overflow: ${r}`),new s(String(r))):typeof r=="bigint"?new s(r.toString()):(B.logWithError(`invalid BigNumberish value: ${r}`),new s(0))}function P(r){return T.pow(c(r))}import ne from"toformat";var oe=ne,y=oe;import S from"big.js";import ae from"decimal.js-light";var x=p("module/fraction"),O=y(S),w=y(ae),se={[0]:w.ROUND_DOWN,[1]:w.ROUND_HALF_UP,[2]:w.ROUND_UP},me={[0]:S.roundDown,[1]:S.roundHalfUp,[2]:S.roundUp},o=class{constructor(t,e=v){this.numerator=c(t),this.denominator=c(e)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new o(this.denominator,this.numerator)}add(t){let e=t instanceof o?t:new o(c(t));return this.denominator.eq(e.denominator)?new o(this.numerator.add(e.numerator),this.denominator):new o(this.numerator.mul(e.denominator).add(e.numerator.mul(this.denominator)),this.denominator.mul(e.denominator))}sub(t){let e=t instanceof o?t:new o(c(t));return this.denominator.eq(e.denominator)?new o(this.numerator.sub(e.numerator),this.denominator):new o(this.numerator.mul(e.denominator).sub(e.numerator.mul(this.denominator)),this.denominator.mul(e.denominator))}mul(t){let e=t instanceof o?t:new o(c(t));return new o(this.numerator.mul(e.numerator),this.denominator.mul(e.denominator))}div(t){let e=t instanceof o?t:new o(c(t));return new o(this.numerator.mul(e.denominator),this.denominator.mul(e.numerator))}toSignificant(t,e={groupSeparator:""},n=1){Number.isInteger(t)||x.logWithError(`${t} is not an integer.`),t<=0&&x.logWithError(`${t} is not positive.`),w.set({precision:t+1,rounding:se[n]});let i=new w(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(t);return i.toFormat(i.decimalPlaces(),e)}toFixed(t,e={groupSeparator:""},n=1){return Number.isInteger(t)||x.logWithError(`${t} is not an integer.`),t<0&&x.logWithError(`${t} is negative.`),O.DP=t,O.RM=me[n]||1,new O(this.numerator.toString()).div(this.denominator.toString()).toFormat(t,e)}isZero(){return this.numerator.isZero()}};var ce=p("Raydium_amount"),j=y(ue);function pe(r,t){let e="0",n="0";if(r.includes(".")){let i=r.split(".");i.length===2?([e,n]=i,n=n.padEnd(t,"0")):ce.logWithError(`invalid number string, num: ${r}`)}else e=r;return[e,n.slice(0,t)||n]}var l=class extends o{constructor(e,n,i=!0,b){let h=new D(0),M=T.pow(new D(e.decimals));if(i)h=c(n);else{let W=new D(0),q=new D(0);if(typeof n=="string"||typeof n=="number"||typeof n=="bigint"){let[J,Z]=pe(n.toString(),e.decimals);W=c(J),q=c(Z)}W=W.mul(M),h=W.add(q)}super(h,M);this.logger=p(b||"Amount"),this.token=e}get raw(){return this.numerator}isZero(){return this.raw.isZero()}gt(e){return this.token.equals(e.token)||this.logger.logWithError("gt token not equals"),this.raw.gt(e.raw)}lt(e){return this.token.equals(e.token)||this.logger.logWithError("lt token not equals"),this.raw.lt(e.raw)}add(e){return this.token.equals(e.token)||this.logger.logWithError("add token not equals"),new l(this.token,this.raw.add(e.raw))}subtract(e){return this.token.equals(e.token)||this.logger.logWithError("sub token not equals"),new l(this.token,this.raw.sub(e.raw))}toSignificant(e=this.token.decimals,n,i=0){return super.toSignificant(e,n,i)}toFixed(e=this.token.decimals,n,i=0){return e>this.token.decimals&&this.logger.logWithError("decimals overflow"),super.toFixed(e,n,i)}toExact(e={groupSeparator:""}){return j.DP=this.token.decimals,new j(this.numerator.toString()).div(this.denominator.toString()).toFormat(e)}};import{PublicKey as le}from"@solana/web3.js";var H={symbol:"SOL",name:"Solana",decimals:9},f={symbol:"WSOL",name:"Wrapped SOL",mint:"So11111111111111111111111111111111111111112",decimals:9,extensions:{coingeckoId:"solana"}},st={isQuantumSOL:!0,isLp:!1,official:!0,mint:new le(f.mint),decimals:9,symbol:"SOL",id:"sol",name:"solana",icon:"https://img.raydium.io/icon/So11111111111111111111111111111111111111112.png",extensions:{coingeckoId:"solana"}};import{PublicKey as L}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as de}from"@solana/spl-token";import{PublicKey as a,SystemProgram as ge,SYSVAR_RENT_PUBKEY as fe}from"@solana/web3.js";function F({pubkey:r,isSigner:t=!1,isWritable:e=!0}){return{pubkey:r,isWritable:e,isSigner:t}}var lt=[F({pubkey:de,isWritable:!1}),F({pubkey:ge.programId,isWritable:!1}),F({pubkey:fe,isWritable:!1})];function I({publicKey:r,transformSol:t}){if(r instanceof a)return t&&r.equals(k)?Y:r;if(t&&r===k.toBase58())return Y;if(typeof r=="string")try{return new a(r)}catch{throw new Error("invalid public key")}throw new Error("invalid public key")}function z(r){try{return new a(r)}catch{return r}}var dt=new a("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),gt=new a("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),ft=new a("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),bt=new a("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),ht=new a("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),Nt=new a("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),yt=new a("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),wt=new a("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),kt=new a("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),Wt=new a("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),Bt=new a("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),Y=new a("So11111111111111111111111111111111111111112"),k=a.default;var E=class{constructor({mint:t,decimals:e,symbol:n="UNKNOWN",name:i="UNKNOWN",skipMint:b=!1}){if(t===k.toBase58()||t instanceof L&&k.equals(t)){this.decimals=f.decimals,this.symbol=f.symbol,this.name=f.name,this.mint=new L(f.mint);return}this.decimals=e,this.symbol=n,this.name=i,this.mint=b?L.default:I({publicKey:t})}equals(t){return this===t?!0:this.mint.equals(t.mint)}},g=E;g.WSOL=new E(f);var U=class{constructor({decimals:t,symbol:e="UNKNOWN",name:n="UNKNOWN"}){this.decimals=t,this.symbol=e,this.name=n}equals(t){return this===t}},R=U;R.SOL=new U(H);var X=new o(_),N=class extends o{toSignificant(t=5,e,n){return this.mul(X).toSignificant(t,e,n)}toFixed(t=2,e,n){return this.mul(X).toFixed(t,e,n)}};var be=p("Raydium_price"),d=class extends o{constructor(e){let{baseToken:n,quoteToken:i,numerator:b,denominator:h}=e;super(b,h);this.baseToken=n,this.quoteToken=i,this.scalar=new o(P(n.decimals),P(i.decimals))}get raw(){return new o(this.numerator,this.denominator)}get adjusted(){return super.mul(this.scalar)}invert(){return new d({baseToken:this.quoteToken,quoteToken:this.baseToken,denominator:this.numerator,numerator:this.denominator})}mul(e){this.quoteToken!==e.baseToken&&be.logWithError("mul token not equals");let n=super.mul(e);return new d({baseToken:this.baseToken,quoteToken:e.quoteToken,denominator:n.denominator,numerator:n.numerator})}toSignificant(e=this.quoteToken.decimals,n,i){return this.adjusted.toSignificant(e,n,i)}toFixed(e=this.quoteToken.decimals,n,i){return this.adjusted.toFixed(e,n,i)}};async function tr(r){new Promise(t=>setTimeout(t,r))}function rr(){return new Date().getTime()}var ye=[g,l,he,o,Ne,d,N];function we(r){return typeof r=="object"&&r!==null&&!ye.some(t=>typeof t=="object"&&r instanceof t)}function $(r){return typeof r=="string"?z(r):Array.isArray(r)?r.map(t=>$(t)):we(r)?Object.fromEntries(Object.entries(r).map(([t,e])=>[t,$(e)])):r}export{rr as getTimestamp,$ as jsonInfo2PoolKeys,tr as sleep};
//# sourceMappingURL=utility.mjs.map