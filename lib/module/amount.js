var te=Object.create;var y=Object.defineProperty;var ne=Object.getOwnPropertyDescriptor;var oe=Object.getOwnPropertyNames;var ie=Object.getPrototypeOf,se=Object.prototype.hasOwnProperty;var ae=(t,e)=>{for(var r in e)y(t,r,{get:e[r],enumerable:!0})},q=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of oe(e))!se.call(t,s)&&s!==r&&y(t,s,{get:()=>e[s],enumerable:!(n=ne(e,s))||n.enumerable});return t};var p=(t,e,r)=>(r=t!=null?te(ie(t)):{},q(e||!t||!t.__esModule?y(r,"default",{value:t,enumerable:!0}):r,t)),me=t=>q(y({},"__esModule",{value:!0}),t);var fe={};ae(fe,{TokenAmount:()=>g,splitNumber:()=>Q});module.exports=me(fe);var V=p(require("big.js")),k=p(require("bn.js"));var a=p(require("bn.js"));var C=require("@solana/web3.js"),A={symbol:"SOL",name:"Solana",decimals:9},l={symbol:"WSOL",name:"Wrapped SOL",mint:"So11111111111111111111111111111111111111112",decimals:9,extensions:{coingeckoId:"solana"}},he={isQuantumSOL:!0,isLp:!1,official:!0,mint:new C.PublicKey(l.mint),decimals:9,symbol:"SOL",id:"sol",name:"solana",icon:"https://img.raydium.io/icon/So11111111111111111111111111111111111111112.png",extensions:{coingeckoId:"solana"}};var B=require("@solana/web3.js");var K=require("@solana/spl-token"),i=require("@solana/web3.js");function T({pubkey:t,isSigner:e=!1,isWritable:r=!0}){return{pubkey:t,isWritable:r,isSigner:e}}var ke=[T({pubkey:K.TOKEN_PROGRAM_ID,isWritable:!1}),T({pubkey:i.SystemProgram.programId,isWritable:!1}),T({pubkey:i.SYSVAR_RENT_PUBKEY,isWritable:!1})];function j({publicKey:t,transformSol:e}){if(t instanceof i.PublicKey)return e&&t.equals(d)?_:t;if(e&&t===d.toBase58())return _;if(typeof t=="string")try{return new i.PublicKey(t)}catch{throw new Error("invalid public key")}throw new Error("invalid public key")}var We=new i.PublicKey("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),ye=new i.PublicKey("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),Be=new i.PublicKey("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),xe=new i.PublicKey("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),Se=new i.PublicKey("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),De=new i.PublicKey("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),Le=new i.PublicKey("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),Te=new i.PublicKey("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),Oe=new i.PublicKey("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),Pe=new i.PublicKey("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),Fe=new i.PublicKey("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),_=new i.PublicKey("So11111111111111111111111111111111111111112"),d=i.PublicKey.default;var O=class{constructor({mint:e,decimals:r,symbol:n="UNKNOWN",name:s="UNKNOWN",skipMint:D=!1}){if(e===d.toBase58()||e instanceof B.PublicKey&&d.equals(e)){this.decimals=l.decimals,this.symbol=l.symbol,this.name=l.name,this.mint=new B.PublicKey(l.mint);return}this.decimals=r,this.symbol=n,this.name=s,this.mint=D?B.PublicKey.default:j({publicKey:e})}equals(e){return this===e?!0:this.mint.equals(e.mint)}},f=O;f.WSOL=new O(l);var F=class{constructor({decimals:e,symbol:r="UNKNOWN",name:n="UNKNOWN"}){this.decimals=e,this.symbol=r,this.name=n}equals(e){return this===e}},P=F;P.SOL=new F(A);var Y=p(require("toformat")),ue=Y.default,b=ue;var N=p(require("big.js")),X=p(require("decimal.js-light"));var h=require("lodash"),U=p(require("dayjs")),I=p(require("dayjs/plugin/utc"));U.default.extend(I.default);var E=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:3,this.name=e.name}set level(e){this.logLevel=e}get time(){return(0,U.default)().utc().format("YYYY/MM/DD HH:mm:ss UTC")}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let r=e.map(n=>typeof n=="object"?JSON.stringify(n):n).join(", ");throw new Error(r)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},H={},ce={};function c(t){let e=(0,h.get)(H,t);if(!e){let r=(0,h.get)(ce,t);e=new E({name:t,logLevel:r}),(0,h.set)(H,t,e)}return e}var x=c("module/fraction"),R=b(N.default),w=b(X.default),pe={[0]:w.ROUND_DOWN,[1]:w.ROUND_HALF_UP,[2]:w.ROUND_UP},le={[0]:N.default.roundDown,[1]:N.default.roundHalfUp,[2]:N.default.roundUp},o=class{constructor(e,r=z){this.numerator=u(e),this.denominator=u(r)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new o(this.denominator,this.numerator)}add(e){let r=e instanceof o?e:new o(u(e));return this.denominator.eq(r.denominator)?new o(this.numerator.add(r.numerator),this.denominator):new o(this.numerator.mul(r.denominator).add(r.numerator.mul(this.denominator)),this.denominator.mul(r.denominator))}sub(e){let r=e instanceof o?e:new o(u(e));return this.denominator.eq(r.denominator)?new o(this.numerator.sub(r.numerator),this.denominator):new o(this.numerator.mul(r.denominator).sub(r.numerator.mul(this.denominator)),this.denominator.mul(r.denominator))}mul(e){let r=e instanceof o?e:new o(u(e));return new o(this.numerator.mul(r.numerator),this.denominator.mul(r.denominator))}div(e){let r=e instanceof o?e:new o(u(e));return new o(this.numerator.mul(r.denominator),this.denominator.mul(r.numerator))}toSignificant(e,r={groupSeparator:""},n=1){Number.isInteger(e)||x.logWithError(`${e} is not an integer.`),e<=0&&x.logWithError(`${e} is not positive.`),w.set({precision:e+1,rounding:pe[n]});let s=new w(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return s.toFormat(s.decimalPlaces(),r)}toFixed(e,r={groupSeparator:""},n=1){return Number.isInteger(e)||x.logWithError(`${e} is not an integer.`),e<0&&x.logWithError(`${e} is negative.`),R.DP=e,R.RM=le[n]||1,new R(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,r)}isZero(){return this.numerator.isZero()}};var Ge=new o($);var or=c("Raydium_price");var S=c("Raydium_bignumber");var Wr=new a.default(0),z=new a.default(1),yr=new a.default(2),Br=new a.default(3),xr=new a.default(5),Z=new a.default(10),$=new a.default(100),Sr=new a.default(1e3),Dr=new a.default(1e4),J=9007199254740991;function u(t){if(t instanceof a.default)return t;if(typeof t=="string"){if(t.match(/^-?[0-9]+$/))return new a.default(t);S.logWithError(`invalid BigNumberish string: ${t}`)}return typeof t=="number"?(t%1&&S.logWithError(`BigNumberish number underflow: ${t}`),(t>=J||t<=-J)&&S.logWithError(`BigNumberish number overflow: ${t}`),new a.default(String(t))):typeof t=="bigint"?new a.default(t.toString()):(S.logWithError(`invalid BigNumberish value: ${t}`),new a.default(0))}var de=c("Raydium_amount"),G=b(V.default);function Q(t,e){let r="0",n="0";if(t.includes(".")){let s=t.split(".");s.length===2?([r,n]=s,n=n.padEnd(e,"0")):de.logWithError(`invalid number string, num: ${t}`)}else r=t;return[r,n.slice(0,e)||n]}var g=class extends o{constructor(r,n,s=!0,D){let L=new k.default(0),M=Z.pow(new k.default(r.decimals));if(s)L=u(n);else{let W=new k.default(0),v=new k.default(0);if(typeof n=="string"||typeof n=="number"||typeof n=="bigint"){let[ee,re]=Q(n.toString(),r.decimals);W=u(ee),v=u(re)}W=W.mul(M),L=W.add(v)}super(L,M);this.logger=c(D||"Amount"),this.token=r}get raw(){return this.numerator}isZero(){return this.raw.isZero()}gt(r){return this.token.equals(r.token)||this.logger.logWithError("gt token not equals"),this.raw.gt(r.raw)}lt(r){return this.token.equals(r.token)||this.logger.logWithError("lt token not equals"),this.raw.lt(r.raw)}add(r){return this.token.equals(r.token)||this.logger.logWithError("add token not equals"),new g(this.token,this.raw.add(r.raw))}subtract(r){return this.token.equals(r.token)||this.logger.logWithError("sub token not equals"),new g(this.token,this.raw.sub(r.raw))}toSignificant(r=this.token.decimals,n,s=0){return super.toSignificant(r,n,s)}toFixed(r=this.token.decimals,n,s=0){return r>this.token.decimals&&this.logger.logWithError("decimals overflow"),super.toFixed(r,n,s)}toExact(r={groupSeparator:""}){return G.DP=this.token.decimals,new G(this.numerator.toString()).div(this.denominator.toString()).toFormat(r)}};0&&(module.exports={TokenAmount,splitNumber});
//# sourceMappingURL=amount.js.map