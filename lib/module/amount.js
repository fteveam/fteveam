var te=Object.create;var k=Object.defineProperty;var re=Object.getOwnPropertyDescriptor;var ne=Object.getOwnPropertyNames;var oe=Object.getPrototypeOf,ie=Object.prototype.hasOwnProperty;var ae=(r,e)=>{for(var t in e)k(r,t,{get:e[t],enumerable:!0})},M=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ne(e))!ie.call(r,i)&&i!==t&&k(r,i,{get:()=>e[i],enumerable:!(n=re(e,i))||n.enumerable});return r};var p=(r,e,t)=>(t=r!=null?te(oe(r)):{},M(e||!r||!r.__esModule?k(t,"default",{value:r,enumerable:!0}):t,r)),se=r=>M(k({},"__esModule",{value:!0}),r);var be={};ae(be,{TokenAmount:()=>d,splitNumber:()=>V});module.exports=se(be);var G=p(require("big.js")),W=p(require("bn.js"));var s=p(require("bn.js"));var q=require("@solana/web3.js"),A={symbol:"SOL",name:"Solana",decimals:9},l={symbol:"WSOL",name:"Wrapped SOL",mint:"So11111111111111111111111111111111111111112",decimals:9,extensions:{coingeckoId:"solana"}},Ne={isQuantumSOL:!0,isLp:!1,official:!0,mint:new q.PublicKey(l.mint),decimals:9,symbol:"SOL",id:"sol",name:"solana",icon:"https://img.raydium.io/icon/So11111111111111111111111111111111111111112.png",extensions:{coingeckoId:"solana"}};var B=require("@solana/web3.js");var v=require("@solana/spl-token"),a=require("@solana/web3.js");function O({pubkey:r,isSigner:e=!1,isWritable:t=!0}){return{pubkey:r,isWritable:t,isSigner:e}}var ye=[O({pubkey:v.TOKEN_PROGRAM_ID,isWritable:!1}),O({pubkey:a.SystemProgram.programId,isWritable:!1}),O({pubkey:a.SYSVAR_RENT_PUBKEY,isWritable:!1})];function _({publicKey:r,transformSol:e}){if(r instanceof a.PublicKey)return e&&r.equals(g)?C:r;if(e&&r===g.toBase58())return C;if(typeof r=="string")try{return new a.PublicKey(r)}catch{throw new Error("invalid public key")}throw new Error("invalid public key")}var ke=new a.PublicKey("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),Be=new a.PublicKey("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),Se=new a.PublicKey("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),xe=new a.PublicKey("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),De=new a.PublicKey("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),Te=new a.PublicKey("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),Oe=new a.PublicKey("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),Pe=new a.PublicKey("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),Fe=new a.PublicKey("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),Le=new a.PublicKey("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),Ee=new a.PublicKey("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),C=new a.PublicKey("So11111111111111111111111111111111111111112"),g=a.PublicKey.default;var P=class{constructor({mint:e,decimals:t,symbol:n="UNKNOWN",name:i="UNKNOWN",skipMint:D=!1}){if(e===g.toBase58()||e instanceof B.PublicKey&&g.equals(e)){this.decimals=l.decimals,this.symbol=l.symbol,this.name=l.name,this.mint=new B.PublicKey(l.mint);return}this.decimals=t,this.symbol=n,this.name=i,this.mint=D?B.PublicKey.default:_({publicKey:e})}equals(e){return this===e?!0:this.mint.equals(e.mint)}},f=P;f.WSOL=new P(l);var L=class{constructor({decimals:e,symbol:t="UNKNOWN",name:n="UNKNOWN"}){this.decimals=e,this.symbol=t,this.name=n}equals(e){return this===e}},F=L;F.SOL=new L(A);var K=p(require("toformat")),me=K.default,b=me;var N=p(require("big.js")),Y=p(require("decimal.js-light"));var h=require("lodash"),H=p(require("pino")),I=p(require("pino-pretty")),j={},ue={},ce=(0,I.default)({colorize:!0,levelFirst:!0,translateTime:"SYS:yyyymmdd HH:MM:ss.l"}),pe=(0,H.default)({base:null,level:"silent"},ce);function c(r){let e=(0,h.get)(j,r);if(!e){let t=(0,h.get)(ue,r);e=pe.child({name:r},{level:t}),(0,h.set)(j,r,e)}return e.logWithError=(...t)=>{let n=t.map(i=>typeof i=="object"?JSON.stringify(i):i).join(", ");throw new Error(n)},e}var S=c("module/fraction"),E=b(N.default),w=b(Y.default),le={[0]:w.ROUND_DOWN,[1]:w.ROUND_HALF_UP,[2]:w.ROUND_UP},de={[0]:N.default.roundDown,[1]:N.default.roundHalfUp,[2]:N.default.roundUp},o=class{constructor(e,t=z){this.numerator=u(e),this.denominator=u(t)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new o(this.denominator,this.numerator)}add(e){let t=e instanceof o?e:new o(u(e));return this.denominator.eq(t.denominator)?new o(this.numerator.add(t.numerator),this.denominator):new o(this.numerator.mul(t.denominator).add(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}sub(e){let t=e instanceof o?e:new o(u(e));return this.denominator.eq(t.denominator)?new o(this.numerator.sub(t.numerator),this.denominator):new o(this.numerator.mul(t.denominator).sub(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}mul(e){let t=e instanceof o?e:new o(u(e));return new o(this.numerator.mul(t.numerator),this.denominator.mul(t.denominator))}div(e){let t=e instanceof o?e:new o(u(e));return new o(this.numerator.mul(t.denominator),this.denominator.mul(t.numerator))}toSignificant(e,t={groupSeparator:""},n=1){Number.isInteger(e)||S.logWithError(`${e} is not an integer.`),e<=0&&S.logWithError(`${e} is not positive.`),w.set({precision:e+1,rounding:le[n]});let i=new w(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return i.toFormat(i.decimalPlaces(),t)}toFixed(e,t={groupSeparator:""},n=1){return Number.isInteger(e)||S.logWithError(`${e} is not an integer.`),e<0&&S.logWithError(`${e} is negative.`),E.DP=e,E.RM=de[n]||1,new E(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,t)}isZero(){return this.numerator.isZero()}};var et=new o(X);var st=c("Raydium_price");var x=c("Raydium_bignumber");var St=new s.default(0),z=new s.default(1),xt=new s.default(2),Dt=new s.default(3),Tt=new s.default(5),J=new s.default(10),X=new s.default(100),Ot=new s.default(1e3),Pt=new s.default(1e4),$=9007199254740991;function u(r){if(r instanceof s.default)return r;if(typeof r=="string"){if(r.match(/^-?[0-9]+$/))return new s.default(r);x.logWithError(`invalid BigNumberish string: ${r}`)}return typeof r=="number"?(r%1&&x.logWithError(`BigNumberish number underflow: ${r}`),(r>=$||r<=-$)&&x.logWithError(`BigNumberish number overflow: ${r}`),new s.default(String(r))):typeof r=="bigint"?new s.default(r.toString()):(x.logWithError(`invalid BigNumberish value: ${r}`),new s.default(0))}var fe=c("Raydium_amount"),Z=b(G.default);function V(r,e){let t="0",n="0";if(r.includes(".")){let i=r.split(".");i.length===2?([t,n]=i,n=n.padEnd(e,"0")):fe.logWithError(`invalid number string, num: ${r}`)}else t=r;return[t,n.slice(0,e)||n]}var d=class extends o{constructor(t,n,i=!0,D){let T=new W.default(0),U=J.pow(new W.default(t.decimals));if(i)T=u(n);else{let y=new W.default(0),R=new W.default(0);if(typeof n=="string"||typeof n=="number"||typeof n=="bigint"){let[Q,ee]=V(n.toString(),t.decimals);y=u(Q),R=u(ee)}y=y.mul(U),T=y.add(R)}super(T,U);this.logger=c(D||"Amount"),this.token=t}get raw(){return this.numerator}isZero(){return this.raw.isZero()}gt(t){return this.token.equals(t.token)||this.logger.logWithError("gt token not equals"),this.raw.gt(t.raw)}lt(t){return this.token.equals(t.token)||this.logger.logWithError("lt token not equals"),this.raw.lt(t.raw)}add(t){return this.token.equals(t.token)||this.logger.logWithError("add token not equals"),new d(this.token,this.raw.add(t.raw))}subtract(t){return this.token.equals(t.token)||this.logger.logWithError("sub token not equals"),new d(this.token,this.raw.sub(t.raw))}toSignificant(t=this.token.decimals,n,i=0){return super.toSignificant(t,n,i)}toFixed(t=this.token.decimals,n,i=0){return t>this.token.decimals&&this.logger.logWithError("decimals overflow"),super.toFixed(t,n,i)}toExact(t={groupSeparator:""}){return Z.DP=this.token.decimals,new Z(this.numerator.toString()).div(this.denominator.toString()).toFormat(t)}};0&&(module.exports={TokenAmount,splitNumber});
//# sourceMappingURL=amount.js.map