var J=Object.create;var k=Object.defineProperty;var Z=Object.getOwnPropertyDescriptor;var G=Object.getOwnPropertyNames;var V=Object.getPrototypeOf,Q=Object.prototype.hasOwnProperty;var ee=(t,e)=>{for(var r in e)k(t,r,{get:e[r],enumerable:!0})},U=(t,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of G(e))!Q.call(t,s)&&s!==r&&k(t,s,{get:()=>e[s],enumerable:!(o=Z(e,s))||o.enumerable});return t};var c=(t,e,r)=>(r=t!=null?J(V(t)):{},U(e||!t||!t.__esModule?k(r,"default",{value:t,enumerable:!0}):r,t)),re=t=>U(k({},"__esModule",{value:!0}),t);var ue={};ee(ue,{Price:()=>g});module.exports=re(ue);var a=c(require("bn.js"));var A=c(require("big.js")),ae=c(require("bn.js"));var d=require("lodash"),D=c(require("dayjs")),M=c(require("dayjs/plugin/utc"));D.default.extend(M.default);var S=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:3,this.name=e.name}set level(e){this.logLevel=e}get time(){return(0,D.default)().utc().format("YYYY/MM/DD HH:mm:ss UTC")}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let r=e.map(o=>typeof o=="object"?JSON.stringify(o):o).join(", ");throw new Error(r)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},R={},te={};function p(t){let e=(0,d.get)(R,t);if(!e){let r=(0,d.get)(te,t);e=new S({name:t,logLevel:r}),(0,d.set)(R,t,e)}return e}var v=c(require("toformat")),ne=v.default,f=ne;var b=c(require("big.js")),q=c(require("decimal.js-light"));var W=p("module/fraction"),L=f(b.default),h=f(q.default),oe={[0]:h.ROUND_DOWN,[1]:h.ROUND_HALF_UP,[2]:h.ROUND_UP},ie={[0]:b.default.roundDown,[1]:b.default.roundHalfUp,[2]:b.default.roundUp},n=class{constructor(e,r=C){this.numerator=u(e),this.denominator=u(r)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new n(this.denominator,this.numerator)}add(e){let r=e instanceof n?e:new n(u(e));return this.denominator.eq(r.denominator)?new n(this.numerator.add(r.numerator),this.denominator):new n(this.numerator.mul(r.denominator).add(r.numerator.mul(this.denominator)),this.denominator.mul(r.denominator))}sub(e){let r=e instanceof n?e:new n(u(e));return this.denominator.eq(r.denominator)?new n(this.numerator.sub(r.numerator),this.denominator):new n(this.numerator.mul(r.denominator).sub(r.numerator.mul(this.denominator)),this.denominator.mul(r.denominator))}mul(e){let r=e instanceof n?e:new n(u(e));return new n(this.numerator.mul(r.numerator),this.denominator.mul(r.denominator))}div(e){let r=e instanceof n?e:new n(u(e));return new n(this.numerator.mul(r.denominator),this.denominator.mul(r.numerator))}toSignificant(e,r={groupSeparator:""},o=1){Number.isInteger(e)||W.logWithError(`${e} is not an integer.`),e<=0&&W.logWithError(`${e} is not positive.`),h.set({precision:e+1,rounding:oe[o]});let s=new h(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return s.toFormat(s.decimalPlaces(),r)}toFixed(e,r={groupSeparator:""},o=1){return Number.isInteger(e)||W.logWithError(`${e} is not an integer.`),e<0&&W.logWithError(`${e} is negative.`),L.DP=e,L.RM=ie[o]||1,new L(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,r)}isZero(){return this.numerator.isZero()}};var De=p("Raydium_amount"),Le=f(A.default);var K=require("@solana/web3.js"),j={symbol:"SOL",name:"Solana",decimals:9},l={symbol:"WSOL",name:"Wrapped SOL",mint:"So11111111111111111111111111111111111111112",decimals:9,extensions:{coingeckoId:"solana"}},Oe={isQuantumSOL:!0,isLp:!1,official:!0,mint:new K.PublicKey(l.mint),decimals:9,symbol:"SOL",id:"sol",name:"solana",icon:"https://img.raydium.io/icon/So11111111111111111111111111111111111111112.png",extensions:{coingeckoId:"solana"}};var y=require("@solana/web3.js");var H=require("@solana/spl-token"),i=require("@solana/web3.js");function T({pubkey:t,isSigner:e=!1,isWritable:r=!0}){return{pubkey:t,isWritable:r,isSigner:e}}var Ee=[T({pubkey:H.TOKEN_PROGRAM_ID,isWritable:!1}),T({pubkey:i.SystemProgram.programId,isWritable:!1}),T({pubkey:i.SYSVAR_RENT_PUBKEY,isWritable:!1})];function I({publicKey:t,transformSol:e}){if(t instanceof i.PublicKey)return e&&t.equals(N)?Y:t;if(e&&t===N.toBase58())return Y;if(typeof t=="string")try{return new i.PublicKey(t)}catch{throw new Error("invalid public key")}throw new Error("invalid public key")}var Ue=new i.PublicKey("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),Re=new i.PublicKey("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),Me=new i.PublicKey("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),ve=new i.PublicKey("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),qe=new i.PublicKey("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),Ce=new i.PublicKey("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),Ae=new i.PublicKey("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),_e=new i.PublicKey("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),Ke=new i.PublicKey("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),je=new i.PublicKey("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),Ye=new i.PublicKey("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),Y=new i.PublicKey("So11111111111111111111111111111111111111112"),N=i.PublicKey.default;var O=class{constructor({mint:e,decimals:r,symbol:o="UNKNOWN",name:s="UNKNOWN",skipMint:x=!1}){if(e===N.toBase58()||e instanceof y.PublicKey&&N.equals(e)){this.decimals=l.decimals,this.symbol=l.symbol,this.name=l.name,this.mint=new y.PublicKey(l.mint);return}this.decimals=r,this.symbol=o,this.name=s,this.mint=x?y.PublicKey.default:I({publicKey:e})}equals(e){return this===e?!0:this.mint.equals(e.mint)}},w=O;w.WSOL=new O(l);var F=class{constructor({decimals:e,symbol:r="UNKNOWN",name:o="UNKNOWN"}){this.decimals=e,this.symbol=r,this.name=o}equals(e){return this===e}},P=F;P.SOL=new F(j);var rr=new n(X);var B=p("Raydium_bignumber");var hr=new a.default(0),C=new a.default(1),Nr=new a.default(2),wr=new a.default(3),kr=new a.default(5),_=new a.default(10),X=new a.default(100),Wr=new a.default(1e3),yr=new a.default(1e4),z=9007199254740991;function u(t){if(t instanceof a.default)return t;if(typeof t=="string"){if(t.match(/^-?[0-9]+$/))return new a.default(t);B.logWithError(`invalid BigNumberish string: ${t}`)}return typeof t=="number"?(t%1&&B.logWithError(`BigNumberish number underflow: ${t}`),(t>=z||t<=-z)&&B.logWithError(`BigNumberish number overflow: ${t}`),new a.default(String(t))):typeof t=="bigint"?new a.default(t.toString()):(B.logWithError(`invalid BigNumberish value: ${t}`),new a.default(0))}function E(t){return _.pow(u(t))}var me=p("Raydium_price"),g=class extends n{constructor(r){let{baseToken:o,quoteToken:s,numerator:x,denominator:$}=r;super(x,$);this.baseToken=o,this.quoteToken=s,this.scalar=new n(E(o.decimals),E(s.decimals))}get raw(){return new n(this.numerator,this.denominator)}get adjusted(){return super.mul(this.scalar)}invert(){return new g({baseToken:this.quoteToken,quoteToken:this.baseToken,denominator:this.numerator,numerator:this.denominator})}mul(r){this.quoteToken!==r.baseToken&&me.logWithError("mul token not equals");let o=super.mul(r);return new g({baseToken:this.baseToken,quoteToken:r.quoteToken,denominator:o.denominator,numerator:o.numerator})}toSignificant(r=this.quoteToken.decimals,o,s){return this.adjusted.toSignificant(r,o,s)}toFixed(r=this.quoteToken.decimals,o,s){return this.adjusted.toFixed(r,o,s)}};0&&(module.exports={Price});
//# sourceMappingURL=price.js.map