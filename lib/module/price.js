var $=Object.create;var W=Object.defineProperty;var J=Object.getOwnPropertyDescriptor;var Z=Object.getOwnPropertyNames;var G=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty;var Q=(r,e)=>{for(var t in e)W(r,t,{get:e[t],enumerable:!0})},L=(r,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Z(e))!V.call(r,i)&&i!==t&&W(r,i,{get:()=>e[i],enumerable:!(o=J(e,i))||o.enumerable});return r};var c=(r,e,t)=>(t=r!=null?$(G(r)):{},L(e||!r||!r.__esModule?W(t,"default",{value:r,enumerable:!0}):t,r)),ee=r=>L(W({},"__esModule",{value:!0}),r);var ce={};Q(ce,{Price:()=>d});module.exports=ee(ce);var s=c(require("bn.js"));var C=c(require("big.js")),me=c(require("bn.js"));var g=require("lodash"),U=c(require("pino")),R=c(require("pino-pretty")),E={},te={},re=(0,R.default)({colorize:!0,levelFirst:!0,translateTime:"SYS:yyyymmdd HH:MM:ss.l"}),ne=(0,U.default)({base:null,level:"silent"},re);function p(r){let e=(0,g.get)(E,r);if(!e){let t=(0,g.get)(te,r);e=ne.child({name:r},{level:t}),(0,g.set)(E,r,e)}return e.logWithError=(...t)=>{let o=t.map(i=>typeof i=="object"?JSON.stringify(i):i).join(", ");throw new Error(o)},e}var M=c(require("toformat")),oe=M.default,f=oe;var b=c(require("big.js")),q=c(require("decimal.js-light"));var y=p("module/fraction"),x=f(b.default),h=f(q.default),ie={[0]:h.ROUND_DOWN,[1]:h.ROUND_HALF_UP,[2]:h.ROUND_UP},ae={[0]:b.default.roundDown,[1]:b.default.roundHalfUp,[2]:b.default.roundUp},n=class{constructor(e,t=A){this.numerator=u(e),this.denominator=u(t)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new n(this.denominator,this.numerator)}add(e){let t=e instanceof n?e:new n(u(e));return this.denominator.eq(t.denominator)?new n(this.numerator.add(t.numerator),this.denominator):new n(this.numerator.mul(t.denominator).add(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}sub(e){let t=e instanceof n?e:new n(u(e));return this.denominator.eq(t.denominator)?new n(this.numerator.sub(t.numerator),this.denominator):new n(this.numerator.mul(t.denominator).sub(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}mul(e){let t=e instanceof n?e:new n(u(e));return new n(this.numerator.mul(t.numerator),this.denominator.mul(t.denominator))}div(e){let t=e instanceof n?e:new n(u(e));return new n(this.numerator.mul(t.denominator),this.denominator.mul(t.numerator))}toSignificant(e,t={groupSeparator:""},o=1){Number.isInteger(e)||y.logWithError(`${e} is not an integer.`),e<=0&&y.logWithError(`${e} is not positive.`),h.set({precision:e+1,rounding:ie[o]});let i=new h(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return i.toFormat(i.decimalPlaces(),t)}toFixed(e,t={groupSeparator:""},o=1){return Number.isInteger(e)||y.logWithError(`${e} is not an integer.`),e<0&&y.logWithError(`${e} is negative.`),x.DP=e,x.RM=ae[o]||1,new x(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,t)}isZero(){return this.numerator.isZero()}};var Pe=p("Raydium_amount"),Fe=f(C.default);var _=require("@solana/web3.js"),K={symbol:"SOL",name:"Solana",decimals:9},l={symbol:"WSOL",name:"Wrapped SOL",mint:"So11111111111111111111111111111111111111112",decimals:9,extensions:{coingeckoId:"solana"}},Ee={isQuantumSOL:!0,isLp:!1,official:!0,mint:new _.PublicKey(l.mint),decimals:9,symbol:"SOL",id:"sol",name:"solana",icon:"https://img.raydium.io/icon/So11111111111111111111111111111111111111112.png",extensions:{coingeckoId:"solana"}};var k=require("@solana/web3.js");var H=require("@solana/spl-token"),a=require("@solana/web3.js");function D({pubkey:r,isSigner:e=!1,isWritable:t=!0}){return{pubkey:r,isWritable:t,isSigner:e}}var Me=[D({pubkey:H.TOKEN_PROGRAM_ID,isWritable:!1}),D({pubkey:a.SystemProgram.programId,isWritable:!1}),D({pubkey:a.SYSVAR_RENT_PUBKEY,isWritable:!1})];function I({publicKey:r,transformSol:e}){if(r instanceof a.PublicKey)return e&&r.equals(N)?j:r;if(e&&r===N.toBase58())return j;if(typeof r=="string")try{return new a.PublicKey(r)}catch{throw new Error("invalid public key")}throw new Error("invalid public key")}var qe=new a.PublicKey("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),Ae=new a.PublicKey("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),Ce=new a.PublicKey("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),ve=new a.PublicKey("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),_e=new a.PublicKey("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),Ke=new a.PublicKey("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),je=new a.PublicKey("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),He=new a.PublicKey("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),Ie=new a.PublicKey("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),Ye=new a.PublicKey("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),ze=new a.PublicKey("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),j=new a.PublicKey("So11111111111111111111111111111111111111112"),N=a.PublicKey.default;var T=class{constructor({mint:e,decimals:t,symbol:o="UNKNOWN",name:i="UNKNOWN",skipMint:S=!1}){if(e===N.toBase58()||e instanceof k.PublicKey&&N.equals(e)){this.decimals=l.decimals,this.symbol=l.symbol,this.name=l.name,this.mint=new k.PublicKey(l.mint);return}this.decimals=t,this.symbol=o,this.name=i,this.mint=S?k.PublicKey.default:I({publicKey:e})}equals(e){return this===e?!0:this.mint.equals(e.mint)}},w=T;w.WSOL=new T(l);var P=class{constructor({decimals:e,symbol:t="UNKNOWN",name:o="UNKNOWN"}){this.decimals=e,this.symbol=t,this.name=o}equals(e){return this===e}},O=P;O.SOL=new P(K);var ot=new n(Y);var B=p("Raydium_bignumber");var Wt=new s.default(0),A=new s.default(1),yt=new s.default(2),kt=new s.default(3),Bt=new s.default(5),v=new s.default(10),Y=new s.default(100),St=new s.default(1e3),xt=new s.default(1e4),z=9007199254740991;function u(r){if(r instanceof s.default)return r;if(typeof r=="string"){if(r.match(/^-?[0-9]+$/))return new s.default(r);B.logWithError(`invalid BigNumberish string: ${r}`)}return typeof r=="number"?(r%1&&B.logWithError(`BigNumberish number underflow: ${r}`),(r>=z||r<=-z)&&B.logWithError(`BigNumberish number overflow: ${r}`),new s.default(String(r))):typeof r=="bigint"?new s.default(r.toString()):(B.logWithError(`invalid BigNumberish value: ${r}`),new s.default(0))}function F(r){return v.pow(u(r))}var ue=p("Raydium_price"),d=class extends n{constructor(t){let{baseToken:o,quoteToken:i,numerator:S,denominator:X}=t;super(S,X);this.baseToken=o,this.quoteToken=i,this.scalar=new n(F(o.decimals),F(i.decimals))}get raw(){return new n(this.numerator,this.denominator)}get adjusted(){return super.mul(this.scalar)}invert(){return new d({baseToken:this.quoteToken,quoteToken:this.baseToken,denominator:this.numerator,numerator:this.denominator})}mul(t){this.quoteToken!==t.baseToken&&ue.logWithError("mul token not equals");let o=super.mul(t);return new d({baseToken:this.baseToken,quoteToken:t.quoteToken,denominator:o.denominator,numerator:o.numerator})}toSignificant(t=this.quoteToken.decimals,o,i){return this.adjusted.toSignificant(t,o,i)}toFixed(t=this.quoteToken.decimals,o,i){return this.adjusted.toFixed(t,o,i)}};0&&(module.exports={Price});
//# sourceMappingURL=price.js.map