import se from"big.js";import x from"bn.js";import s from"bn.js";import{get as A,set as J}from"lodash";import Z from"pino";import G from"pino-pretty";var C={},V={},Q=G({colorize:!0,levelFirst:!0,translateTime:"SYS:yyyymmdd HH:MM:ss.l"}),ee=Z({base:null,level:"silent"},Q);function p(r){let t=A(C,r);if(!t){let e=A(V,r);t=ee.child({name:r},{level:e}),J(C,r,t)}return t.logWithError=(...e)=>{let n=e.map(i=>typeof i=="object"?JSON.stringify(i):i).join(", ");throw new Error(n)},t}var k=p("Raydium_bignumber");var Te=new s(0),_=new s(1),Oe=new s(2),Pe=new s(3),Fe=new s(5),D=new s(10),K=new s(100),Le=new s(1e3),Ee=new s(1e4),v=9007199254740991;function m(r){if(r instanceof s)return r;if(typeof r=="string"){if(r.match(/^-?[0-9]+$/))return new s(r);k.logWithError(`invalid BigNumberish string: ${r}`)}return typeof r=="number"?(r%1&&k.logWithError(`BigNumberish number underflow: ${r}`),(r>=v||r<=-v)&&k.logWithError(`BigNumberish number overflow: ${r}`),new s(String(r))):typeof r=="bigint"?new s(r.toString()):(k.logWithError(`invalid BigNumberish value: ${r}`),new s(0))}function T(r){return D.pow(m(r))}import te from"toformat";var re=te,N=re;import S from"big.js";import oe from"decimal.js-light";var B=p("module/fraction"),P=N(S),w=N(oe),ie={[0]:w.ROUND_DOWN,[1]:w.ROUND_HALF_UP,[2]:w.ROUND_UP},ae={[0]:S.roundDown,[1]:S.roundHalfUp,[2]:S.roundUp},o=class{constructor(t,e=_){this.numerator=m(t),this.denominator=m(e)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new o(this.denominator,this.numerator)}add(t){let e=t instanceof o?t:new o(m(t));return this.denominator.eq(e.denominator)?new o(this.numerator.add(e.numerator),this.denominator):new o(this.numerator.mul(e.denominator).add(e.numerator.mul(this.denominator)),this.denominator.mul(e.denominator))}sub(t){let e=t instanceof o?t:new o(m(t));return this.denominator.eq(e.denominator)?new o(this.numerator.sub(e.numerator),this.denominator):new o(this.numerator.mul(e.denominator).sub(e.numerator.mul(this.denominator)),this.denominator.mul(e.denominator))}mul(t){let e=t instanceof o?t:new o(m(t));return new o(this.numerator.mul(e.numerator),this.denominator.mul(e.denominator))}div(t){let e=t instanceof o?t:new o(m(t));return new o(this.numerator.mul(e.denominator),this.denominator.mul(e.numerator))}toSignificant(t,e={groupSeparator:""},n=1){Number.isInteger(t)||B.logWithError(`${t} is not an integer.`),t<=0&&B.logWithError(`${t} is not positive.`),w.set({precision:t+1,rounding:ie[n]});let i=new w(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(t);return i.toFormat(i.decimalPlaces(),e)}toFixed(t,e={groupSeparator:""},n=1){return Number.isInteger(t)||B.logWithError(`${t} is not an integer.`),t<0&&B.logWithError(`${t} is negative.`),P.DP=t,P.RM=ae[n]||1,new P(this.numerator.toString()).div(this.denominator.toString()).toFormat(t,e)}isZero(){return this.numerator.isZero()}};var me=p("Raydium_amount"),j=N(se);function ue(r,t){let e="0",n="0";if(r.includes(".")){let i=r.split(".");i.length===2?([e,n]=i,n=n.padEnd(t,"0")):me.logWithError(`invalid number string, num: ${r}`)}else e=r;return[e,n.slice(0,t)||n]}var g=class extends o{constructor(e,n,i=!0,b){let h=new x(0),M=D.pow(new x(e.decimals));if(i)h=m(n);else{let y=new x(0),q=new x(0);if(typeof n=="string"||typeof n=="number"||typeof n=="bigint"){let[X,$]=ue(n.toString(),e.decimals);y=m(X),q=m($)}y=y.mul(M),h=y.add(q)}super(h,M);this.logger=p(b||"Amount"),this.token=e}get raw(){return this.numerator}isZero(){return this.raw.isZero()}gt(e){return this.token.equals(e.token)||this.logger.logWithError("gt token not equals"),this.raw.gt(e.raw)}lt(e){return this.token.equals(e.token)||this.logger.logWithError("lt token not equals"),this.raw.lt(e.raw)}add(e){return this.token.equals(e.token)||this.logger.logWithError("add token not equals"),new g(this.token,this.raw.add(e.raw))}subtract(e){return this.token.equals(e.token)||this.logger.logWithError("sub token not equals"),new g(this.token,this.raw.sub(e.raw))}toSignificant(e=this.token.decimals,n,i=0){return super.toSignificant(e,n,i)}toFixed(e=this.token.decimals,n,i=0){return e>this.token.decimals&&this.logger.logWithError("decimals overflow"),super.toFixed(e,n,i)}toExact(e={groupSeparator:""}){return j.DP=this.token.decimals,new j(this.numerator.toString()).div(this.denominator.toString()).toFormat(e)}};import{PublicKey as ce}from"@solana/web3.js";var H={symbol:"SOL",name:"Solana",decimals:9},d={symbol:"WSOL",name:"Wrapped SOL",mint:"So11111111111111111111111111111111111111112",decimals:9,extensions:{coingeckoId:"solana"}},tt={isQuantumSOL:!0,isLp:!1,official:!0,mint:new ce(d.mint),decimals:9,symbol:"SOL",id:"sol",name:"solana",icon:"https://img.raydium.io/icon/So11111111111111111111111111111111111111112.png",extensions:{coingeckoId:"solana"}};import{PublicKey as L}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as pe}from"@solana/spl-token";import{PublicKey as a,SystemProgram as le,SYSVAR_RENT_PUBKEY as de}from"@solana/web3.js";function F({pubkey:r,isSigner:t=!1,isWritable:e=!0}){return{pubkey:r,isWritable:e,isSigner:t}}var at=[F({pubkey:pe,isWritable:!1}),F({pubkey:le.programId,isWritable:!1}),F({pubkey:de,isWritable:!1})];function Y({publicKey:r,transformSol:t}){if(r instanceof a)return t&&r.equals(W)?I:r;if(t&&r===W.toBase58())return I;if(typeof r=="string")try{return new a(r)}catch{throw new Error("invalid public key")}throw new Error("invalid public key")}var st=new a("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),mt=new a("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),ut=new a("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),ct=new a("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),pt=new a("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),lt=new a("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),dt=new a("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),gt=new a("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),ft=new a("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),bt=new a("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),ht=new a("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),I=new a("So11111111111111111111111111111111111111112"),W=a.default;var E=class{constructor({mint:t,decimals:e,symbol:n="UNKNOWN",name:i="UNKNOWN",skipMint:b=!1}){if(t===W.toBase58()||t instanceof L&&W.equals(t)){this.decimals=d.decimals,this.symbol=d.symbol,this.name=d.name,this.mint=new L(d.mint);return}this.decimals=e,this.symbol=n,this.name=i,this.mint=b?L.default:Y({publicKey:t})}equals(t){return this===t?!0:this.mint.equals(t.mint)}},l=E;l.WSOL=new E(d);var R=class{constructor({decimals:t,symbol:e="UNKNOWN",name:n="UNKNOWN"}){this.decimals=t,this.symbol=e,this.name=n}equals(t){return this===t}},U=R;U.SOL=new R(H);function Dt(r,t){return r instanceof l&&t instanceof l?r.equals(t):r instanceof l||t instanceof l?!1:r===t}var z=new o(K),O=class extends o{toSignificant(t=5,e,n){return this.mul(z).toSignificant(t,e,n)}toFixed(t=2,e,n){return this.mul(z).toFixed(t,e,n)}};var ge=p("Raydium_price"),f=class extends o{constructor(e){let{baseToken:n,quoteToken:i,numerator:b,denominator:h}=e;super(b,h);this.baseToken=n,this.quoteToken=i,this.scalar=new o(T(n.decimals),T(i.decimals))}get raw(){return new o(this.numerator,this.denominator)}get adjusted(){return super.mul(this.scalar)}invert(){return new f({baseToken:this.quoteToken,quoteToken:this.baseToken,denominator:this.numerator,numerator:this.denominator})}mul(e){this.quoteToken!==e.baseToken&&ge.logWithError("mul token not equals");let n=super.mul(e);return new f({baseToken:this.baseToken,quoteToken:e.quoteToken,denominator:n.denominator,numerator:n.numerator})}toSignificant(e=this.quoteToken.decimals,n,i){return this.adjusted.toSignificant(e,n,i)}toFixed(e=this.quoteToken.decimals,n,i){return this.adjusted.toFixed(e,n,i)}};export{U as Currency,o as Fraction,O as Percent,f as Price,l as Token,g as TokenAmount,z as _100_PERCENT,Dt as currencyEquals,ue as splitNumber};
//# sourceMappingURL=index.mjs.map