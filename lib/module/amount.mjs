import se from"big.js";import y from"bn.js";import s from"bn.js";import{PublicKey as z}from"@solana/web3.js";var R={symbol:"SOL",name:"Solana",decimals:9},l={symbol:"WSOL",name:"Wrapped SOL",mint:"So11111111111111111111111111111111111111112",decimals:9,extensions:{coingeckoId:"solana"}},pe={isQuantumSOL:!0,isLp:!1,official:!0,mint:new z(l.mint),decimals:9,symbol:"SOL",id:"sol",name:"solana",icon:"https://img.raydium.io/icon/So11111111111111111111111111111111111111112.png",extensions:{coingeckoId:"solana"}};import{PublicKey as D}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as $}from"@solana/spl-token";import{PublicKey as i,SystemProgram as J,SYSVAR_RENT_PUBKEY as Z}from"@solana/web3.js";function S({pubkey:t,isSigner:e=!1,isWritable:r=!0}){return{pubkey:t,isWritable:r,isSigner:e}}var be=[S({pubkey:$,isWritable:!1}),S({pubkey:J.programId,isWritable:!1}),S({pubkey:Z,isWritable:!1})];function v({publicKey:t,transformSol:e}){if(t instanceof i)return e&&t.equals(d)?M:t;if(e&&t===d.toBase58())return M;if(typeof t=="string")try{return new i(t)}catch{throw new Error("invalid public key")}throw new Error("invalid public key")}var he=new i("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),Ne=new i("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),we=new i("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),ke=new i("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),We=new i("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),ye=new i("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),Be=new i("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),xe=new i("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),Se=new i("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),De=new i("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),Le=new i("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),M=new i("So11111111111111111111111111111111111111112"),d=i.default;var L=class{constructor({mint:e,decimals:r,symbol:n="UNKNOWN",name:a="UNKNOWN",skipMint:B=!1}){if(e===d.toBase58()||e instanceof D&&d.equals(e)){this.decimals=l.decimals,this.symbol=l.symbol,this.name=l.name,this.mint=new D(l.mint);return}this.decimals=r,this.symbol=n,this.name=a,this.mint=B?D.default:v({publicKey:e})}equals(e){return this===e?!0:this.mint.equals(e.mint)}},f=L;f.WSOL=new L(l);var O=class{constructor({decimals:e,symbol:r="UNKNOWN",name:n="UNKNOWN"}){this.decimals=e,this.symbol=r,this.name=n}equals(e){return this===e}},T=O;T.SOL=new O(R);import G from"toformat";var V=G,b=V;import k from"big.js";import te from"decimal.js-light";import{get as q,set as Q}from"lodash";import A from"dayjs";import ee from"dayjs/plugin/utc";A.extend(ee);var P=class{constructor(e){this.logLevel=e.logLevel!==void 0?e.logLevel:0,this.name=e.name}set level(e){this.logLevel=e}get time(){return A().utc().format("YYYY/MM/DD HH:mm:ss UTC")}get moduleName(){return this.name}isLogLevel(e){return e<=this.logLevel}error(...e){return this.isLogLevel(0)?(console.error(this.time,this.name,"sdk logger error",...e),this):this}logWithError(...e){let r=e.map(n=>typeof n=="object"?JSON.stringify(n):n).join(", ");throw new Error(r)}warning(...e){return this.isLogLevel(1)?(console.warn(this.time,this.name,"sdk logger warning",...e),this):this}info(...e){return this.isLogLevel(2)?(console.info(this.time,this.name,"sdk logger info",...e),this):this}debug(...e){return this.isLogLevel(3)?(console.debug(this.time,this.name,"sdk logger debug",...e),this):this}},C={},re={};function p(t){let e=q(C,t);if(!e){let r=q(re,t);e=new P({name:t,logLevel:r}),Q(C,t,e)}return e}var w=p("module/fraction"),F=b(k),h=b(te),ne={[0]:h.ROUND_DOWN,[1]:h.ROUND_HALF_UP,[2]:h.ROUND_UP},oe={[0]:k.roundDown,[1]:k.roundHalfUp,[2]:k.roundUp},o=class{constructor(e,r=_){this.numerator=c(e),this.denominator=c(r)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new o(this.denominator,this.numerator)}add(e){let r=e instanceof o?e:new o(c(e));return this.denominator.eq(r.denominator)?new o(this.numerator.add(r.numerator),this.denominator):new o(this.numerator.mul(r.denominator).add(r.numerator.mul(this.denominator)),this.denominator.mul(r.denominator))}sub(e){let r=e instanceof o?e:new o(c(e));return this.denominator.eq(r.denominator)?new o(this.numerator.sub(r.numerator),this.denominator):new o(this.numerator.mul(r.denominator).sub(r.numerator.mul(this.denominator)),this.denominator.mul(r.denominator))}mul(e){let r=e instanceof o?e:new o(c(e));return new o(this.numerator.mul(r.numerator),this.denominator.mul(r.denominator))}div(e){let r=e instanceof o?e:new o(c(e));return new o(this.numerator.mul(r.denominator),this.denominator.mul(r.numerator))}toSignificant(e,r={groupSeparator:""},n=1){Number.isInteger(e)||w.logWithError(`${e} is not an integer.`),e<=0&&w.logWithError(`${e} is not positive.`),h.set({precision:e+1,rounding:ne[n]});let a=new h(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return a.toFormat(a.decimalPlaces(),r)}toFixed(e,r={groupSeparator:""},n=1){return Number.isInteger(e)||w.logWithError(`${e} is not an integer.`),e<0&&w.logWithError(`${e} is negative.`),F.DP=e,F.RM=oe[n]||1,new F(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,r)}isZero(){return this.numerator.isZero()}};var er=new o(K);var ar=p("Raydium_price");var W=p("Raydium_bignumber");var Sr=new s(0),_=new s(1),Dr=new s(2),Lr=new s(3),Tr=new s(5),Y=new s(10),K=new s(100),Or=new s(1e3),Pr=new s(1e4),j=9007199254740991;function c(t){if(t instanceof s)return t;if(typeof t=="string"){if(t.match(/^-?[0-9]+$/))return new s(t);W.logWithError(`invalid BigNumberish string: ${t}`)}return typeof t=="number"?(t%1&&W.logWithError(`BigNumberish number underflow: ${t}`),(t>=j||t<=-j)&&W.logWithError(`BigNumberish number overflow: ${t}`),new s(String(t))):typeof t=="bigint"?new s(t.toString()):(W.logWithError(`invalid BigNumberish value: ${t}`),new s(0))}var ae=p("Raydium_amount"),H=b(se);function me(t,e){let r="0",n="0";if(t.includes(".")){let a=t.split(".");a.length===2?([r,n]=a,n=n.padEnd(e,"0")):ae.logWithError(`invalid number string, num: ${t}`)}else r=t;return[r,n.slice(0,e)||n]}var g=class extends o{constructor(r,n,a=!0,B){let x=new y(0),E=Y.pow(new y(r.decimals));if(a)x=c(n);else{let N=new y(0),U=new y(0);if(typeof n=="string"||typeof n=="number"||typeof n=="bigint"){let[I,X]=me(n.toString(),r.decimals);N=c(I),U=c(X)}N=N.mul(E),x=N.add(U)}super(x,E);this.logger=p(B||"Amount"),this.token=r}get raw(){return this.numerator}isZero(){return this.raw.isZero()}gt(r){return this.token.equals(r.token)||this.logger.logWithError("gt token not equals"),this.raw.gt(r.raw)}lt(r){return this.token.equals(r.token)||this.logger.logWithError("lt token not equals"),this.raw.lt(r.raw)}add(r){return this.token.equals(r.token)||this.logger.logWithError("add token not equals"),new g(this.token,this.raw.add(r.raw))}subtract(r){return this.token.equals(r.token)||this.logger.logWithError("sub token not equals"),new g(this.token,this.raw.sub(r.raw))}toSignificant(r=this.token.decimals,n,a=0){return super.toSignificant(r,n,a)}toFixed(r=this.token.decimals,n,a=0){return r>this.token.decimals&&this.logger.logWithError("decimals overflow"),super.toFixed(r,n,a)}toExact(r={groupSeparator:""}){return H.DP=this.token.decimals,new H(this.numerator.toString()).div(this.denominator.toString()).toFormat(r)}};export{g as TokenAmount,me as splitNumber};
//# sourceMappingURL=amount.mjs.map