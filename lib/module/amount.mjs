import se from"big.js";import k from"bn.js";import s from"bn.js";import{PublicKey as Y}from"@solana/web3.js";var U={symbol:"SOL",name:"Solana",decimals:9},l={symbol:"WSOL",name:"Wrapped SOL",mint:"So11111111111111111111111111111111111111112",decimals:9,extensions:{coingeckoId:"solana"}},le={isQuantumSOL:!0,isLp:!1,official:!0,mint:new Y(l.mint),decimals:9,symbol:"SOL",id:"sol",name:"solana",icon:"https://img.raydium.io/icon/So11111111111111111111111111111111111111112.png",extensions:{coingeckoId:"solana"}};import{PublicKey as D}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as z}from"@solana/spl-token";import{PublicKey as a,SystemProgram as X,SYSVAR_RENT_PUBKEY as $}from"@solana/web3.js";function x({pubkey:r,isSigner:t=!1,isWritable:e=!0}){return{pubkey:r,isWritable:e,isSigner:t}}var he=[x({pubkey:z,isWritable:!1}),x({pubkey:X.programId,isWritable:!1}),x({pubkey:$,isWritable:!1})];function M({publicKey:r,transformSol:t}){if(r instanceof a)return t&&r.equals(g)?R:r;if(t&&r===g.toBase58())return R;if(typeof r=="string")try{return new a(r)}catch{throw new Error("invalid public key")}throw new Error("invalid public key")}var Ne=new a("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),we=new a("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),We=new a("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),ye=new a("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),ke=new a("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),Be=new a("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),Se=new a("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),xe=new a("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),De=new a("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),Te=new a("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),Oe=new a("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),R=new a("So11111111111111111111111111111111111111112"),g=a.default;var T=class{constructor({mint:t,decimals:e,symbol:n="UNKNOWN",name:i="UNKNOWN",skipMint:B=!1}){if(t===g.toBase58()||t instanceof D&&g.equals(t)){this.decimals=l.decimals,this.symbol=l.symbol,this.name=l.name,this.mint=new D(l.mint);return}this.decimals=e,this.symbol=n,this.name=i,this.mint=B?D.default:M({publicKey:t})}equals(t){return this===t?!0:this.mint.equals(t.mint)}},f=T;f.WSOL=new T(l);var P=class{constructor({decimals:t,symbol:e="UNKNOWN",name:n="UNKNOWN"}){this.decimals=t,this.symbol=e,this.name=n}equals(t){return this===t}},O=P;O.SOL=new P(U);import J from"toformat";var Z=J,b=Z;import W from"big.js";import ne from"decimal.js-light";import{get as q,set as G}from"lodash";import V from"pino";import Q from"pino-pretty";var A={},ee={},te=Q({colorize:!0,levelFirst:!0,translateTime:"SYS:yyyymmdd HH:MM:ss.l"}),re=V({base:null,level:"silent"},te);function p(r){let t=q(A,r);if(!t){let e=q(ee,r);t=re.child({name:r},{level:e}),G(A,r,t)}return t.logWithError=(...e)=>{let n=e.map(i=>typeof i=="object"?JSON.stringify(i):i).join(", ");throw new Error(n)},t}var w=p("module/fraction"),F=b(W),h=b(ne),oe={[0]:h.ROUND_DOWN,[1]:h.ROUND_HALF_UP,[2]:h.ROUND_UP},ie={[0]:W.roundDown,[1]:W.roundHalfUp,[2]:W.roundUp},o=class{constructor(t,e=C){this.numerator=c(t),this.denominator=c(e)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new o(this.denominator,this.numerator)}add(t){let e=t instanceof o?t:new o(c(t));return this.denominator.eq(e.denominator)?new o(this.numerator.add(e.numerator),this.denominator):new o(this.numerator.mul(e.denominator).add(e.numerator.mul(this.denominator)),this.denominator.mul(e.denominator))}sub(t){let e=t instanceof o?t:new o(c(t));return this.denominator.eq(e.denominator)?new o(this.numerator.sub(e.numerator),this.denominator):new o(this.numerator.mul(e.denominator).sub(e.numerator.mul(this.denominator)),this.denominator.mul(e.denominator))}mul(t){let e=t instanceof o?t:new o(c(t));return new o(this.numerator.mul(e.numerator),this.denominator.mul(e.denominator))}div(t){let e=t instanceof o?t:new o(c(t));return new o(this.numerator.mul(e.denominator),this.denominator.mul(e.numerator))}toSignificant(t,e={groupSeparator:""},n=1){Number.isInteger(t)||w.logWithError(`${t} is not an integer.`),t<=0&&w.logWithError(`${t} is not positive.`),h.set({precision:t+1,rounding:oe[n]});let i=new h(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(t);return i.toFormat(i.decimalPlaces(),e)}toFixed(t,e={groupSeparator:""},n=1){return Number.isInteger(t)||w.logWithError(`${t} is not an integer.`),t<0&&w.logWithError(`${t} is negative.`),F.DP=t,F.RM=ie[n]||1,new F(this.numerator.toString()).div(this.denominator.toString()).toFormat(t,e)}isZero(){return this.numerator.isZero()}};var nt=new o(v);var ct=p("Raydium_price");var y=p("Raydium_bignumber");var Ot=new s(0),C=new s(1),Pt=new s(2),Ft=new s(3),Lt=new s(5),K=new s(10),v=new s(100),Et=new s(1e3),Ut=new s(1e4),_=9007199254740991;function c(r){if(r instanceof s)return r;if(typeof r=="string"){if(r.match(/^-?[0-9]+$/))return new s(r);y.logWithError(`invalid BigNumberish string: ${r}`)}return typeof r=="number"?(r%1&&y.logWithError(`BigNumberish number underflow: ${r}`),(r>=_||r<=-_)&&y.logWithError(`BigNumberish number overflow: ${r}`),new s(String(r))):typeof r=="bigint"?new s(r.toString()):(y.logWithError(`invalid BigNumberish value: ${r}`),new s(0))}var me=p("Raydium_amount"),j=b(se);function ue(r,t){let e="0",n="0";if(r.includes(".")){let i=r.split(".");i.length===2?([e,n]=i,n=n.padEnd(t,"0")):me.logWithError(`invalid number string, num: ${r}`)}else e=r;return[e,n.slice(0,t)||n]}var d=class extends o{constructor(e,n,i=!0,B){let S=new k(0),L=K.pow(new k(e.decimals));if(i)S=c(n);else{let N=new k(0),E=new k(0);if(typeof n=="string"||typeof n=="number"||typeof n=="bigint"){let[H,I]=ue(n.toString(),e.decimals);N=c(H),E=c(I)}N=N.mul(L),S=N.add(E)}super(S,L);this.logger=p(B||"Amount"),this.token=e}get raw(){return this.numerator}isZero(){return this.raw.isZero()}gt(e){return this.token.equals(e.token)||this.logger.logWithError("gt token not equals"),this.raw.gt(e.raw)}lt(e){return this.token.equals(e.token)||this.logger.logWithError("lt token not equals"),this.raw.lt(e.raw)}add(e){return this.token.equals(e.token)||this.logger.logWithError("add token not equals"),new d(this.token,this.raw.add(e.raw))}subtract(e){return this.token.equals(e.token)||this.logger.logWithError("sub token not equals"),new d(this.token,this.raw.sub(e.raw))}toSignificant(e=this.token.decimals,n,i=0){return super.toSignificant(e,n,i)}toFixed(e=this.token.decimals,n,i=0){return e>this.token.decimals&&this.logger.logWithError("decimals overflow"),super.toFixed(e,n,i)}toExact(e={groupSeparator:""}){return j.DP=this.token.decimals,new j(this.numerator.toString()).div(this.denominator.toString()).toFormat(e)}};export{d as TokenAmount,ue as splitNumber};
//# sourceMappingURL=amount.mjs.map