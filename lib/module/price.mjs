import s from"bn.js";import G from"big.js";import ke from"bn.js";import{get as P,set as v}from"lodash";import _ from"pino";import K from"pino-pretty";var F={},j={},H=K({colorize:!0,levelFirst:!0,translateTime:"SYS:yyyymmdd HH:MM:ss.l"}),I=_({base:null,level:"silent"},H);function p(r){let e=P(F,r);if(!e){let t=P(j,r);e=I.child({name:r},{level:t}),v(F,r,e)}return e.logWithError=(...t)=>{let o=t.map(i=>typeof i=="object"?JSON.stringify(i):i).join(", ");throw new Error(o)},e}import Y from"toformat";var z=Y,g=z;import w from"big.js";import X from"decimal.js-light";var N=p("module/fraction"),k=g(w),f=g(X),$={[0]:f.ROUND_DOWN,[1]:f.ROUND_HALF_UP,[2]:f.ROUND_UP},J={[0]:w.roundDown,[1]:w.roundHalfUp,[2]:w.roundUp},n=class{constructor(e,t=L){this.numerator=c(e),this.denominator=c(t)}get quotient(){return this.numerator.div(this.denominator)}invert(){return new n(this.denominator,this.numerator)}add(e){let t=e instanceof n?e:new n(c(e));return this.denominator.eq(t.denominator)?new n(this.numerator.add(t.numerator),this.denominator):new n(this.numerator.mul(t.denominator).add(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}sub(e){let t=e instanceof n?e:new n(c(e));return this.denominator.eq(t.denominator)?new n(this.numerator.sub(t.numerator),this.denominator):new n(this.numerator.mul(t.denominator).sub(t.numerator.mul(this.denominator)),this.denominator.mul(t.denominator))}mul(e){let t=e instanceof n?e:new n(c(e));return new n(this.numerator.mul(t.numerator),this.denominator.mul(t.denominator))}div(e){let t=e instanceof n?e:new n(c(e));return new n(this.numerator.mul(t.denominator),this.denominator.mul(t.numerator))}toSignificant(e,t={groupSeparator:""},o=1){Number.isInteger(e)||N.logWithError(`${e} is not an integer.`),e<=0&&N.logWithError(`${e} is not positive.`),f.set({precision:e+1,rounding:$[o]});let i=new f(this.numerator.toString()).div(this.denominator.toString()).toSignificantDigits(e);return i.toFormat(i.decimalPlaces(),t)}toFixed(e,t={groupSeparator:""},o=1){return Number.isInteger(e)||N.logWithError(`${e} is not an integer.`),e<0&&N.logWithError(`${e} is negative.`),k.DP=e,k.RM=J[o]||1,new k(this.numerator.toString()).div(this.denominator.toString()).toFormat(e,t)}isZero(){return this.numerator.isZero()}};var Fe=p("Raydium_amount"),Le=g(G);import{PublicKey as V}from"@solana/web3.js";var U={symbol:"SOL",name:"Solana",decimals:9},l={symbol:"WSOL",name:"Wrapped SOL",mint:"So11111111111111111111111111111111111111112",decimals:9,extensions:{coingeckoId:"solana"}},Re={isQuantumSOL:!0,isLp:!1,official:!0,mint:new V(l.mint),decimals:9,symbol:"SOL",id:"sol",name:"solana",icon:"https://img.raydium.io/icon/So11111111111111111111111111111111111111112.png",extensions:{coingeckoId:"solana"}};import{PublicKey as S}from"@solana/web3.js";import{TOKEN_PROGRAM_ID as Q}from"@solana/spl-token";import{PublicKey as a,SystemProgram as ee,SYSVAR_RENT_PUBKEY as te}from"@solana/web3.js";function B({pubkey:r,isSigner:e=!1,isWritable:t=!0}){return{pubkey:r,isWritable:t,isSigner:e}}var ve=[B({pubkey:Q,isWritable:!1}),B({pubkey:ee.programId,isWritable:!1}),B({pubkey:te,isWritable:!1})];function M({publicKey:r,transformSol:e}){if(r instanceof a)return e&&r.equals(b)?R:r;if(e&&r===b.toBase58())return R;if(typeof r=="string")try{return new a(r)}catch{throw new Error("invalid public key")}throw new Error("invalid public key")}var _e=new a("4k3Dyjzvzp8eMZWUXbBCjEvwSkkk59S5iCNLY3QrkX6R"),Ke=new a("Ea5SjE2Y6yvCeW5dYTn7PYMuW5ikXkvbGdcmSnXeaLjS"),je=new a("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),He=new a("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),Ie=new a("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),Ye=new a("mSoLzYCxHdYgdzU16g5QSh3i5K3z3KZK7ytfqcJm7So"),ze=new a("7dHbWXmci3dT8UFYWYZweBLXgycu7Y3iL6trKn1Y7ARj"),Xe=new a("USDH1SM1ojwWUga67PGrgFWUHibbjqMvuMaDkRJTgkX"),$e=new a("NRVwhjBQiUPYtfDT5zRBVJajzFQHaBUNtC7SNVvqRFa"),Je=new a("ANAxByE6G2WjFp7A4NqtWYXb3mgruyzZYg3spfxe6Lbo"),Ze=new a("7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs"),R=new a("So11111111111111111111111111111111111111112"),b=a.default;var x=class{constructor({mint:e,decimals:t,symbol:o="UNKNOWN",name:i="UNKNOWN",skipMint:y=!1}){if(e===b.toBase58()||e instanceof S&&b.equals(e)){this.decimals=l.decimals,this.symbol=l.symbol,this.name=l.name,this.mint=new S(l.mint);return}this.decimals=t,this.symbol=o,this.name=i,this.mint=y?S.default:M({publicKey:e})}equals(e){return this===e?!0:this.mint.equals(e.mint)}},h=x;h.WSOL=new x(l);var T=class{constructor({decimals:e,symbol:t="UNKNOWN",name:o="UNKNOWN"}){this.decimals=e,this.symbol=t,this.name=o}equals(e){return this===e}},D=T;D.SOL=new T(U);var ut=new n(q);var W=p("Raydium_bignumber");var Dt=new s(0),L=new s(1),Tt=new s(2),Ot=new s(3),Pt=new s(5),E=new s(10),q=new s(100),Ft=new s(1e3),Lt=new s(1e4),A=9007199254740991;function c(r){if(r instanceof s)return r;if(typeof r=="string"){if(r.match(/^-?[0-9]+$/))return new s(r);W.logWithError(`invalid BigNumberish string: ${r}`)}return typeof r=="number"?(r%1&&W.logWithError(`BigNumberish number underflow: ${r}`),(r>=A||r<=-A)&&W.logWithError(`BigNumberish number overflow: ${r}`),new s(String(r))):typeof r=="bigint"?new s(r.toString()):(W.logWithError(`invalid BigNumberish value: ${r}`),new s(0))}function O(r){return E.pow(c(r))}var re=p("Raydium_price"),d=class extends n{constructor(t){let{baseToken:o,quoteToken:i,numerator:y,denominator:C}=t;super(y,C);this.baseToken=o,this.quoteToken=i,this.scalar=new n(O(o.decimals),O(i.decimals))}get raw(){return new n(this.numerator,this.denominator)}get adjusted(){return super.mul(this.scalar)}invert(){return new d({baseToken:this.quoteToken,quoteToken:this.baseToken,denominator:this.numerator,numerator:this.denominator})}mul(t){this.quoteToken!==t.baseToken&&re.logWithError("mul token not equals");let o=super.mul(t);return new d({baseToken:this.baseToken,quoteToken:t.quoteToken,denominator:o.denominator,numerator:o.numerator})}toSignificant(t=this.quoteToken.decimals,o,i){return this.adjusted.toSignificant(t,o,i)}toFixed(t=this.quoteToken.decimals,o,i){return this.adjusted.toFixed(t,o,i)}};export{d as Price};
//# sourceMappingURL=price.mjs.map